(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bf76fba"],{6407:function(e,t,a){},ac3b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("t-layout",{attrs:{border:"",right:"500"},scopedSlots:e._u([{key:"right",fn:function(){return[a("div",{staticClass:"tw-template-wrapper"},[a("div",{staticClass:"tw-list"},e._l(e.fastTextList,function(t,i){return a("div",{key:i,staticClass:"tw-list-item",class:{active:e.fastTextIndex===i},on:{click:function(t){return e.checkInfo(i)},dblclick:function(a){return e.infoTowbk(t.INFO)}}},[a("t-icon",{staticClass:"tw-icon",attrs:{name:"icon-arrowTria"}}),a("span",[e._v(e._s(t.INFO))])],1)}),0),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addInfo}},[e._v("添加")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.editInfo}},[e._v("修改")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.delInfo}},[e._v("删除")])],1)])]},proxy:!0}])},[a("el-form",{staticClass:"tw-form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.loginType.compDisplay,expression:"loginType.compDisplay"}],attrs:{label:"公司"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择公司"},on:{change:e.checkComp},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}},e._l(e.companyOptions,function(e){return a("el-option",{key:e.BA_ID,attrs:{label:e.BA_NAME,value:e.BA_ID}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.loginType.compDisplay,expression:"loginType.compDisplay"}],attrs:{label:"分公司"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择分公司"},on:{change:e.checkVhic},model:{value:e.form.branchOffice,callback:function(t){e.$set(e.form,"branchOffice",t)},expression:"form.branchOffice"}},e._l(e.branchOfficeOptions,function(e){return a("el-option",{key:e.COMP_ID,attrs:{label:e.COMP_NAME,value:e.COMP_ID}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.loginType.groupDisplay,expression:"loginType.groupDisplay"}],attrs:{label:"车辆组"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择车辆组"},on:{change:e.checkVhic},model:{value:e.form.clz,callback:function(t){e.$set(e.form,"clz",t)},expression:"form.clz"}},e._l(e.clzOptions,function(e){return a("el-option",{key:e.ID,attrs:{label:e.CLZ_NAME,value:e.ID}})}),1)],1),a("el-form-item",{attrs:{label:"车牌号码"}},[a("el-select",{staticClass:"tw-select",attrs:{filterable:"",clearable:"",multiple:"",placeholder:"请输入车牌号码"},model:{value:e.form.vehicle,callback:function(t){e.$set(e.form,"vehicle",t)},expression:"form.vehicle"}},e._l(e.vehicleoptions,function(e){return a("el-option",{key:e.VEHI_ID,attrs:{label:e.VEHI_NO,value:e.VEHI_NO}})}),1)],1),a("el-form-item",{attrs:{label:"消息内容"}},[a("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入消息内容"},model:{value:e.form.center,callback:function(t){e.$set(e.form,"center",t)},expression:"form.center"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.sendOut}},[e._v("发送")])],1)],1),a("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.display,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.dialog,"display",t)},closed:e.handleDialogClosed}},[a("el-form",{staticClass:"tw-form",attrs:{model:e.dialog.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"消息内容"}},[a("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:e.dialog.form.name,callback:function(t){e.$set(e.dialog.form,"name",t)},expression:"dialog.form.name"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleDialogCancel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogSubmit}},[e._v("确 定")])],1)],1)],1)},n=[],o=(a("7f7f"),a("bc3a")),s=a.n(o),l=a("0e08"),c=a("17fb"),r=a.n(c),f={name:"MessageSent",data:function(){return{form:{company:"",branchOffice:"",vehicle:[],center:"",clz:""},companyOptions:[],branchOfficeOptions:[],clzOptions:[],fastTextIndex:null,fastTextList:[],vehicleoptions:[],dialog:{display:!1,title:"",form:{name:"",id:""}},loginType:{loginType:"",compDisplay:!1,groupDisplay:!1}}},mounted:function(){this.getLoginType(),this.getInfo()},methods:{checkInfo:function(e){this.fastTextIndex=e},infoTowbk:function(e){this.fastTextIndex=null,this.form.center=e},handleDialogCancel:function(){this.dialog.display=!1},handleDialogClosed:function(){this.dialog.title="",this.dialog.form.name="",this.dialog.form.id=""},getLoginType:function(){var e=this.$cookies.get("loginType");this.loginType.loginType=e,"0"==e?(this.loginType.compDisplay=!0,this.getBa_select()):"1"==e&&(this.loginType.groupDisplay=!0,this.getClz())},getInfo:function(){var e=this;s.a.get("map/getInfo",{baseURL:l["a"]}).then(function(t){e.fastTextList=t.data})},addInfo:function(){this.dialog.display=!0,this.dialog.title="添加"},editInfo:function(){null!=this.fastTextIndex?(this.dialog.display=!0,this.dialog.title="修改",this.dialog.form.id=this.fastTextList[this.fastTextIndex].ID,this.dialog.form.name=this.fastTextList[this.fastTextIndex].INFO):this.$message({message:"请选择一条消息后修改！",type:"warning"})},handleDialogSubmit:function(){var e=this;if(""!=this.dialog.form.name){var t=new URLSearchParams;t.append("info",this.dialog.form.name),"添加"==this.dialog.title?s.a.post("map/addInfo",t,{baseURL:l["a"]}).then(function(t){e.$message(t.data.info),e.dialog.display=!1,e.getInfo()}):(t.append("id",this.dialog.form.id),s.a.post("map/editInfo",t,{baseURL:l["a"]}).then(function(t){e.$message(t.data.info),e.dialog.display=!1,e.getInfo()}))}else this.$message({message:"消息内容必能为空！",type:"warning"})},delInfo:function(){var e=this;null!=this.fastTextIndex?this.$confirm("此操作将永久删除该消息内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=new URLSearchParams;t.append("id",e.fastTextList[e.fastTextIndex].ID),s.a.post("map/delInfo",t,{baseURL:l["a"]}).then(function(t){e.$message(t.data.info),e.getInfo()})}).catch(function(){}):this.$message({message:"请选择一条消息后删除！",type:"warning"})},getBa_select:function(){var e=this;s.a.get("map/getBa_select",{baseURL:l["a"]}).then(function(t){e.companyOptions=t.data})},checkComp:function(){var e=this;this.form.branchOffice="",this.form.vehicle="";var t=new URLSearchParams;t.append("id",this.form.company),s.a.post("map/getComp_select",t,{baseURL:l["a"]}).then(function(t){e.branchOfficeOptions=t.data}),this.checkVhic()},checkVhic:function(){var e=this;this.form.vehicle="";var t=new URLSearchParams;"0"==this.loginType.loginType?(t.append("ba_id",this.form.company),t.append("comp_id",this.form.branchOffice)):"1"==this.loginType.loginType&&t.append("id",this.form.clz),s.a.post("map/getVhic_select",t,{baseURL:l["a"]}).then(function(t){e.vehicleoptions=t.data})},getClz:function(){var e=this;s.a.get("map/getClz",{baseURL:l["a"]}).then(function(t){console.log(t.data),e.clzOptions=t.data})},sendOut:function(){var e=this;if(console.log(this.form),"0"==this.loginType.loginType){if(""==this.form.company)return void this.$message({message:"公司不能为空！",type:"warning"})}else if("1"==this.loginType.loginType&&""==this.form.clz)return void this.$message({message:"车辆组不能为空！",type:"warning"});if(""!=this.form.center){var t="";this.form.vehicle.length>0&&(r.a.map(this.form.vehicle,function(e){t+="'"+e+"',"}),t=t.substring(0,t.length-1));var a=new URLSearchParams;"0"==this.loginType.loginType?(a.append("ba_id",this.form.company),a.append("comp_id",this.form.branchOffice)):"1"==this.loginType.loginType&&a.append("clz",this.form.clz),a.append("vehi_no",t),a.append("nr",this.form.center),s.a.post("map/sendMessage",a,{baseURL:l["a"]}).then(function(t){e.$message("下发成功")})}else this.$message({message:"消息内容不能为空！",type:"warning"})}}},p=f,m=(a("f23a"),a("2877")),h=Object(m["a"])(p,i,n,!1,null,"60d156bb",null);t["default"]=h.exports},f23a:function(e,t,a){"use strict";var i=a("6407"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-0bf76fba.0619b69c.js.map