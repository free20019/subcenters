{"version":3,"sources":["webpack:///./src/views/data-statistics/UnlistedVehicleInquiry.vue?43f5","webpack:///src/views/data-statistics/UnlistedVehicleInquiry.vue","webpack:///./src/views/data-statistics/UnlistedVehicleInquiry.vue?903f","webpack:///./src/views/data-statistics/UnlistedVehicleInquiry.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","query","scopedSlots","_u","key","fn","timeControl","model","value","callback","$$v","$set","expression","on","handleTimeTypeChange","_l","item","label","iconClassName","handleCompanyQuerySearch","loginType","select","_e","handleQueryClick","_v","handleExportClick","proxy","table","data","display","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d231085.2068dacf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('t-query-panel',{attrs:{\"model\":_vm.query,\"footer\":\"300\"},scopedSlots:_vm._u([{key:\"querybar\",fn:function(){return [_c('el-form-item',[_c('el-date-picker',{attrs:{\"type\":\"date\",\"disabled\":_vm.timeControl,\"placeholder\":\"开始时间\"},model:{value:(_vm.query.startTime),callback:function ($$v) {_vm.$set(_vm.query, \"startTime\", $$v)},expression:\"query.startTime\"}})],1),_c('el-form-item',[_c('el-date-picker',{attrs:{\"type\":\"date\",\"disabled\":_vm.timeControl,\"placeholder\":\"结束时间\"},model:{value:(_vm.query.endTime),callback:function ($$v) {_vm.$set(_vm.query, \"endTime\", $$v)},expression:\"query.endTime\"}})],1),_c('el-form-item',[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.handleTimeTypeChange},model:{value:(_vm.query.timeType),callback:function ($$v) {_vm.$set(_vm.query, \"timeType\", $$v)},expression:\"query.timeType\"}},_vm._l((_vm.timeTypeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',[_c('el-autocomplete',{attrs:{\"prefix-icon\":_vm.iconClassName('icon-car'),\"fetch-suggestions\":_vm.handleCompanyQuerySearch,\"trigger-on-focus\":false,\"placeholder\":\"公司名称\"},model:{value:(_vm.query.company),callback:function ($$v) {_vm.$set(_vm.query, \"company\", $$v)},expression:\"query.company\"}})],1),_c('el-form-item',[(_vm.loginType==='1')?_c('el-select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择车辆组\"},model:{value:(_vm.query.vehicleGroupId),callback:function ($$v) {_vm.$set(_vm.query, \"vehicleGroupId\", $$v)},expression:\"query.vehicleGroupId\"}},_vm._l((_vm.select.vehicleGroup),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1):_vm._e()],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleQueryClick}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleExportClick}},[_vm._v(\"导出\")])],1)]},proxy:true}])},[_c('t-table-page',{attrs:{\"data\":_vm.table.data,\"loading\":_vm.table.display,\"page-size\":20}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"align\":\"center\",\"width\":\"50\",\"resizable\":false}}),_c('el-table-column',{attrs:{\"prop\":\"COMP_NAME\",\"label\":\"公司名称\",\"align\":\"center\",\"width\":\"240\"}}),_c('el-table-column',{attrs:{\"prop\":\"VEHI_NO\",\"label\":\"车牌号码\",\"align\":\"center\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"VEHI_SIM\",\"label\":\"SIM卡号\",\"align\":\"center\",\"width\":\"140\"}}),_c('el-table-column',{attrs:{\"prop\":\"MT_NAME\",\"label\":\"终端类型\",\"align\":\"center\",\"width\":\"140\"}}),_c('el-table-column',{attrs:{\"prop\":\"MDT_SUB_TYPE\",\"label\":\"终端子类型\",\"align\":\"center\",\"width\":\"140\"}}),_c('el-table-column',{attrs:{\"prop\":\"OWN_NAME\",\"label\":\"联系人\",\"align\":\"center\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"HOME_TEL\",\"label\":\"联系电话\",\"align\":\"center\",\"width\":\"240\"}}),_c('el-table-column',{attrs:{\"prop\":\"TIME\",\"label\":\"最后上线时间\",\"align\":\"center\",\"min-width\":\"140\",\"resizable\":false}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 未上线车辆查询 -->\n<template>\n  <t-query-panel :model=\"query\" footer=\"300\">\n    <template v-slot:querybar>\n      <el-form-item>\n        <el-date-picker v-model=\"query.startTime\" type=\"date\" :disabled=\"timeControl\" placeholder=\"开始时间\"></el-date-picker>\n      </el-form-item>\n      <el-form-item>\n        <el-date-picker v-model=\"query.endTime\" type=\"date\" :disabled=\"timeControl\" placeholder=\"结束时间\"></el-date-picker>\n      </el-form-item>\n      <el-form-item>\n        <el-select v-model=\"query.timeType\" placeholder=\"请选择\" @change=\"handleTimeTypeChange\">\n          <el-option v-for=\"item in timeTypeOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-autocomplete\n          v-model=\"query.company\"\n          :prefix-icon=\"iconClassName('icon-car')\"\n          :fetch-suggestions=\"handleCompanyQuerySearch\"\n          :trigger-on-focus=\"false\"\n          placeholder=\"公司名称\"\n        ></el-autocomplete>\n      </el-form-item>\n      <el-form-item>\n        <el-select v-model=\"query.vehicleGroupId\" filterable clearable  placeholder=\"请选择车辆组\" v-if=\"loginType==='1'\">\n          <el-option\n            v-for=\"item in select.vehicleGroup\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"handleQueryClick\">查询</el-button>\n        <el-button type=\"primary\" @click=\"handleExportClick\">导出</el-button>\n      </el-form-item>\n    </template>\n    <t-table-page :data=\"table.data\" :loading=\"table.display\" :page-size=\"20\">\n      <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"50\" :resizable=\"false\"></el-table-column>\n      <el-table-column prop=\"COMP_NAME\" label=\"公司名称\" align=\"center\" width=\"240\"></el-table-column>\n      <el-table-column prop=\"VEHI_NO\" label=\"车牌号码\" align=\"center\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"VEHI_SIM\" label=\"SIM卡号\" align=\"center\" width=\"140\"></el-table-column>\n      <el-table-column prop=\"MT_NAME\" label=\"终端类型\" align=\"center\" width=\"140\"></el-table-column>\n      <el-table-column prop=\"MDT_SUB_TYPE\" label=\"终端子类型\" align=\"center\" width=\"140\"></el-table-column>\n      <el-table-column prop=\"OWN_NAME\" label=\"联系人\" align=\"center\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"HOME_TEL\" label=\"联系电话\" align=\"center\" width=\"240\"></el-table-column>\n      <el-table-column prop=\"TIME\" label=\"最后上线时间\" align=\"center\" min-width=\"140\" :resizable=\"false\"></el-table-column>\n    </t-table-page>\n  </t-query-panel>\n</template>\n\n<script>\n  import moment from 'moment'\n  import { iconClassName ,baseURL} from 'util'\n  import axios from 'axios'\n  import _ from 'underscore'\n  export default {\n    name: 'UnlistedVehicleInquiry',\n    data() {\n      return {\n        loginType:'',\n        query: {\n          startTime: '',\n          endTime: '',\n          timeType: 2,\n          company: '',\n          vehicleGroupId: '',\n        },\n        timeControl: true,\n        timeTypeOptions: [\n          {label: '自定义时间', value: 0},\n          {label: '3天时间', value: 1},\n          {label: '7天时间', value: 2}\n        ],\n        table: {\n          display: false,\n          data: []\n        },\n        select:{\n          company: [],\n          vehicleGroup:[],\n        }\n      }\n    },\n    mounted() {\n      this.query.startTime = moment(moment().subtract(8, 'days').format('YYYY-MM-DD'));\n      this.query.endTime = moment(moment().subtract(1, 'days').format('YYYY-MM-DD'));\n      this.loginType=this.$cookies.get('loginType');\n      this.getVehicleGroup();\n      this.findUnlistedVehicle();\n      this.getCompany();\n    },\n    methods: {\n      iconClassName,\n      getVehicleGroup(){\n        if(this.loginType!=='1') return null;\n        axios.get('common/vehicleGroup', {\n          baseURL,\n          params: {\n            userId:this.$cookies.get('userId'),\n          }\n        }).then(res=> {\n          this.select.vehicleGroup = _.map(res.data, item => {\n            return {value: item.CLZS, label:item.CLZ_NAME}\n          });\n        }).catch(function (error) {\n        });\n      },\n      handleCompanyQuerySearch(query, cb) {\n        cb(_.filter(this.select.company, item => item.value.indexOf(query) > -1))\n      },\n      getCompany(){\n        axios.get('common/company', {\n          baseURL,\n          params: {}\n        }).then(res=> {\n          this.select.company = _.map(res.data, item => {\n            return {\n              value: item.COMPANY_NAME\n            }\n          });\n        }).catch(function (error) {\n          console.log(error);\n        });\n      },\n      findUnlistedVehicle() {\n        const {startTime, endTime, company, vehicleGroupId} = this.query;\n        if(!startTime||!endTime) return this.$message.error('请选择时间！');\n        this.table.display = true;\n        axios.get('dataStatistics/findUnlistedVehicle', {\n          baseURL,\n          params: {\n            startTime: startTime && moment(startTime).format('YYYY-MM-DD'),\n            endTime: endTime && moment(endTime).format('YYYY-MM-DD'),\n            company,\n            vehicleGroupId\n          }\n        }).then(res=> {\n          console.log(\"1111111111111\",res)\n          this.table.data = res.data||[];\n          this.table.display = false;\n        }).catch(function (error) {\n          console.log(error);\n        });\n      },\n      /*事件*/\n      handleTimeTypeChange() {\n        switch (this.query.timeType) {\n          case 0:\n            this.timeControl = false;\n            break;\n          case 1:\n            this.timeControl = true;\n            this.query.startTime = moment(moment().subtract(4, 'days').format('YYYY-MM-DD'));\n            this.query.endTime = moment(moment().subtract(1, 'days').format('YYYY-MM-DD'));\n            break;\n          case 2:\n            this.timeControl = true;\n            this.query.startTime = moment(moment().subtract(8, 'days').format('YYYY-MM-DD'));\n            this.query.endTime = moment(moment().subtract(1, 'days').format('YYYY-MM-DD'));\n            break;\n        }\n      },\n      handleQueryClick() {\n        this.findUnlistedVehicle();\n      },\n      handleExportClick() {\n        const {startTime, endTime, company, vehicleGroupId} = this.query;\n        if(!startTime||!endTime) return this.$message.error('请选择时间！');\n        this.$confirm('是否需要导出?', '提示', {\n          confirmButtonText: '是',\n          cancelButtonText: '否',\n          cancelButtonClass: 'el-button--danger',\n          closeOnClickModal: false,\n          type: 'info',\n          center: true\n        }).then(() => {\n          window.open(`${baseURL}dataStatistics/findUnlistedVehicleExcel?startTime=${startTime && moment(startTime).format('YYYY-MM-DD')}&endTime=${endTime && moment(endTime).format('YYYY-MM-DD')}&company=${company}&vehicleGroupId=${vehicleGroupId}`);\n        }).catch(() => {\n\n        });\n      }\n    }\n  }\n</script>\n\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnlistedVehicleInquiry.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnlistedVehicleInquiry.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UnlistedVehicleInquiry.vue?vue&type=template&id=4551e6b2&\"\nimport script from \"./UnlistedVehicleInquiry.vue?vue&type=script&lang=js&\"\nexport * from \"./UnlistedVehicleInquiry.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}