(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b9633"],{3374:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("t-query-panel",{attrs:{model:e.query,footer:"300"},scopedSlots:e._u([{key:"querybar",fn:function(){return[a("el-form-item",[a("el-date-picker",{attrs:{type:"date",placeholder:"时间"},model:{value:e.query.time,callback:function(t){e.$set(e.query,"time",t)},expression:"query.time"}})],1),a("el-form-item",[a("el-autocomplete",{attrs:{"prefix-icon":e.iconClassName("icon-car"),"fetch-suggestions":e.handleCompanyQuerySearch,"trigger-on-focus":!1,placeholder:"公司名称"},model:{value:e.query.company,callback:function(t){e.$set(e.query,"company",t)},expression:"query.company"}})],1),a("el-form-item",["1"===e.loginType?a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择车辆组"},model:{value:e.query.vehicleGroupId,callback:function(t){e.$set(e.query,"vehicleGroupId",t)},expression:"query.vehicleGroupId"}},e._l(e.select.vehicleGroup,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e()],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")])],1)]},proxy:!0}])},[a("t-table-page",{attrs:{data:e.table.data,loading:e.table.display,"page-size":24}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50",resizable:!1}}),a("el-table-column",{attrs:{prop:"DB_TIME",label:"日期",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"REPORE_VHIC",label:"总车辆数",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"RUN_TAXIS",label:"营运车辆数",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"RUN_RATE",label:"出车率",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"RUN_TIMES",label:"平均周转次数",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"RUN_PROFIT",label:"平均营收金额",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"ACTUAL_LOAD_RATE",label:"平均实载率",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"RUN_TIME",label:"平均重车时间(分)",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"WAITTING_TIME",label:"平均等候时间(分)",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"ACTUAL_LOAD_MILEAGE",label:"平均实载里程(公里)",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"NO_LOAD_MILEAGE",label:"平均空驶里程(公里)",align:"center","min-width":"180",resizable:!1}})],1)],1)},n=[],i=a("c1df"),r=a.n(i),o=a("0e08"),c=a("bc3a"),u=a.n(c),p=a("17fb"),s=a.n(p),m={name:"OperatingDaily",data:function(){return{loginType:"",query:{time:"",company:"",vehicleGroupId:""},inputVehicle:{loading:!1,option:[]},table:{display:!1,data:[]},select:{company:[],vehicleGroup:[]}}},mounted:function(){this.query.time=new Date,this.loginType=this.$cookies.get("loginType"),this.getVehicleGroup(),this.findOperatingDaily(),this.getCompany()},methods:{iconClassName:o["m"],getVehicleGroup:function(){var e=this;if("1"!==this.loginType)return null;u.a.get("common/vehicleGroup",{baseURL:o["a"],params:{userId:this.$cookies.get("userId")}}).then(function(t){e.select.vehicleGroup=s.a.map(t.data,function(e){return{value:e.CLZS,label:e.CLZ_NAME}})}).catch(function(e){})},handleCompanyQuerySearch:function(e,t){t(s.a.filter(this.select.company,function(t){return t.value.indexOf(e)>-1}))},getCompany:function(){var e=this;u.a.get("common/company",{baseURL:o["a"],params:{}}).then(function(t){e.select.company=s.a.map(t.data,function(e){return{value:e.COMPANY_NAME}})}).catch(function(e){})},findOperatingDaily:function(){var e=this,t=this.query,a=t.time,l=t.company;if(!a)return this.$message.error("请选择时间！");this.table.display=!0,u.a.get("queryAnalysis/findOperatingDaily",{baseURL:o["a"],params:{time:a&&r()(a).format("YYYY-MM-DD"),company:l}}).then(function(t){e.table.data=t.data||[],e.table.display=!1}).catch(function(e){})},handleQueryClick:function(){this.findOperatingDaily()},handleExportClick:function(){var e=this.query,t=e.time,a=e.company;if(!t)return this.$message.error("请选择时间！");this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){window.open("".concat(o["a"],"queryAnalysis/findOperatingDailyExcel?time=").concat(t&&r()(t).format("YYYY-MM-DD"),"&company=").concat(a))}).catch(function(){})}}},h=m,d=a("2877"),y=Object(d["a"])(h,l,n,!1,null,null,null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0b9633.e017890b.js.map