(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3959e8e8"],{"072e":function(e,t,i){"use strict";var l=i("c545"),a=i.n(l);a.a},1069:function(e,t,i){},"47ee0":function(e,t,i){"use strict";var l=i("1069"),a=i.n(l);a.a},"4c3d":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("t-layout",{attrs:{right:"340"},scopedSlots:e._u([{key:"left",fn:function(){return[i("real-time-monitor-vehicle-panel",{attrs:{vhic:e.table.positionInfo.data},on:{"update:vhic":function(t){return e.$set(e.table.positionInfo,"data",t)}}})]},proxy:!0}])},[i("t-layout",{attrs:{footer:"300"},scopedSlots:e._u([{key:"footer",fn:function(){return[i("div",{staticClass:"tw-border__body"},[i("el-table",{staticClass:"tw-table",attrs:{data:e.table.data,size:"small",border:""},on:{"row-click":e.rowclick}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),i("el-table-column",{attrs:{prop:"VEHI_NO",label:"车牌号码","min-width":"100",align:"center"}}),i("el-table-column",{attrs:{prop:"COMP_NAME",label:"分公司","min-width":"160",align:"center"}}),i("el-table-column",{attrs:{prop:"VEHI_SIM",label:"SIM卡号",width:"120",align:"center"}}),i("el-table-column",{attrs:{prop:"MDT_NO",label:"终端类型",width:"120",align:"center"}}),i("el-table-column",{attrs:{prop:"STIME",label:"GPS时间",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.stime(t.row.STIME))}})]}}])}),i("el-table-column",{attrs:{prop:"SPEED",label:"GPS速度",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"STATE",label:"车辆状态",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"ANGLE",label:"方向",width:"100",align:"center"}}),i("el-table-column",{attrs:{label:"操作",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",icon:"el-icon-delete",size:"small"},on:{click:function(i){return i.stopPropagation(),e.delRwo(t.row.VEHI_NO)}}})]}}])})],1)],1)]},proxy:!0}])},[i("div",{staticClass:"tw-map-panel",attrs:{id:"baidu-map"}})])],1)},a=[],c=i("bc3a"),n=i.n(c),s=i("5344"),o=i("024c"),r=i.n(o),h=i("5118"),d=i("0e08"),u=i("17fb"),p=i.n(u),m=i("1157"),v=i.n(m),f=i("c1df"),b=i.n(f),w=i("aac5"),g=i.n(w),y=i("5218"),I=i.n(y),N=i("8eac"),T=i.n(N),k={name:"MultiVehicleMonitor",data:function(){return{table:{positionInfo:{data:[]},data:[]},map:null,vhic:{vehicle:"",vehicleList:[],vhicsetInterval:null,address:""},infoWindow:new r.a.InfoWindow({isCustom:!0,offset:new r.a.Pixel(0,-30)}),geocoder:new r.a.Geocoder({city:"010",radius:1e3}),vehicleinfo:[],mapmar:[],setIntervalVList:null}},mounted:function(){var e=this;this.$nextTick(function(){e.map=new r.a.Map("baidu-map",{resizeEnable:!0,zoom:18})})},methods:{stime:function(e){return b()(e).format("YYYY-MM-DD HH:mm:ss")},getVehicleInfo:function(){var e=this;if(0==this.vhic.vehicleList.length)return this.map.clearMap(),void clearInterval(this.setIntervalVList);var t="";p.a.map(this.vhic.vehicleList,function(e){t+="'"+e+"',"});var i=new URLSearchParams;i.append("type","2"),i.append("vhic",t.substring(0,t.length-1)),n.a.post("map/getOneVhic",i,{baseURL:d["a"]}).then(function(t){e.table.data=t.data||[],e.map.clearMap(),p.a.map(e.table.data,function(t){e.addmar(t),e.addText(t),t.VEHI_NO==e.vhic.vehicle&&e.markerClick(t)})})},addmar:function(e){var t=this,i="";i="1"==e.TYPE?g.a:"1"==e.state?I.a:T.a;var l=new r.a.Marker({position:[e.PX,e.PY],map:this.map,icon:i,offset:new r.a.Pixel(-16,-16),angle:e.ANGLE});l.vehicle=e.VEHI_NO,this.mapmar.push(l),r.a.event.addListener(l,"click",function(i){t.markerClick(e)})},markerMouseout:function(){this.infoWindow.close()},createInfoWindowHtml:function(e){var t=this,i=v()("<span>").addClass("tw-title").text(e.VEHI_NO+("0"==e.CARSTATE?"(精确)":"(非精确)")),l=v()("<span>").addClass("tw-close").html("&times;").on("click",function(){t.markerMouseout()}),a=e.COMP_NAME||"",c=e.MDT_NO||"",n=e.VEHI_SIM||"",s=e.SPEED+"KM/S"||!1,o=e.ADDRESS||"",r=Object(d["b"])(e.STIME),h=e.MDT_SUB_TYPE||"",u="0"==e.STATE?"重车":"空车",p=e.OWN_NAME||"无",m=e.OWN_TEL||"无";return v()("<div>").addClass("tw-map-window").html([v()("<div>").addClass("tw-map-window-header").html([i,l]),v()("<div>").addClass("tw-map-window-body").html(['<div class="el-row"><div class="el-col el-col-6 tw-align-right">公司名称：</div><div class="el-col el-col-18">'.concat(a,"</div></div>"),'<div class="el-row"><div class="el-col el-col-6 tw-align-right">终端编号：</div><div class="el-col el-col-18">'.concat(c,"</div></div>"),'<div class="el-row"><div class="el-col el-col-6 tw-align-right">营运状态：</div><div class="el-col el-col-18">'.concat(u,"</div></div>"),'<div class="el-row"><div class="el-col el-col-6 tw-align-right">SIM卡号：</div><div class="el-col el-col-18">'.concat(n,"</div></div>"),'<div class="el-row"><div class="el-col el-col-6 tw-align-right">GPS速度：</div><div class="el-col el-col-18">'.concat(s,"</div></div>"),'\x3c!--<div class="el-row"><div class="el-col el-col-6 tw-align-right">终端类型：</div><div class="el-col el-col-18"></div></div>--\x3e','<div class="el-row"><div class="el-col el-col-6 tw-align-right">子类型：</div><div class="el-col el-col-18">'.concat(h,"</div></div>"),'<div class="el-row"><div class="el-col el-col-6 tw-align-right">联系人：</div><div class="el-col el-col-18">'.concat(p,"</div></div>"),'<div class="el-row"><div class="el-col el-col-6 tw-align-right">联系电话：</div><div class="el-col el-col-18">'.concat(m,"</div></div>"),'<div class="el-row"><div class="el-col el-col-6 tw-align-right">定位时间：</div><div class="el-col el-col-18">'.concat(r,"</div></div>"),'<div class="el-row"><div class="el-col el-col-6 tw-align-right">当前地址：</div><div class="el-col el-col-18">'.concat(o,"</div></div>")])])},addText:function(e){var t=new r.a.Text({text:e.VEHI_NO,anchor:"bottom-center",cursor:"pointer",offset:new r.a.Pixel(5,30),style:{"border-radius":".25rem","background-color":"white",width:"6em","border-width":0,"box-shadow":"0 2px 6px 0 rgba(114, 124, 245, .5)","text-align":"center","font-size":"10px","font-weight":"bold ",color:"blue"},position:[e.PX,e.PY]});t.vehicle=e.VEHI_NO,this.mapmar.push(t),t.setMap(this.map)},markerClick:function(e){var t=this,i=function(e){t.infoWindow=new r.a.InfoWindow({isCustom:!0,content:t.createInfoWindowHtml(e)[0],offset:new r.a.Pixel(0,-20),autoMove:!0,closeWhenClickMap:!0}),t.infoWindow.open(t.map,[e.PX,e.PY])};this.geocoder.getAddress([e.PX,e.PY],function(t,l){"complete"===t&&l.regeocode?e.ADDRESS=l.regeocode.formattedAddress:log.error("根据经纬度查询地址失败"),i(e)}),i(e),this.map.setCenter([e.PX,e.PY])},rowclick:function(e){this.map.setCenter([e.PX,e.PY]),this.markerClick(e)},delRwo:function(e){for(var t=[],i=0;i<this.table.data.length;i++)console.log(this.table.data[i].VEHI_NO),this.table.data[i].VEHI_NO!=e&&t.push(this.table.data[i]);var l=[];p.a.map(this.vhic.vehicleList,function(t){t!=e&&l.push(t)}),this.vhic.vehicleList=l,this.table.data=t,this.vhic.vehicle="",this.getVehicleInfo()}},components:{RealTimeMonitorVehiclePanel:s["a"]},watch:{"table.positionInfo.data":function(e){for(var t=0;t<this.vhic.vehicleList.length;t++)if(this.vhic.vehicleList[t]==e[0].VEHI_NO)return void this.$message.error("该车已在监控列表");this.vhic.vehicle=e[0].VEHI_NO,this.vhic.vehicleList.push(e[0].VEHI_NO),this.getVehicleInfo(),this.setIntervalVList=Object(h["setInterval"])(this.getVehicleInfo(),3e4)}},destroyed:function(){clearInterval(this.setIntervalVList)}},A=k,M=(i("47ee0"),i("2877")),O=Object(M["a"])(A,l,a,!1,null,"4aa2bf42",null);t["default"]=O.exports},5118:function(e,t,i){(function(e){var l="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function c(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new c(a.call(setTimeout,l,arguments),clearTimeout)},t.setInterval=function(){return new c(a.call(setInterval,l,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(l,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i("c8ba"))},5218:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHRGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxNy0xMS0zMFQxMDowOToxNSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxNy0xMS0zMFQxMDowOToxNSswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTctMTEtMzBUMTA6MDk6MTUrMDg6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YTRmNmY4NzUtYTFhMi0yMDQyLWI3NWQtMWMxNDYwYTBiMzQ0IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OWNlY2YyNjgtODFkMC1lYjRmLTgxZWYtZmU1MjAwOWY3NDk2IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MzAzZmM2OTAtNDczZC1hZjQxLTllYmItZWUwNDVhMDhhNjNkIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MzAzZmM2OTAtNDczZC1hZjQxLTllYmItZWUwNDVhMDhhNjNkIiBzdEV2dDp3aGVuPSIyMDE3LTExLTMwVDEwOjA5OjE1KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphNGY2Zjg3NS1hMWEyLTIwNDItYjc1ZC0xYzE0NjBhMGIzNDQiIHN0RXZ0OndoZW49IjIwMTctMTEtMzBUMTA6MDk6MTUrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZWIwODM2ZC03NDVlLWVkNGMtOTE1NC0yOGNkYTM0NWI0MDk8L3JkZjpsaT4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6ODhkZDA4MzMtMmVkOC01ZjQxLWIwOTMtODNhNjBlOTUwZDEyPC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmFjZDIwNWU3LTE3Y2QtMDQ0NS1iNjY0LTI0OGE0ZjQwNzVjMzwvcmRmOmxpPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDplOTBlZTNkOC0zNmRkLWVlNDktYTE0ZC1mYmM4YzU5MTY1YTg8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7pMGAoAAAFUklEQVRYhe2XXYhdRx3AfzNzZs4599zP3WSz2zW1xtTmw42aVPSlVQqB9KUIIrRS8tiq6FsfxaAgvuqDSP1480F9sIKWCkEEa6GVBpKY3WJLQrIf6d6bvbl39969956PmfHh5qalK14Qiz7sDw6cj2Hmx3/m/Oc/wnvP/xPyfy3wQfaFprEvNI19oWnsC03Fe8+Hka0F6P/E478VIQWEk4cAos/BBQnxB9pJQPy7joJ/8e74LJw8AI8swAkN1TqUQrCRlCY3utsZpR0LKgWZKiXrzi3Wg+DgapIsZyrwrr2ln4YvLsKZLSjqUOlA4kHVwOWweq0y85dW1v9dnmY33z+4mExXIEXylBHffcLyjVrh45MKWnZs/NFAsPzwg7w+f5Sd2gyusBRSMrKOTAYEgUJ6qNiM2d4dguYmUWioVRqsFwXV9VWebG7QNzBbhpKClajO1dNn13/00ktf2iiKSxOP+0KLWp7524PizWHXkaXwRxVwsbHII5UKp0YdTkQ79Gt1WmGVIkqQWqO9w+QpEQXhoI/e7XOxfBRxfIn60imyKKa1ucmVt97mx5d+RTkb4QSUSqBHsPOZx/neW+2f/uzK8vP3AzMJ1acC/2Q1gb6DQAh+7heYOfMoN+bmuNps8c3li5xrr1HSgL93tYAMeBiw4JTgD7VPIhc+Qj2pEBlNuVplOHeQVw4f41v9yzR7sJtDkASY7k2eWzr+7C+vLn8HaE4WGQCfD+TjqfBIBSs6YnZhkdOLiyw1GsxjORINyeqSnYqiW4Z2zbB2/stsvvA1tgpoCchixQkGBHkGtgDvSZKExUaN6+XDqCCgUpFUKlCLHdXeOqfmwtJny/Kr71/14ymLfd2EAq1hFMXUGzNUymWUUlAUHAg9UoK1jiyDkUxwX/8+h779Ewb98fgOQcOlDEcpzjmUUiilMMYg4oRtq5AyQCmJFwplQtKNGyw99oXH9gglJamMgXIZZGQwYUQURWitCUODUoo8d1jrcQ6cdRStOwjA5pDnYIuCIBuAAGMMcRxTqVRoNBpEYcjACZRSSKkQQiCEpBJJzNGTyR6h3GKlFGgtCaQlHQ3JsmycNKWk8OOmYpJFPBRufOsA58AWHpumCCGRctzeOUeR56RFTuAKnHOAH393ltGhI7RevXhrj1B75NsCgVKSqs/p7WzT6/UoigKpAna9wjm454cQIEKDvdeJ8+At9HyAMRprLaPRiF6vR6fTYdjfpeYKiqIgzy1FnuGkIIoirty6/euJx/2/7M2hf8Pv+nOUBJ+Oc5qtLmvtDrHQ3BhK/p5qziowdhySfKdHfOE83SimHkPqQXlYq85TrtYItMY5h7OW7SznoZ0NlARrLcPReKsozT/Aq5ff3rrW2f3THqHXRv7l5iYXDs55DpQGnHeb/Oad65ze2uDs7rscUwPyHN4ZSnKpEc4jXvsHKofyEYG2HltAa6uDWr3JUMfkSDq9Piu3t3nx7go7AgoEWngOxJI3Nrv8Yn3rRbybaLyXGI0Q4VdC8YNnqzy3lPjkgQZkkSZKPCSaNfMQfw0Oczc5hChX8SYE73HWonCYYkh52MFtd7DdNrI6w8LcLNdvrfLxfosn0lvjXcxIkJJLHTn44ab47Z/vZi9sZL65J1OLe6vVCHHwE4Zjpyr+2Lk6j1aj4JDTkbqmGqPEBNXMum5fBNteGynw0golZrWYi4QoXe27FWHzXNxtiqfj7acup+b37V52+2OG+UEYzBRZIXad6F1J1esv33GvDLy7M4nM/Yrjwyg/tEA/U+d5I96rAKYx8RD7J9cp7AtNY19oGvtC09gXmsY/AdfPZ0Cl59ljAAAAAElFTkSuQmCC"},5344:function(e,t,i){"use strict";var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tw-template-wrapper"},[i("t-card-query",{attrs:{height:"300px"},scopedSlots:e._u([{key:"query",fn:function(){return[i("el-input",{directives:[{name:"show",rawName:"v-show",value:e.is_display,expression:"is_display"}],staticClass:"tw-panel__query-input",staticStyle:{width:"calc(100% - 38px)"},attrs:{placeholder:"请输入公司名称"},model:{value:e.companyName,callback:function(t){e.companyName=t},expression:"companyName"}}),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.is_display,expression:"is_display"}],attrs:{icon:"el-icon-search"}})]},proxy:!0}])},[i("el-tree",{ref:"tree",staticClass:"tw-tree",attrs:{data:e.companyList,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1),i("t-card-query",{attrs:{height:"calc(100% - 350px)"},scopedSlots:e._u([{key:"query",fn:function(){return[i("el-tooltip",{attrs:{content:e.queryPlaceholderList,placement:"top"}},[i("el-autocomplete",{staticClass:"tw-panel__query-input",staticStyle:{width:"calc(100% - 111px)",float:"left","margin-right":"-1px"},attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:e.queryPlaceholderInfo,"popper-class":"vehicleWidth"},on:{select:e.handleSelect},model:{value:e.vehicle,callback:function(t){e.vehicle=t},expression:"vehicle"}})],1),i("el-button",{attrs:{icon:"el-icon-search"}}),i("el-button",{attrs:{type:"primary",icon:"tw-icon-rotate el-icon-brush"},on:{click:e.handelClearSelectedVehicleClick}}),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.handelClearVehicleDataClick}})]},proxy:!0}])},[i("pl-table",{ref:"vehicleTableLeft",staticClass:"tw-table tw-table__towLines tw-item__click",attrs:{datas:e.vehicleList,"big-data-checkbox":"",size:"mini","header-drag-style":"","pagination-show":!1,"use-virtual":""},on:{"selection-change":e.changeVhic,"row-dblclick":e.tableDblick}},[e.ischeckbox?i("pl-table-column",{attrs:{type:"selection",align:"center",width:"55"}}):e._e(),i("pl-table-column",{staticStyle:{color:"black"},attrs:{prop:"SPEED","min-width":"120",align:"center",label:"车牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{class:["tw-radius",t.row.VEHI_DONOT]}),e._v("\n        "+e._s(t.row.VEHI_NO)+"\n        ")]}}])}),i("pl-table-column",{attrs:{prop:"SPEED",align:"center",label:"速度"}})],1)],1),i("div",{staticClass:"tw-list tw-vehicle-status"},[i("el-badge",{staticClass:"tw-list-item",attrs:{type:"info",value:e.vehicleTypeNum.lx,max:999}},[i("div",{staticClass:"tw-list-wrapper",on:{click:function(t){return e.statusSelection(1)}}},[i("t-icon",{staticClass:"tw-list-item__icon",attrs:{name:"icon-car"}}),i("span",[e._v("离线")])],1)]),i("el-badge",{staticClass:"tw-list-item",attrs:{type:"success",value:e.vehicleTypeNum.kc,max:999}},[i("div",{staticClass:"tw-list-wrapper",on:{click:function(t){return e.statusSelection(2)}}},[i("t-icon",{staticClass:"tw-list-item__icon",attrs:{name:"icon-car"}}),i("span",[e._v("空车")])],1)]),i("el-badge",{staticClass:"tw-list-item",attrs:{type:"danger",value:e.vehicleTypeNum.zc,max:999}},[i("div",{staticClass:"tw-list-wrapper",on:{click:function(t){return e.statusSelection(3)}}},[i("t-icon",{staticClass:"tw-list-item__icon",attrs:{name:"icon-car"}}),i("span",[e._v("重车")])],1)]),i("el-badge",{staticClass:"tw-list-item",attrs:{type:"warning",value:e.vehicleTypeNum.bj,max:999}},[i("div",{staticClass:"tw-list-wrapper",on:{click:function(t){return e.statusSelection(4)}}},[i("t-icon",{staticClass:"tw-list-item__icon",attrs:{name:"icon-car"}}),i("span",[e._v("报警")])],1)])],1)],1)},a=[],c=(i("ac6a"),i("0d6d"),i("0e08")),n=i("bc3a"),s=i.n(n),o=i("17fb"),r=i.n(o),h={name:"RealTimeMonitorVehiclePanel",data:function(){return{companyList:[],placeholderIndex:0,queryPlaceholder:["车牌号码","终端编号","SIM卡号"],vehicleList:[],companyName:"",vehicle:"",checkVehicleList:[],vehicleTypeNum:{lx:0,kc:0,zc:0,bj:0,lxlist:[],kclist:[],zclist:[],bjlist:[]},is_display:!1,loginType:"",columns:[{}]}},props:{vhic:Array,ischeckbox:{type:Boolean,defaule:!1}},mounted:function(){var e=this;setInterval(function(){return e.placeholderIndex++},3e3),this.companyList=[],this.vehicleList=[],this.handlegetCompTree()},computed:{queryPlaceholderInfo:function(){return"请输入"+this.queryPlaceholder[this.placeholderIndex%3]},queryPlaceholderList:function(){return"可输入"+this.queryPlaceholder.join("、")},selectedVehicleNumber:function(){return"车辆数：".concat(this.vehicleList.length,"辆")}},watch:{companyName:function(e){this.$refs.tree.filter(e)},checkVehicleList:function(e){this.$listeners["update:vhic"]&&this.$emit("update:vhic",e)},vhic:function(e){this.checkVehicleList=e},vehicleList:function(e){console.log(e)}},methods:{querySearchAsync:function(e,t){if(e.length<3)return t([]);this.getVehiList(e).then(function(e){t(e.data&&r.a.map(e.data,function(e){return{value:e.INFO,label:e.VEHI_NO}})||[])})},getVehiList:function(e){var t=new URLSearchParams;return t.append("vhic",e),s.a.post("map/getVhic",t,{baseURL:c["a"]})},handleSelect:function(e){var t=this,i=new URLSearchParams;i.append("type","1"),i.append("vhic",e.label),s.a.post("map/getOneVhic",i,{baseURL:c["a"]}).then(function(e){t.statisticalReset(),t.vehicleList=e.data,t.statisticalResults()})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handlegetCompTree:function(){var e=this,t=this.$cookies.get("loginType");this.loginType=t,"0"==t?(this.is_display=!0,s.a.get("map/getComp",{baseURL:c["a"]}).then(function(t){e.companyList=t.data||[]})):"1"==t&&s.a.get("map/getClzTree",{baseURL:c["a"]}).then(function(t){e.companyList=t.data||[]})},handleNodeClick:function(e){var t=this,i=new URLSearchParams;"0"==this.loginType?(i.append("id",e.value),s.a.post("map/getVhicList",i,{baseURL:c["a"]}).then(function(e){t.statisticalReset(),t.vehicleList=e.data,t.statisticalResults()})):"1"==this.loginType&&(console.log(e),i.append("cp",e.cp),s.a.post("map/getClzVhic",i,{baseURL:c["a"]}).then(function(e){t.statisticalReset(),t.vehicleList=Object.freeze(e.data),t.statisticalResults()}))},handelClearSelectedVehicleClick:function(){this.tableToggleSelection()},handelClearVehicleDataClick:function(){this.vehicleList=[]},tableToggleSelection:function(e){var t=this;console.log(this.$refs.vehicleTableLeft),e?e.forEach(function(e){t.$refs.vehicleTableLeft.$refs.singleTable.toggleRowSelection(e)}):this.$refs.vehicleTableLeft.$refs.singleTable.clearSelection()},changeVhic:function(e){this.ischeckbox&&(this.checkVehicleList=e)},tableDblick:function(e){this.ischeckbox||(this.checkVehicleList=[],this.checkVehicleList=[e])},statisticalResults:function(){var e=this;r.a.map(this.vehicleList,function(t){"tw-radius-offLine"==t.VEHI_DONOT?(e.vehicleTypeNum.lx++,e.vehicleTypeNum.lxlist.push(t)):"tw-radius-emptyCar"==t.VEHI_DONOT?(e.vehicleTypeNum.kc++,e.vehicleTypeNum.kclist.push(t)):"tw-radius-heavyCar"==t.VEHI_DONOT?(e.vehicleTypeNum.zc++,e.vehicleTypeNum.zclist.push(t)):"tw-radius-callPolice"==t.VEHI_DONOT&&(e.vehicleTypeNum.bj++,e.vehicleTypeNum.bjlist.push(t))})},statisticalReset:function(){this.vehicleTypeNum.lx=0,this.vehicleTypeNum.lxlist=[],this.vehicleTypeNum.kc=0,this.vehicleTypeNum.kclist=[],this.vehicleTypeNum.zc=0,this.vehicleTypeNum.zclist=[],this.vehicleTypeNum.bj=0,this.vehicleTypeNum.bjlist=[]},statusSelection:function(e){this.tableToggleSelection(),1!=e?2!=e?3!=e?4!=e||this.tableToggleSelection(this.vehicleTypeNum.bjlist):this.tableToggleSelection(this.vehicleTypeNum.zclist):this.tableToggleSelection(this.vehicleTypeNum.kclist):this.tableToggleSelection(this.vehicleTypeNum.lxlist)}}},d=h,u=(i("072e"),i("2877")),p=Object(u["a"])(d,l,a,!1,null,"59b2269d",null);t["a"]=p.exports},6017:function(e,t,i){(function(e,t){(function(e,i){"use strict";if(!e.setImmediate){var l,a=1,c={},n=!1,s=e.document,o=Object.getPrototypeOf&&Object.getPrototypeOf(e);o=o&&o.setTimeout?o:e,"[object process]"==={}.toString.call(e.process)?p():m()?v():e.MessageChannel?f():s&&"onreadystatechange"in s.createElement("script")?b():w(),o.setImmediate=r,o.clearImmediate=h}function r(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return c[a]=n,l(a),a++}function h(e){delete c[e]}function d(e){var t=e.callback,l=e.args;switch(l.length){case 0:t();break;case 1:t(l[0]);break;case 2:t(l[0],l[1]);break;case 3:t(l[0],l[1],l[2]);break;default:t.apply(i,l);break}}function u(e){if(n)setTimeout(u,0,e);else{var t=c[e];if(t){n=!0;try{d(t)}finally{h(e),n=!1}}}}function p(){l=function(e){t.nextTick(function(){u(e)})}}function m(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}function v(){var t="setImmediate$"+Math.random()+"$",i=function(i){i.source===e&&"string"===typeof i.data&&0===i.data.indexOf(t)&&u(+i.data.slice(t.length))};e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),l=function(i){e.postMessage(t+i,"*")}}function f(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;u(t)},l=function(t){e.port2.postMessage(t)}}function b(){var e=s.documentElement;l=function(t){var i=s.createElement("script");i.onreadystatechange=function(){u(t),i.onreadystatechange=null,e.removeChild(i),i=null},e.appendChild(i)}}function w(){l=function(e){setTimeout(u,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,i("c8ba"),i("f28c"))},"8eac":function(e,t,i){e.exports=i.p+"img/k3.288be509.png"},aac5:function(e,t,i){e.exports=i.p+"img/l3.e3702d79.png"},c545:function(e,t,i){}}]);
//# sourceMappingURL=chunk-3959e8e8.9f7d5b38.js.map