(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221bc8"],{cc2d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("t-query-panel",{attrs:{model:e.query,footer:"300"},scopedSlots:e._u([{key:"querybar",fn:function(){return[a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.query.startTime,callback:function(t){e.$set(e.query,"startTime",t)},expression:"query.startTime"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间"},model:{value:e.query.endTime,callback:function(t){e.$set(e.query,"endTime",t)},expression:"query.endTime"}})],1),a("el-form-item",[a("el-autocomplete",{attrs:{"prefix-icon":e.iconClassName("icon-car"),"fetch-suggestions":e.handleVehicleQuerySearch,"trigger-on-focus":!1,placeholder:"原车牌号码"},model:{value:e.query.vehicle,callback:function(t){e.$set(e.query,"vehicle",t)},expression:"query.vehicle"}})],1),a("el-form-item",[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"现车牌号码"},model:{value:e.query.new_vehicle,callback:function(t){e.$set(e.query,"new_vehicle",t)},expression:"query.new_vehicle"}},e._l(e.select.new_vehicle,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")])],1)]},proxy:!0}])},[a("t-table-page",{attrs:{data:e.table.data,loading:e.table.display,"page-size":20}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50",resizable:!1}}),a("el-table-column",{attrs:{prop:"OLD_VEHICLE_NO",label:"原车牌号码",width:"140",align:"center"}}),a("el-table-column",{attrs:{prop:"NEW_VEHICLE_NO",label:"现车牌号码",width:"280",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"COUNT",label:"变更次数",align:"center","min-width":"160",resizable:!1}})],1)],1)},i=[],l=a("c1df"),c=a.n(l),r=a("0e08"),o=a("bc3a"),s=a.n(o),u=a("17fb"),h=a.n(u),m={name:"ChangeStatistics",data:function(){return{query:{startTime:"",endTime:"",vehicle:"",new_vehicle:""},inputVehicle:{loading:!1,option:[]},table:{display:!1,data:[]},select:{vehicle:[],new_vehicle:[]}}},mounted:function(){this.query.startTime=new Date(c()().add("day",-1)),this.query.endTime=new Date,this.findChangeStatistics(),this.getVehicle(),this.getNewVehicle()},methods:{iconClassName:r["m"],handleVehicleQuerySearch:function(e,t){if(e.length<3)return t([]);t(h.a.filter(this.select.vehicle,function(t){return t.value.indexOf(e)>-1}))},getVehicle:function(){var e=this;s.a.get("common/vehicle",{baseURL:r["a"],params:{type:1}}).then(function(t){e.select.vehicle=h.a.map(t.data,function(e){return{value:e.VEHICLE_NO}})}).catch(function(e){})},getNewVehicle:function(){var e=this;s.a.get("common/newVehicle",{baseURL:r["a"],params:{}}).then(function(t){e.select.new_vehicle=h.a.map(t.data,function(e){return{label:e.VEHICLE_NO,value:e.VEHICLE_NO}})}).catch(function(e){})},findChangeStatistics:function(){var e=this,t=this.query,a=t.startTime,n=t.endTime,i=t.vehicle,l=t.new_vehicle;this.table.display=!0,s.a.get("letterManagement/findChangeStatistics",{baseURL:r["a"],params:{startTime:a&&c()(a).format("YYYY-MM-DD HH:mm:ss"),endTime:n&&c()(n).format("YYYY-MM-DD HH:mm:ss"),vehicle:i,new_vehicle:l}}).then(function(t){e.table.data=t.data||[],e.table.display=!1}).catch(function(e){})},handleQueryClick:function(){this.findChangeStatistics()},handleExportClick:function(){var e=this.query,t=e.startTime,a=e.endTime,n=e.vehicle,i=e.new_vehicle;this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){window.open("".concat(r["a"],"letterManagement/findChangeStatisticsExcel?startTime=").concat(t&&c()(t).format("YYYY-MM-DD HH:mm:ss"),"&endTime=").concat(a&&c()(a).format("YYYY-MM-DD HH:mm:ss"),"&vehicle=").concat(n,"&new_vehicle=").concat(i))}).catch(function(){})}}},d=m,f=a("2877"),p=Object(f["a"])(d,n,i,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d221bc8.6fe53080.js.map