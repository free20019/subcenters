(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-265a3899"],{"28a5":function(e,t,a){"use strict";var n=a("aae3"),l=a("cb7c"),i=a("ebd6"),o=a("0390"),r=a("9def"),s=a("5f1b"),c=a("520a"),d=a("79e5"),u=Math.min,f=[].push,p="split",m="length",g="lastIndex",h=4294967295,b=!d(function(){RegExp(h,"y")});a("214f")("split",2,function(e,t,a,d){var y;return y="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[m]||2!="ab"[p](/(?:ab)*/)[m]||4!="."[p](/(.?)(.?)/)[m]||"."[p](/()()/)[m]>1||""[p](/.?/)[m]?function(e,t){var l=String(this);if(void 0===e&&0===t)return[];if(!n(e))return a.call(l,e,t);var i,o,r,s=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,p=void 0===t?h:t>>>0,b=new RegExp(e.source,d+"g");while(i=c.call(b,l)){if(o=b[g],o>u&&(s.push(l.slice(u,i.index)),i[m]>1&&i.index<l[m]&&f.apply(s,i.slice(1)),r=i[0][m],u=o,s[m]>=p))break;b[g]===i.index&&b[g]++}return u===l[m]?!r&&b.test("")||s.push(""):s.push(l.slice(u)),s[m]>p?s.slice(0,p):s}:"0"[p](void 0,0)[m]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,n){var l=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,l,n):y.call(String(l),a,n)},function(e,t){var n=d(y,e,this,t,y!==a);if(n.done)return n.value;var c=l(e),f=String(this),p=i(c,RegExp),m=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(b?"y":"g"),v=new p(b?c:"^(?:"+c.source+")",g),w=void 0===t?h:t>>>0;if(0===w)return[];if(0===f.length)return null===s(v,f)?[f]:[];var x=0,_=0,E=[];while(_<f.length){v.lastIndex=b?_:0;var k,M=s(v,b?f:f.slice(_));if(null===M||(k=u(r(v.lastIndex+(b?0:_)),f.length))===x)_=o(f,_,m);else{if(E.push(f.slice(x,_)),E.length===w)return E;for(var C=1;C<=M.length-1;C++)if(E.push(M[C]),E.length===w)return E;_=x=k}}return E.push(f.slice(x)),E}]})},"2f14":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("t-query-panel",{attrs:{model:e.query,footer:"300"},scopedSlots:e._u([{key:"querybar",fn:function(){return[a("el-form-item",[a("el-input",{attrs:{placeholder:"Filter"},on:{input:function(t){return e.handleFilterClick()}},model:{value:e.query.filter,callback:function(t){e.$set(e.query,"filter",t)},expression:"query.filter"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleTableAddClick}},[e._v("添加")])],1)]},proxy:!0}])},[a("t-table-page",{attrs:{data:e.table.data,loading:e.table.display,"page-size":20}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50",resizable:!1}}),a("el-table-column",{attrs:{prop:"REAL_NAME",label:"姓名",align:"center",width:"240"}}),a("el-table-column",{attrs:{prop:"STATION_NAME",label:"页面权限",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"USER_NAME",label:"用户名",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"DATE_VIEW_TYPE",label:"数据权限","show-overflow-tooltip":!0,align:"center","min-width":"160",resizable:!1}}),a("el-table-column",{attrs:{resizable:!1,width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"text"},on:{click:function(a){return e.handleTableEditClick(t.row)}}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"text"},on:{click:function(a){return e.handleTableDeleteClick(t.row)}}})]}}])})],1),a("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.display,width:"700px"},on:{"update:visible":function(t){return e.$set(e.dialog,"display",t)},closed:e.handleDialogClosed}},[a("el-form",{ref:"form",attrs:{model:e.dialog.form,size:"small","label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"姓名"},model:{value:e.dialog.form.real_name,callback:function(t){e.$set(e.dialog.form,"real_name",t)},expression:"dialog.form.real_name"}})],1),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"用户名"},model:{value:e.dialog.form.username,callback:function(t){e.$set(e.dialog.form,"username",t)},expression:"dialog.form.username"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{type:"password",placeholder:"密码"},model:{value:e.dialog.form.password,callback:function(t){e.$set(e.dialog.form,"password",t)},expression:"dialog.form.password"}})],1),a("el-form-item",{attrs:{label:"岗位"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{clearable:"",placeholder:"岗位"},model:{value:e.dialog.form.station,callback:function(t){e.$set(e.dialog.form,"station",t)},expression:"dialog.form.station"}},e._l(e.select.station,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"数据权限"}},[[a("el-transfer",{staticClass:"tw-transfer-customize",attrs:{filterable:"",data:e.dialog.form.data,titles:["公司","所属公司"]},model:{value:e.dialog.form.company,callback:function(t){e.$set(e.dialog.form,"company",t)},expression:"dialog.form.company"}})]],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.display=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogSaveClick}},[e._v("提 交")])],1)],1)],1)},l=[],i=(a("28a5"),a("6b54"),a("0e08")),o=a("bc3a"),r=a.n(o),s=a("17fb"),c=a.n(s),d={name:"UserManage",data:function(){return{query:{filter:""},inputVehicle:{loading:!1,option:[]},table:{display:!1,selectItem:[],data:[],all:[]},select:{station:[]},dialog:{title:"",display:!1,form:{real_name:"",username:"",password:"",station:"",company:[],data:[]}}}},mounted:function(){this.findUserManage(),this.getCompany(),this.getStation()},methods:{iconClassName:i["m"],handleCompanyQuerySearch:function(e,t){t(c.a.filter(this.select.company,function(t){return t.value.indexOf(e)>-1}))},getCompany:function(){var e=this;r.a.get("common/userCompany",{baseURL:i["a"],params:{}}).then(function(t){e.dialog.form.data=c.a.map(t.data,function(e){return{key:e.COMP_NAME,value:e.COMP_NAME}})}).catch(function(e){console.log(e)})},getStation:function(){var e=this;r.a.get("common/station",{baseURL:i["a"],params:{}}).then(function(t){e.select.station=c.a.map(t.data,function(e){return{label:e.STATION_NAME,value:e.ID}})}).catch(function(e){console.log(e)})},findUserManage:function(){var e=this;this.table.display=!0;var t=this.query.filter;r.a.get("basicData/findUserManage",{baseURL:i["a"],params:{filter:t}}).then(function(t){e.table.data=t.data||[],e.table.all=t.data||[],e.table.display=!1}).catch(function(e){console.log(e)})},addUserManage:function(){var e=this,t=this.dialog.form,a=t.real_name,n=t.username,l=t.password,o=t.station,s=t.company;if(""===a||""===n||""===l||""===o||0===s.length)return this.$message.error("请填写完整信息！"),!1;var c=new URLSearchParams;c.append("real_name",a),c.append("username",n),c.append("password",l),c.append("station",o),c.append("company",s.toString()),r.a.post("basicData/addUserManage",c,{baseURL:i["a"]}).then(function(t){t.data>0?(e.$message({message:"操作成功!",type:"success"}),e.dialog.display=!1,e.findUserManage()):0===t.data?e.$message.error("操作失败！"):-1===t.data&&e.$message.error("该用户已添加！")}).catch(function(e){console.log(e)})},updateUserManage:function(){var e=this,t=this.dialog.form,a=t.real_name,n=t.username,l=t.password,o=t.station,s=t.company;if(""===a||""===n||""===l||""===o||0===s.length)return this.$message.error("请填写完整信息！"),!1;var c=new URLSearchParams;c.append("id",this.table.selectItem.ID),c.append("real_name",a),c.append("username",n),c.append("password",l),c.append("station",o),c.append("company",s.toString()),r.a.post("basicData/updateUserManage",c,{baseURL:i["a"]}).then(function(t){t.data>0?(e.$message({message:"操作成功!",type:"success"}),e.dialog.display=!1,e.findUserManage()):0===t.data?e.$message.error("操作失败！"):-1===t.data&&e.$message.error("该用户已添加！")}).catch(function(e){console.log(e)})},handleFilterClick:function(){var e=this.query.filter;this.table.data=c.a.filter(this.table.all,function(t){return t.REAL_NAME.indexOf(e)>-1||t.USER_NAME.indexOf(e)>-1||t.DATE_VIEW_TYPE.indexOf(e)>-1||t.STATION_NAME.indexOf(e)>-1})},handleTableAddClick:function(){this.dialog.title="添加",this.dialog.display=!0},handleTableEditClick:function(e){this.dialog.title="修改",this.dialog.display=!0,this.table.selectItem=e,this.dialog.form.real_name=e.REAL_NAME,this.dialog.form.username=e.USER_NAME,this.dialog.form.password=e.PASSWORD,this.dialog.form.station=e.STATION_ID,this.dialog.form.company=e.DATE_VIEW_TYPE.split(",")},handleTableDeleteClick:function(e){var t=this;this.$confirm("是否删除?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){r.a.get("basicData/deleteUserManage",{baseURL:i["a"],params:{id:e.ID}}).then(function(e){e.data>0?(t.$message({message:"操作成功!",type:"success"}),t.findUserManage()):t.$message.error("操作失败！")}).catch(function(e){console.log(e)})}).catch(function(){})},handleDialogSaveClick:function(){"修改"===this.dialog.title?this.updateUserManage():"添加"===this.dialog.title&&this.addUserManage()},handleDialogClosed:function(){this.dialog.title="",this.dialog.form.real_name="",this.dialog.form.username="",this.dialog.form.password="",this.dialog.form.station="",this.dialog.form.company=[],this.table.selectItem=[]},handleExportClick:function(){var e=this.query.filter;this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){window.open("".concat(i["a"],"basicData/findUserManageExcel?filter=").concat(e))}).catch(function(){})}}},u=d,f=a("2877"),p=Object(f["a"])(u,n,l,!1,null,null,null);t["default"]=p.exports},aae3:function(e,t,a){var n=a("d3f4"),l=a("2d95"),i=a("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==l(e))}}}]);
//# sourceMappingURL=chunk-265a3899.ef790f0c.js.map