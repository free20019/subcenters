(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-952bc2a6"],{"1ca0":function(t,a,e){},"880a":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"template-wrapper"},[e("div",{staticClass:"tw-map",attrs:{id:"gzzdwmap"}}),e("div",{staticClass:"tw-map-card tw-map-query-bar"},[e("div",{staticClass:"tw-map-query"},[e("el-input",{staticClass:"tw-searchFor",attrs:{placeholder:"请输入工作组名称"},model:{value:t.workGroupName,callback:function(a){t.workGroupName=a},expression:"workGroupName"}},[e("el-button",{staticClass:"tw-button--primary",attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),e("div",{staticClass:"tw-map-queryList"},[t._m(0),e("el-scrollbar",{staticClass:"tw-scrollbar tw-y tw-map-query-body"},t._l(t.filterWorkGroupList,function(a,n){return e("div",{key:a.id,staticClass:"tw-map-query-item",on:{click:function(e){t.handleWorkGroupItemClick(a)}}},[e("div",{staticClass:"tw-map-query-col col-id"},[t._v(t._s(n+1))]),e("div",{staticClass:"tw-map-query-col col-name"},[t._v(t._s(a.username))])])}),0)],1)])])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"tw-map-query-item tw-map-query-header"},[e("div",{staticClass:"tw-map-query-col col-id"},[t._v("序号")]),e("div",{staticClass:"tw-map-query-col col-name"},[t._v("工作组名称")])])}],r=(e("cadf"),e("551c"),e("097d"),e("17fb")),o=e.n(r),s=e("bc3a"),c=e.n(s),p=e("c1df"),l=e.n(p),u={name:"WorkgroupMonitoring",data:function(){return{workGroupName:"",workGroupList:[],gzzdwmap:null,infoWindow:new AMap.InfoWindow({offset:new AMap.Pixel(0,-30)})}},mounted:function(){var t=this;this.$nextTick(function(){t.getWorkGroupList(),t.gzzdwmap=new AMap.Map("gzzdwmap",{resizeEnable:!0,mapStyle:"amap://styles/fresh"})})},computed:{filterWorkGroupList:function(){var t=this.workGroupName;return o.a.filter(this.workGroupList,function(a){return a.username.indexOf(t)>=0})}},methods:{getWorkGroupList:function(){var t=this,a=this.baseURL;c.a.get("company/getgzz",{baseURL:a}).then(function(a){t.workGroupList=a.data;for(var e=0;e<a.data.length;e++)t.addmar(a.data[e]);t.gzzdwmap.setFitView()})},handleWorkGroupItemClick:function(t){var a=t.latitude,e=t.longitude,n=t.username;this.gzzdwmap.setZoomAndCenter(15,[e,a]);for(var i=this.gzzdwmap.getAllOverlays(),r=0;r<i.length;r++)i[r].hasOwnProperty("vehicle")&&i[r].vehicle.username.indexOf(n)>=0&&AMap.event.trigger(i[r],"click")},addmar:function(t){var a=this,e=new AMap.Marker({map:this.gzzdwmap,icon:"/img/gzz.png",position:new AMap.LngLat(t.longitude,t.latitude),offset:new AMap.Pixel(-8,-8),draggable:!1});e.vehicle=t;var n="<p>所属公司：".concat(t.company,"</p><p>工作组名：").concat(t.username,"</p><p>联系电话：").concat(t.phone,"</p><p>定位时间：").concat(l()(t.updatetime).format("YYYY-MM-DD HH:mm:ss"),"</p>"),i=new AMap.InfoWindow({offset:new AMap.Pixel(0,0),content:n});AMap.event.addListener(e,"click",function(e){i.open(a.gzzdwmap,new AMap.LngLat(t.longitude,t.latitude))}),AMap.event.addListener(this.gzzdwmap,"click",function(t){i.close()})}}},d=u,m=(e("fc5d"),e("2877")),w=Object(m["a"])(d,n,i,!1,null,"2dd9a9f2",null);w.options.__file="WorkgroupMonitoring.vue";a["default"]=w.exports},fc5d:function(t,a,e){"use strict";var n=e("1ca0"),i=e.n(n);i.a}}]);
//# sourceMappingURL=chunk-952bc2a6.70aa9f40.js.map