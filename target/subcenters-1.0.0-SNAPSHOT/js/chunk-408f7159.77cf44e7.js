(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-408f7159"],{"28a5":function(e,t,a){"use strict";var i=a("aae3"),n=a("cb7c"),o=a("ebd6"),l=a("0390"),s=a("9def"),r=a("5f1b"),c=a("520a"),d=a("79e5"),u=Math.min,f=[].push,p="split",h="length",g="lastIndex",m=4294967295,b=!d(function(){RegExp(m,"y")});a("214f")("split",2,function(e,t,a,d){var v;return v="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[h]||2!="ab"[p](/(?:ab)*/)[h]||4!="."[p](/(.?)(.?)/)[h]||"."[p](/()()/)[h]>1||""[p](/.?/)[h]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!i(e))return a.call(n,e,t);var o,l,s,r=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,p=void 0===t?m:t>>>0,b=new RegExp(e.source,d+"g");while(o=c.call(b,n)){if(l=b[g],l>u&&(r.push(n.slice(u,o.index)),o[h]>1&&o.index<n[h]&&f.apply(r,o.slice(1)),s=o[0][h],u=l,r[h]>=p))break;b[g]===o.index&&b[g]++}return u===n[h]?!s&&b.test("")||r.push(""):r.push(n.slice(u)),r[h]>p?r.slice(0,p):r}:"0"[p](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,i){var n=e(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,n,i):v.call(String(n),a,i)},function(e,t){var i=d(v,e,this,t,v!==a);if(i.done)return i.value;var c=n(e),f=String(this),p=o(c,RegExp),h=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(b?"y":"g"),w=new p(b?c:"^(?:"+c.source+")",g),y=void 0===t?m:t>>>0;if(0===y)return[];if(0===f.length)return null===r(w,f)?[f]:[];var _=0,k=0,x=[];while(k<f.length){w.lastIndex=b?k:0;var M,E=r(w,b?f:f.slice(k));if(null===E||(M=u(s(w.lastIndex+(b?0:k)),f.length))===_)k=l(f,k,h);else{if(x.push(f.slice(_,k)),x.length===y)return x;for(var C=1;C<=E.length-1;C++)if(x.push(E[C]),x.length===y)return x;k=_=M}}return x.push(f.slice(_)),x}]})},"691e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("t-query-panel",{attrs:{model:e.query,footer:"300"},scopedSlots:e._u([{key:"querybar",fn:function(){return[a("el-form-item",[a("el-input",{attrs:{placeholder:"岗位"},model:{value:e.query.station,callback:function(t){e.$set(e.query,"station",t)},expression:"query.station"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleTableAddClick}},[e._v("添加")])],1)]},proxy:!0}])},[a("t-table-page",{attrs:{data:e.table.data,loading:e.table.display,"page-size":20}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50",resizable:!1}}),a("el-table-column",{attrs:{prop:"STATION_NAME",label:"岗位名",align:"center",width:"240"}}),a("el-table-column",{attrs:{prop:"STATION_JURI",label:"岗位权限","show-overflow-tooltip":!0,align:"center","min-width":"160",resizable:!1}}),a("el-table-column",{attrs:{resizable:!1,width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"text"},on:{click:function(a){return e.handleTableEditClick(t.row)}}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"text"},on:{click:function(a){return e.handleTableDeleteClick(t.row)}}})]}}])})],1),a("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.display,width:"800px"},on:{"update:visible":function(t){return e.$set(e.dialog,"display",t)},closed:e.handleDialogClosed}},[a("el-form",{ref:"form",attrs:{model:e.dialog.form,size:"small","label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"岗位"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"岗位"},model:{value:e.dialog.form.station,callback:function(t){e.$set(e.dialog.form,"station",t)},expression:"dialog.form.station"}})],1),a("el-form-item",{attrs:{label:"页面权限"}},[e._l(e.select.module,function(t){return a("div",[a("span",[e._v(e._s(t))]),a("el-checkbox-group",{staticStyle:{position:"left"},model:{value:e.dialog.form.power_names,callback:function(t){e.$set(e.dialog.form,"power_names",t)},expression:"dialog.form.power_names"}},e._l(e.select.power,function(i){return i.MODULE===t?a("el-checkbox",{key:i.POWER,attrs:{label:i.POWER}},[e._v(e._s(i.POWER))]):e._e()}),1)],1)})],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.display=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogSaveClick}},[e._v("提 交")])],1)],1)],1)},n=[],o=(a("28a5"),a("6b54"),a("c1df"),a("0e08")),l=a("bc3a"),s=a.n(l),r=a("17fb"),c=a.n(r),d={name:"JobManage",data:function(){return{query:{station:""},inputVehicle:{loading:!1,option:[]},table:{display:!1,selectItem:[],data:[]},select:{power:[],module:[]},dialog:{title:"",display:!1,form:{station:"",power_names:[],power_ids:[]}}}},mounted:function(){this.findJobManage(),this.getPower()},methods:{iconClassName:o["m"],getPower:function(){var e=this;s.a.get("common/power",{baseURL:o["a"],params:{}}).then(function(t){e.select.power=t.data||[],e.select.module=[];var a=e.select.module;c.a.each(t.data,function(e){-1===a.indexOf(e.MODULE)&&a.push(e.MODULE)})}).catch(function(e){})},findJobManage:function(){var e=this,t=this.query.station;this.table.display=!0,s.a.get("basicData/findJobManage",{baseURL:o["a"],params:{station:t}}).then(function(t){console.log(t.data),e.table.data=t.data||[],e.table.display=!1}).catch(function(e){})},addJobManage:function(){var e=this;this.dialog.form.power_ids=[];var t=this.dialog.form,a=t.station,i=t.power_names,n=t.power_ids;if(c.a.each(i,function(t){c.a.each(e.select.power,function(e){t===e.POWER&&n.push(e.POWER_ID)})}),""===a||0===i.length||0===n.length)return this.$message.error("请填写完整信息！"),!1;s.a.get("basicData/addJobManage",{baseURL:o["a"],params:{station:a,power_ids:n.toString(),power_names:i.toString()}}).then(function(t){t.data>0?(e.$message({message:"操作成功!",type:"success"}),e.dialog.display=!1,e.findJobManage()):0===t.data?e.$message.error("操作失败！"):-1===t.data&&e.$message.error("该用户已添加！")}).catch(function(e){})},updateJobManage:function(){var e=this;this.dialog.form.power_ids=[];var t=this.dialog.form,a=t.station,i=t.power_names,n=t.power_ids;if(c.a.each(i,function(t){c.a.each(e.select.power,function(e){t===e.POWER&&n.push(e.POWER_ID)})}),""===a||0===i.length||0===n.length)return this.$message.error("请填写完整信息！"),!1;s.a.get("basicData/updateJobManage",{baseURL:o["a"],params:{id:this.table.selectItem.ID,station:a,power_ids:n.toString(),power_names:i.toString()}}).then(function(t){t.data>0?(e.$message({message:"操作成功!",type:"success"}),e.dialog.display=!1,e.findJobManage()):0===t.data?e.$message.error("操作失败！"):-1===t.data&&e.$message.error("该用户已添加！")}).catch(function(e){})},handleQueryClick:function(){this.findJobManage()},handleTableAddClick:function(){this.dialog.title="添加",this.dialog.display=!0},handleTableEditClick:function(e){this.dialog.title="修改",this.dialog.display=!0,this.table.selectItem=e,this.dialog.form.station=e.STATION_NAME,this.dialog.form.power_names=e.STATION_JURI.split(","),this.dialog.form.power_ids=e.POWER_IDS.split(",")},handleTableDeleteClick:function(e){var t=this;this.$confirm("是否删除?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){s.a.get("basicData/deleteJobManage",{baseURL:o["a"],params:{id:e.ID}}).then(function(e){e.data>0?(t.$message({message:"操作成功!",type:"success"}),t.findJobManage()):0===e.data?t.$message.error("操作失败！"):-1===e.data&&t.$message.error("该岗位正在使用！")}).catch(function(e){})}).catch(function(){})},handleDialogSaveClick:function(){"修改"===this.dialog.title?this.updateJobManage():"添加"===this.dialog.title&&this.addJobManage()},handleDialogClosed:function(){this.dialog.title="",this.dialog.form.station="",this.dialog.form.power_names=[],this.dialog.form.power_ids=[],this.table.selectItem=[]},handleExportClick:function(){var e=this.query.station;this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){window.open("".concat(o["a"],"basicData/findJobManageExcel?station=").concat(e))}).catch(function(){})}}},u=d,f=a("2877"),p=Object(f["a"])(u,i,n,!1,null,null,null);t["default"]=p.exports},aae3:function(e,t,a){var i=a("d3f4"),n=a("2d95"),o=a("2b4c")("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==n(e))}}}]);
//# sourceMappingURL=chunk-408f7159.77cf44e7.js.map