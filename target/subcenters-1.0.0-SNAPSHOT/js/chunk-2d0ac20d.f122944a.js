(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac20d"],{"17e6":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("t-query-panel",{attrs:{model:e.query,footer:"300"},scopedSlots:e._u([{key:"querybar",fn:function(){return[l("el-form-item",[l("el-date-picker",{attrs:{type:"month",placeholder:"时间"},model:{value:e.query.time,callback:function(t){e.$set(e.query,"time",t)},expression:"query.time"}})],1),l("el-form-item",[l("el-autocomplete",{attrs:{"prefix-icon":e.iconClassName("icon-car"),"fetch-suggestions":e.handleCompanyQuerySearch,"trigger-on-focus":!1,placeholder:"公司名称"},model:{value:e.query.company,callback:function(t){e.$set(e.query,"company",t)},expression:"query.company"}})],1),l("el-form-item",["1"===e.loginType?l("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择车辆组"},model:{value:e.query.vehicleGroupId,callback:function(t){e.$set(e.query,"vehicleGroupId",t)},expression:"query.vehicleGroupId"}},e._l(e.select.vehicleGroup,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e()],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")]),l("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")])],1)]},proxy:!0}])},[l("t-table-page",{attrs:{data:e.table.data,loading:e.table.display,"page-size":31}},[l("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50",resizable:!1}}),l("el-table-column",{attrs:{prop:"REPORT_TIME",label:"日期",align:"center",width:"80"}}),l("el-table-column",{attrs:{prop:"REPORE_VHICNO",label:"总车辆数",align:"center",width:"100"}}),l("el-table-column",{attrs:{prop:"REPORE_VHIC",label:"参与营运车辆数",align:"center",width:"120"}}),l("el-table-column",{attrs:{prop:"REPORE_RUN_RATE",label:"出车率",align:"center",width:"80"}}),l("el-table-column",{attrs:{prop:"REPORE_NO",label:"周转总次数",align:"center",width:"120"}}),l("el-table-column",{attrs:{prop:"REPORE_TURNOVER",label:"平均周转次数",align:"center",width:"120"}}),l("el-table-column",{attrs:{prop:"REPORE_AMOUNT_REVENUE",label:"平均营收金额",align:"center",width:"120"}}),l("el-table-column",{attrs:{prop:"REPORE_ACTUAL_LOADING",label:"平均实载率",align:"center",width:"100"}}),l("el-table-column",{attrs:{prop:"REPORE_CAR_TIME",label:"平均出车时间(时)",align:"center",width:"120"}}),l("el-table-column",{attrs:{prop:"REPROE_REVENUE_TIME",label:"平均重车时间(时)",align:"center",width:"120"}}),l("el-table-column",{attrs:{prop:"REPORE_WAIT_TIME",label:"平均等候时间(时)",align:"center",width:"120"}}),l("el-table-column",{attrs:{prop:"REPORE_MILEAGE",label:"平均总里程(公里)",align:"center",width:"120"}}),l("el-table-column",{attrs:{prop:"REPORE_ACTUAL_MILEAGE",label:"平均实载里程(公里)",align:"center",width:"140"}}),l("el-table-column",{attrs:{prop:"REPORE_EMPTY_MILEAGE",label:"平均空驶里程(公里)",align:"center","min-width":"140",resizable:!1}})],1)],1)},n=[],r=l("c1df"),o=l.n(r),i=l("0e08"),c=l("bc3a"),u=l.n(c),p=l("17fb"),s=l.n(p),h={name:"OperatingMonthlyReport",data:function(){return{loginType:"",query:{time:"",company:"",vehicleGroupId:""},inputVehicle:{loading:!1,option:[]},table:{display:!1,data:[]},select:{company:[],vehicleGroup:[]}}},mounted:function(){this.query.time=new Date,this.loginType=this.$cookies.get("loginType"),this.getVehicleGroup(),this.findOperatingMonthlyReport(),this.getCompany()},methods:{iconClassName:i["m"],getVehicleGroup:function(){var e=this;if("1"!==this.loginType)return null;u.a.get("common/vehicleGroup",{baseURL:i["a"],params:{userId:this.$cookies.get("userId")}}).then(function(t){e.select.vehicleGroup=s.a.map(t.data,function(e){return{value:e.CLZS,label:e.CLZ_NAME}})}).catch(function(e){})},handleCompanyQuerySearch:function(e,t){t(s.a.filter(this.select.company,function(t){return t.value.indexOf(e)>-1}))},getCompany:function(){var e=this;u.a.get("common/company",{baseURL:i["a"],params:{}}).then(function(t){e.select.company=s.a.map(t.data,function(e){return{value:e.COMPANY_NAME}})}).catch(function(e){})},findOperatingMonthlyReport:function(){var e=this,t=this.query,l=t.time,a=t.company,n=t.vehicleGroupId;if(!l)return this.$message.error("请选择时间！");this.table.display=!0,u.a.get("queryAnalysis/findOperatingMonthlyReport",{baseURL:i["a"],params:{time:l&&o()(l).format("YYYY-MM"),company:a,vehicleGroupId:n}}).then(function(t){e.table.data=t.data||[],e.table.display=!1}).catch(function(e){})},handleQueryClick:function(){this.findOperatingMonthlyReport()},handleExportClick:function(){var e=this.query,t=e.time,l=e.company,a=e.vehicleGroupId;if(!t)return this.$message.error("请选择时间！");this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){window.open("".concat(i["a"],"queryAnalysis/findOperatingMonthlyReportExcel?time=").concat(t&&o()(t).format("YYYY-MM"),"&company=").concat(l,"&vehicleGroupId=").concat(a))}).catch(function(){})}}},m=h,d=l("2877"),y=Object(d["a"])(m,a,n,!1,null,null,null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0ac20d.f122944a.js.map