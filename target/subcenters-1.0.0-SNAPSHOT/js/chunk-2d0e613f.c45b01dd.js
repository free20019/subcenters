(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e613f"],{"96e1":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("t-query-panel",{attrs:{model:e.query,footer:"300"},scopedSlots:e._u([{key:"querybar",fn:function(){return[a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.query.startTime,callback:function(t){e.$set(e.query,"startTime",t)},expression:"query.startTime"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间"},model:{value:e.query.endTime,callback:function(t){e.$set(e.query,"endTime",t)},expression:"query.endTime"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"区域"},model:{value:e.query.area,callback:function(t){e.$set(e.query,"area",t)},expression:"query.area"}},e._l(e.getArea,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-autocomplete",{attrs:{"prefix-icon":e.iconClassName("icon-car"),"fetch-suggestions":e.handleCompanyQuerySearch,"trigger-on-focus":!1,placeholder:"公司名称"},model:{value:e.query.company,callback:function(t){e.$set(e.query,"company",t)},expression:"query.company"}})],1),a("el-form-item",[a("el-autocomplete",{attrs:{"prefix-icon":e.iconClassName("icon-car"),"fetch-suggestions":e.handleVehicleQuerySearch,"trigger-on-focus":!1,placeholder:"车牌号码"},model:{value:e.query.vehicle,callback:function(t){e.$set(e.query,"vehicle",t)},expression:"query.vehicle"}})],1),a("el-form-item",["1"===e.loginType?a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择车辆组"},model:{value:e.query.vehicleGroupId,callback:function(t){e.$set(e.query,"vehicleGroupId",t)},expression:"query.vehicleGroupId"}},e._l(e.select.vehicleGroup,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e()],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")])],1)]},proxy:!0}])},[a("t-table-page",{attrs:{data:e.table.data,loading:e.table.display,"page-total":e.table.total,"page-size":e.table.pageSize,"real-time-page":e.table.currentPage,sumText:e.table.total.toString()},on:{"update:realTimePage":function(t){return e.$set(e.table,"currentPage",t)},"update:real-time-page":function(t){return e.$set(e.table,"currentPage",t)},"current-change":e.handlePaginationCurrentChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50",resizable:!1}}),a("el-table-column",{attrs:{prop:"gsmc",label:"公司名称",align:"center",width:"260"}}),a("el-table-column",{attrs:{prop:"cphm",label:"车牌号码",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"area",label:"区域",align:"center",width:"240"}}),a("el-table-column",{attrs:{prop:"simk",label:"SIM卡号",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"chez",label:"车主",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"sjhm",label:"手机号码",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"wxlx",label:"维修类型",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"gzlx",label:"故障类型",align:"center",width:"280"}}),a("el-table-column",{attrs:{prop:"wxrxm",label:"维修人姓名",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"wxqk",label:"维修情况",align:"center",width:"240"}}),a("el-table-column",{attrs:{prop:"wxdd",label:"维修地点",align:"center",width:"280"}}),a("el-table-column",{attrs:{prop:"wxfy",label:"维修费用",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"wxjd",label:"维修进度",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"wxjg",label:"维修结果",align:"center",width:"240"}}),a("el-table-column",{attrs:{prop:"sxsj",label:"送修时间",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"wxsj",label:"完修时间",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"ghao",label:"工号",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"khmyd",label:"客户满意度",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"beiz",label:"备注",align:"center","min-width":"320",resizable:!1}})],1)],1)},n=[],r=a("c1df"),i=a.n(r),c=a("0e08"),o=a("bc3a"),u=a.n(o),s=a("17fb"),p=a.n(s),m={name:"MaintenanceRecordInquiry",data:function(){return{loginType:"",query:{startTime:"",endTime:"",area:"",company:"",vehicle:"",vehicleGroupId:""},inputVehicle:{loading:!1,option:[]},table:{display:!1,data:[],pageSize:20,currentPage:1,total:0},select:{vehicle:[],company:[],vehicleGroup:[]},getArea:[{label:"全部区域",value:""},{label:"主城区",value:"主城区"},{label:"余杭区",value:"余杭区"},{label:"萧山区",value:"萧山区"},{label:"临安区",value:"临安区"},{label:"富阳区",value:"富阳区"},{label:"淳安区",value:"淳安区"},{label:"建德市",value:"建德市"}]}},mounted:function(){this.query.startTime=new Date(i()().add("day",-1)),this.query.endTime=new Date,this.loginType=this.$cookies.get("loginType"),this.getVehicleGroup(),this.findMaintenanceRecord(),this.getVehicle(),this.getCompany()},methods:{iconClassName:c["m"],getVehicleGroup:function(){var e=this;if("1"!==this.loginType)return null;u.a.get("common/vehicleGroup",{baseURL:c["a"],params:{userId:this.$cookies.get("userId")}}).then(function(t){e.select.vehicleGroup=p.a.map(t.data,function(e){return{value:e.CLZS,label:e.CLZ_NAME}})}).catch(function(e){})},handleVehicleQuerySearch:function(e,t){if(e.length<3)return t([]);t(p.a.filter(this.select.vehicle,function(t){return t.value.indexOf(e)>-1}))},handleCompanyQuerySearch:function(e,t){t(p.a.filter(this.select.company,function(t){return t.value.indexOf(e)>-1}))},getVehicle:function(){var e=this;u.a.get("common/vehicle",{baseURL:c["a"],params:{}}).then(function(t){e.select.vehicle=p.a.map(t.data,function(e){return{value:e.VEHICLE_NO}})}).catch(function(e){})},getCompany:function(){var e=this;u.a.get("common/company",{baseURL:c["a"],params:{}}).then(function(t){e.select.company=p.a.map(t.data,function(e){return{value:e.COMPANY_NAME}})}).catch(function(e){})},findMaintenanceRecord:function(){var e=this,t=this.query,a=t.startTime,l=t.endTime,n=t.area,r=t.company,o=t.vehicle,s=t.vehicleGroupId,m=this.table,h=m.pageSize,d=m.currentPage;this.table.display=!0,u.a.get("queryAnalysis/findMaintenanceRecord",{baseURL:c["a"],params:{startTime:a&&i()(a).format("YYYY-MM-DD HH:mm:ss"),endTime:l&&i()(l).format("YYYY-MM-DD HH:mm:ss"),area:n,company:r,vehicle:o,vehicleGroupId:s,pageSize:h,currentPage:d}}).then(function(t){e.table.data=p.a.map(t.data.datas,function(e){return{id:e.RR_ID,gsmc:e.COMP_NAME,cphm:e.VEHI_NO,area:e.AREA_NAME,simk:e.VEHI_SIM,chez:e.OWN_NAME,sjhm:e.HOME_TEL,wxlx:e.RT_TYPE,gzlx:e.GZLX,wxrxm:e.REAL_NAME,wxqk:e.RM_MALFUNCTION,wxdd:e.RA_ADDR,wxfy:e.RR_COST,wxjd:e.WXJD,wxjg:e.RC_CONTENT,sxsj:e.STIME,wxsj:e.ETIME,ghao:e.GHAO,khmyd:e.HFJG,beiz:e.JFYY}}),e.table.total=parseInt(t.data.count)||0,e.table.display=!1}).catch(function(e){})},handleQueryClick:function(){this.table.currentPage=1,this.findMaintenanceRecord()},handlePaginationCurrentChange:function(e){var t=e.currentPage;e.pageSize;this.table.currentPage=t,this.findMaintenanceRecord()},handleExportClick:function(){var e=this.query,t=e.startTime,a=e.endTime,l=e.area,n=e.company,r=e.vehicle,o=e.vehicleGroupId;this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){window.open("".concat(c["a"],"queryAnalysis/findMaintenanceRecordExcel?startTime=").concat(t&&i()(t).format("YYYY-MM-DD HH:mm:ss"),"&endTime=").concat(a&&i()(a).format("YYYY-MM-DD HH:mm:ss"),"&area=").concat(l,"&company=").concat(n,"&vehicle=").concat(r,"&vehicleGroupId=").concat(o,"&pageSize=",1e7,"&currentPage=",1))}).catch(function(){})}}},h=m,d=a("2877"),b=Object(d["a"])(h,l,n,!1,null,null,null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d0e613f.c45b01dd.js.map