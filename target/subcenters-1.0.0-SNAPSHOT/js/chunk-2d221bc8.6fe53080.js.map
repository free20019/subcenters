{"version":3,"sources":["webpack:///./src/views/mail-manage/ChangeStatistics.vue?d532","webpack:///src/views/mail-manage/ChangeStatistics.vue","webpack:///./src/views/mail-manage/ChangeStatistics.vue?c451","webpack:///./src/views/mail-manage/ChangeStatistics.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","query","scopedSlots","_u","key","fn","model","value","callback","$$v","$set","expression","iconClassName","handleVehicleQuerySearch","_l","select","item","label","on","handleQueryClick","_v","handleExportClick","proxy","table","data","display","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d221bc8.6fe53080.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('t-query-panel',{attrs:{\"model\":_vm.query,\"footer\":\"300\"},scopedSlots:_vm._u([{key:\"querybar\",fn:function(){return [_c('el-form-item',[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"开始时间\"},model:{value:(_vm.query.startTime),callback:function ($$v) {_vm.$set(_vm.query, \"startTime\", $$v)},expression:\"query.startTime\"}})],1),_c('el-form-item',[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"结束时间\"},model:{value:(_vm.query.endTime),callback:function ($$v) {_vm.$set(_vm.query, \"endTime\", $$v)},expression:\"query.endTime\"}})],1),_c('el-form-item',[_c('el-autocomplete',{attrs:{\"prefix-icon\":_vm.iconClassName('icon-car'),\"fetch-suggestions\":_vm.handleVehicleQuerySearch,\"trigger-on-focus\":false,\"placeholder\":\"原车牌号码\"},model:{value:(_vm.query.vehicle),callback:function ($$v) {_vm.$set(_vm.query, \"vehicle\", $$v)},expression:\"query.vehicle\"}})],1),_c('el-form-item',[_c('el-select',{attrs:{\"clearable\":\"\",\"filterable\":\"\",\"placeholder\":\"现车牌号码\"},model:{value:(_vm.query.new_vehicle),callback:function ($$v) {_vm.$set(_vm.query, \"new_vehicle\", $$v)},expression:\"query.new_vehicle\"}},_vm._l((_vm.select.new_vehicle),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleQueryClick}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleExportClick}},[_vm._v(\"导出\")])],1)]},proxy:true}])},[_c('t-table-page',{attrs:{\"data\":_vm.table.data,\"loading\":_vm.table.display,\"page-size\":20}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"align\":\"center\",\"width\":\"50\",\"resizable\":false}}),_c('el-table-column',{attrs:{\"prop\":\"OLD_VEHICLE_NO\",\"label\":\"原车牌号码\",\"width\":\"140\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"NEW_VEHICLE_NO\",\"label\":\"现车牌号码\",\"width\":\"280\",\"align\":\"center\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"COUNT\",\"label\":\"变更次数\",\"align\":\"center\",\"min-width\":\"160\",\"resizable\":false}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 变更统计 -->\n<template>\n  <t-query-panel :model=\"query\" footer=\"300\">\n    <template v-slot:querybar>\n      <el-form-item>\n        <el-date-picker v-model=\"query.startTime\" type=\"datetime\" placeholder=\"开始时间\"></el-date-picker>\n      </el-form-item>\n      <el-form-item>\n        <el-date-picker v-model=\"query.endTime\" type=\"datetime\" placeholder=\"结束时间\"></el-date-picker>\n      </el-form-item>\n      <el-form-item>\n        <el-autocomplete\n          v-model=\"query.vehicle\"\n          :prefix-icon=\"iconClassName('icon-car')\"\n          :fetch-suggestions=\"handleVehicleQuerySearch\"\n          :trigger-on-focus=\"false\"\n          placeholder=\"原车牌号码\"\n        ></el-autocomplete>\n      </el-form-item>\n      <el-form-item>\n        <el-select v-model=\"query.new_vehicle\"  clearable filterable placeholder=\"现车牌号码\">\n          <el-option\n            v-for=\"item in select.new_vehicle\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\">\n          </el-option>\n        </el-select>\n        <!--<el-autocomplete-->\n        <!--v-model=\"query.new_vehicle\"-->\n        <!--:prefix-icon=\"iconClassName('icon-car')\"-->\n        <!--:fetch-suggestions=\"handleNewVehicleQuerySearch\"-->\n        <!--:trigger-on-focus=\"false\"-->\n        <!--placeholder=\"新车牌号码\"-->\n        <!--&gt;</el-autocomplete>-->\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"handleQueryClick\">查询</el-button>\n        <el-button type=\"primary\" @click=\"handleExportClick\">导出</el-button>\n      </el-form-item>\n    </template>\n    <t-table-page :data=\"table.data\" :loading=\"table.display\" :page-size=\"20\">\n      <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"50\" :resizable=\"false\"></el-table-column>\n      <el-table-column prop=\"OLD_VEHICLE_NO\" label=\"原车牌号码\" width=\"140\" align=\"center\"></el-table-column>\n      <el-table-column prop=\"NEW_VEHICLE_NO\" label=\"现车牌号码\" width=\"280\" align=\"center\" show-overflow-tooltip></el-table-column>\n      <el-table-column prop=\"COUNT\" label=\"变更次数\" align=\"center\"  min-width=\"160\" :resizable=\"false\"></el-table-column>\n    </t-table-page>\n  </t-query-panel>\n</template>\n\n<script>\n  import moment from 'moment'\n  import { iconClassName ,baseURL} from 'util'\n  import axios from 'axios'\n  import _ from 'underscore'\n  export default {\n    name: 'ChangeStatistics',\n    data() {\n      return {\n        query: {\n          startTime: '',\n          endTime: '',\n          vehicle: '',\n          new_vehicle: ''\n        },\n        inputVehicle: {\n          loading: false,\n          option: []\n        },\n        table: {\n          display: false,\n          data: []\n        },\n        select:{\n          vehicle: [],\n          new_vehicle: []\n        }\n      }\n    },\n    mounted() {\n      this.query.startTime = new Date(moment().add('day', -1));\n      this.query.endTime = new Date();\n      this.findChangeStatistics();\n      this.getVehicle();\n      this.getNewVehicle();\n    },\n    methods: {\n      iconClassName,\n      handleVehicleQuerySearch(query, cb) {\n        if (query.length < 3) return cb([])\n        cb(_.filter(this.select.vehicle, item => item.value.indexOf(query) > -1))\n      },\n      // handleNewVehicleQuerySearch(query, cb) {\n      //   if (query.length < 3) return cb([])\n      //   cb(_.filter(this.select.new_vehicle, item => item.value.indexOf(query) > -1))\n      // },\n      getVehicle(){\n        axios.get('common/vehicle', {\n          baseURL,\n          params: {\n            type:1\n          }\n        }).then(res=> {\n          this.select.vehicle = _.map(res.data, item => {\n            return {\n              value: item.VEHICLE_NO\n            }\n          });\n        }).catch(function (error) {\n        });\n      },\n      getNewVehicle(){\n        axios.get('common/newVehicle', {\n          baseURL,\n          params: {}\n        }).then(res=> {\n          this.select.new_vehicle = _.map(res.data, item => {\n            return {\n              label: item.VEHICLE_NO,\n              value: item.VEHICLE_NO\n            }\n          });\n        }).catch(function (error) {\n        });\n      },\n      findChangeStatistics() {\n        const {startTime, endTime, vehicle, new_vehicle} = this.query;\n        this.table.display = true;\n        axios.get('letterManagement/findChangeStatistics', {\n          baseURL,\n          params: {\n            startTime: startTime && moment(startTime).format('YYYY-MM-DD HH:mm:ss'),\n            endTime: endTime && moment(endTime).format('YYYY-MM-DD HH:mm:ss'),\n            vehicle,\n            new_vehicle\n          }\n        }).then(res=> {\n          this.table.data = res.data||[];\n          this.table.display = false;\n        }).catch(function (error) {\n        });\n      },\n      /*事件*/\n      handleQueryClick() {\n        this.findChangeStatistics();\n      },\n      handleExportClick() {\n        const {startTime, endTime, vehicle, new_vehicle} = this.query;\n        this.$confirm('是否需要导出?', '提示', {\n          confirmButtonText: '是',\n          cancelButtonText: '否',\n          cancelButtonClass: 'el-button--danger',\n          closeOnClickModal: false,\n          type: 'info',\n          center: true\n        }).then(() => {\n          window.open(`${baseURL}letterManagement/findChangeStatisticsExcel?startTime=${startTime && moment(startTime).format('YYYY-MM-DD HH:mm:ss')}&endTime=${endTime && moment(endTime).format('YYYY-MM-DD HH:mm:ss')}&vehicle=${vehicle}&new_vehicle=${new_vehicle}`);\n        }).catch(() => {\n        });\n      }\n    }\n  }\n</script>\n\n\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChangeStatistics.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChangeStatistics.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChangeStatistics.vue?vue&type=template&id=fe3a877c&\"\nimport script from \"./ChangeStatistics.vue?vue&type=script&lang=js&\"\nexport * from \"./ChangeStatistics.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}