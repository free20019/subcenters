(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2095ca"],{a973:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("t-query-panel",{attrs:{model:e.query,footer:"300"},scopedSlots:e._u([{key:"querybar",fn:function(){return[a("el-form-item",[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"车辆组"},model:{value:e.query.group,callback:function(t){e.$set(e.query,"group",t)},expression:"query.group"}},e._l(e.select.group,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleTableAddClick}},[e._v("添加")])],1)]},proxy:!0}])},[a("t-table-page",{attrs:{data:e.table.data,loading:e.table.display,"page-size":20}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50",resizable:!1}}),a("el-table-column",{attrs:{prop:"GROUP_NAME",label:"车辆组名称",align:"center",width:"340"}}),a("el-table-column",{attrs:{prop:"COUNT",label:"车辆数量",align:"center","min-width":"300",resizable:!1}}),a("el-table-column",{attrs:{resizable:!1,width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"text"},on:{click:function(a){return e.handleTableSearchClick(t.row)}}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"text"},on:{click:function(a){return e.handleTableEditClick(t.row)}}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"text"},on:{click:function(a){return e.handleTableDeleteClick(t.row)}}})]}}])})],1),a("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.display,width:"700px"},on:{"update:visible":function(t){return e.$set(e.dialog,"display",t)},closed:e.handleDialogClosed}},[a("el-form",{ref:"form",attrs:{model:e.dialog.form,size:"small","label-position":"right"}},[a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"车辆组名称","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"车辆组名称"},model:{value:e.dialog.form.group_name,callback:function(t){e.$set(e.dialog.form,"group_name",t)},expression:"dialog.form.group_name"}})],1),a("el-form-item",[[a("transfer",{staticClass:"tw-transfer-customize",attrs:{value:e.dialog.form.vehicles,data:e.transfer.data,titles:["车辆","车辆组车辆"]},on:{"update:value":function(t){return e.$set(e.dialog.form,"vehicles",t)}}})]],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.display=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogSaveClick}},[e._v("提 交")])],1)],1),a("el-dialog",{attrs:{title:"车辆组详情",visible:e.dialog.detail.display,width:"90%",center:""},on:{"update:visible":function(t){return e.$set(e.dialog.detail,"display",t)}}},[a("t-table-page",{staticStyle:{height:"500px"},attrs:{data:e.table.detail.data,loading:e.table.detail.display,"page-size":10}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50",resizable:!1}}),a("el-table-column",{attrs:{prop:"GROUP_VHIC",label:"车牌号码",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"VEHI_SIM",label:"SIM卡号",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"OWN_NAME",label:"司机姓名",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"OWN_TEL",label:"联系电话",align:"center",width:"240"}}),a("el-table-column",{attrs:{prop:"VC_NAME",label:"车辆颜色",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"MT_NAME",label:"终端类型",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"VT_NAME",label:"车辆类型",align:"center","min-width":"140",resizable:!1}})],1)],1)],1)},i=[],r=(a("6b54"),a("0e08")),s=a("bc3a"),n=a.n(s),c=a("17fb"),o=a.n(c),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-transfer"},[a("div",{staticClass:"el-transfer-panel",attrs:{titles:"",buttontexts:"",filterplaceholder:"请输入城市拼音1",leftdefaultchecked:"",rightdefaultchecked:"",value:"",targetorder:"original"}},[a("p",{staticClass:"el-transfer-panel__header"},[a("label",{staticClass:"el-checkbox",attrs:{role:"checkbox"}},[a("span",{staticClass:"el-checkbox__label"},[e._v(e._s(e.totalTTitle)),a("span",[e._v(e._s(e.currentTTCount)+"/"+e._s(e.currentTTDisplayCount)+"/"+e._s(e.totalTCount))])])])]),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.totalTransfer.query,expression:"totalTransfer.query"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:e.filterPlaceholder},domProps:{value:e.totalTransfer.query},on:{input:function(t){t.target.composing||e.$set(e.totalTransfer,"query",t.target.value)}}}),e._m(0)]),a("div",{staticClass:"el-checkbox-group el-transfer-panel__list is-filterable",attrs:{role:"group","aria-label":"checkbox-group"}},e._l(e.filterTotalTransfer,function(t,l){return l<500?a("label",{key:"totalTransfer_"+t.id,staticClass:"el-checkbox el-transfer-panel__item",attrs:{role:"checkbox"},on:{click:function(a){return a.preventDefault(),e.handleTotalTransferClick(t)}}},[a("span",{staticClass:"el-checkbox__input",class:{"is-checked":t.checked},attrs:{"aria-checked":"mixed"}},[a("span",{staticClass:"el-checkbox__inner"}),a("input",{staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":"true",value:"0"}})]),a("span",{staticClass:"el-checkbox__label"},[a("span",[e._v(e._s(t.label))])])]):e._e()}),0),a("p",{staticClass:"el-transfer-panel__empty",staticStyle:{display:"none"}},[e._v("无匹配数据")]),a("p",{staticClass:"el-transfer-panel__empty",staticStyle:{display:"none"}},[e._v("无数据")])])]),a("div",{staticClass:"el-transfer__buttons"},[a("button",{staticClass:"el-button el-button--primary el-transfer__button",class:{"is-disabled":e.hasGTDisabled},attrs:{disabled:e.hasGTDisabled,type:"button"},on:{click:e.handleRemoveTransferClick}},[e._m(1)]),a("button",{staticClass:"el-button el-button--primary el-transfer__button",class:{"is-disabled":e.hasTTDisabled},attrs:{disabled:e.hasTTDisabled,type:"button"},on:{click:e.handleAddTransferClick}},[e._m(2)])]),a("div",{staticClass:"el-transfer-panel",attrs:{titles:"",buttontexts:"",filterplaceholder:"请输入城市拼音22",leftdefaultchecked:"",rightdefaultchecked:"",value:"",targetorder:"original"}},[a("p",{staticClass:"el-transfer-panel__header"},[a("label",{staticClass:"el-checkbox",attrs:{role:"checkbox"},on:{click:function(t){return t.preventDefault(),e.handleGroupCheckClick(t)}}},[a("span",{staticClass:"el-checkbox__input",class:{"is-checked":2===e.groupTransfer.totalCheck},attrs:{"aria-checked":"mixed"}},[a("span",{staticClass:"el-checkbox__inner"}),a("input",{staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":"true",value:""}})]),a("span",{staticClass:"el-checkbox__label"},[e._v(e._s(e.groupTTitle)),a("span",[e._v(e._s(e.currentGTCount)+"/"+e._s(e.groupTCount))])])])]),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.groupTransfer.query,expression:"groupTransfer.query"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:e.filterPlaceholder},domProps:{value:e.groupTransfer.query},on:{input:function(t){t.target.composing||e.$set(e.groupTransfer,"query",t.target.value)}}}),e._m(3)]),a("div",{staticClass:"el-checkbox-group el-transfer-panel__list is-filterable",style:{display:e.value.length<=0?"none":"block"},attrs:{role:"group","aria-label":"checkbox-group"}},e._l(e.filterGroupTransfer,function(t,l){return a("label",{key:"groupTransfer_"+t.id,staticClass:"el-checkbox el-transfer-panel__item",attrs:{role:"checkbox"},on:{click:function(a){return a.preventDefault(),e.handleGroupTransferClick(t)}}},[a("span",{staticClass:"el-checkbox__input",class:{"is-checked":e.hasGTChecked(t)},attrs:{"aria-checked":"mixed"}},[a("span",{staticClass:"el-checkbox__inner"}),a("input",{staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":"true",value:"0"}})]),a("span",{staticClass:"el-checkbox__label"},[a("span",[e._v(e._s(t.label))])])])}),0),a("p",{staticClass:"el-transfer-panel__empty",staticStyle:{display:"none"}},[e._v("无匹配数据")]),a("p",{staticClass:"el-transfer-panel__empty"},[e._v("无数据")])])])])},d=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix"},[a("i",{staticClass:"el-input__icon el-icon-search"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("i",{staticClass:"el-icon-arrow-left"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("i",{staticClass:"el-icon-arrow-right"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix"},[a("i",{staticClass:"el-input__icon el-icon-search"})])}],h={name:"Transfer",data:function(){return{totalTransfer:{selectList:[],query:""},groupTransfer:{totalCheck:0,data:[],selectList:[],query:""}}},props:{data:Array,titles:{type:Array,default:["列表 1","列表 2"]},"filter-placeholder":{type:String,default:"请输入搜索内容"},value:Array},computed:{currentTTCount:function(){return this.totalTransfer.selectList.length},currentTTDisplayCount:function(){return this.filterTotalTransfer.length>500?500:this.filterTotalTransfer.length},totalTCount:function(){return this.data.length},totalTTitle:function(){return this.titles[0]},hasTTDisabled:function(){return this.totalTransfer.selectList.length<=0},hasGTDisabled:function(){return this.groupTransfer.selectList.length<=0},currentGTCount:function(){return this.groupTransfer.selectList.length},groupTCount:function(){return this.value.length},groupTTitle:function(){return this.titles[1]},filterTotalTransfer:function(){var e=this.data,t=this.totalTransfer.query,a=this.value;return o.a.filter(e,function(e){if(a.length>0){var l=o.a.filter(a,function(t){return e.id===t.id&&e.label===t.label});if(l.length>0)return!1}return!t||e.label.indexOf(t)>-1})},filterGroupTransfer:function(){var e=this.value,t=this.groupTransfer.query;return o.a.filter(e,function(e){return!t||e.label.indexOf(t)>-1})}},methods:{handleTotalTransferClick:function(e){var t=this.totalTransfer.selectList;if(e.checked=!e.checked,0===t.length)t.push({id:e.id,label:e.label,checked:!1});else{for(var a=!1,l=0;l<t.length;l++){var i=t[l];if(e.id===i.id&&e.label===i.label){t.splice(l,1),a=!0;break}}a||t.push({id:e.id,label:e.label,checked:!1})}},handleGroupTransferClick:function(e){var t=this.groupTransfer.selectList;if(e.checked=!e.checked,0===t.length)t.push({id:e.id,label:e.label,checked:!1});else{for(var a=!1,l=0;l<t.length;l++){var i=t[l];if(e.id===i.id&&e.label===i.label){t.splice(l,1),a=!0;break}}a||t.push({id:e.id,label:e.label,checked:!1})}},resetTransferList:function(e,t){o.a.each(e,function(e){e.checked!==t&&(e.checked=t)})},handleAddTransferClick:function(){var e=this,t=this.totalTransfer.selectList;o.a.each(t,function(t){e.value.push(t)}),this.totalTransfer.selectList=[],this.resetTransferList(this.data,!1)},handleRemoveTransferClick:function(){var e=this.value,t=this.groupTransfer.selectList;o.a.each(t,function(t){for(var a=0;a<e.length;a++){var l=e[a];if(l.id===t.id&&l.label===t.label){e.splice(a,1);break}}}),this.groupTransfer.selectList=[],this.resetTransferList(this.data,!1)},handleGroupCheckClick:function(){0===this.groupTransfer.totalCheck?this.groupTransfer.totalCheck=2:this.groupTransfer.totalCheck=0},hasGTChecked:function(e){for(var t=this.groupTransfer.selectList,a=0;a<t.length;a++){var l=t[a];if(e.id===l.id&&e.label===l.label)return!0}return!1}},watch:{"groupTransfer.totalCheck":function(e){switch(e){case 0:this.groupTransfer.selectList=[],this.resetTransferList(this.value,!1);break;case 1:break;case 2:var t=this.value;this.groupTransfer.selectList=[];for(var a=0;a<t.length;a++){var l=t[a];this.groupTransfer.selectList.push({id:l.id,label:l.label,checked:!1})}this.resetTransferList(this.value,!0);break}}}},p=h,f=a("2877"),b=Object(f["a"])(p,u,d,!1,null,"e1539e36",null),g=b.exports,_={name:"VehicleGroupManage",data:function(){return{query:{group:""},inputVehicle:{loading:!1,option:[]},table:{display:!1,selectItem:[],data:[],detail:{display:!1,data:[]}},select:{group:[],vehicle:[]},dialog:{title:"",display:!1,form:{group_name:"",vehicles:[],arr:[]},detail:{display:!1}},transfer:{data:[],length:20},visibleLength:0,currentPage:0,queryLicensePlate:""}},mounted:function(){this.findVehicleGroup(),this.getGroupVehicle(),this.getVehicle()},computed:{},methods:{iconClassName:r["m"],getVehicle:function(){var e=this;n.a.get("common/vehicle",{baseURL:r["a"],params:{type:1}}).then(function(t){e.select.vehicle=o.a.map(t.data,function(e){return{value:e.VEHICLE_NO}}),e.transfer.data=[];var a=e.transfer.data;o.a.each(e.select.vehicle,function(e,t){var l={};l.id=e.value,l.label=e.value,a.push(l)})}).catch(function(e){})},getGroupVehicle:function(){var e=this;n.a.get("common/groupVehicle",{baseURL:r["a"],params:{}}).then(function(t){e.select.group=o.a.map(t.data,function(e){return{value:e.GROUP_NAME,label:e.GROUP_NAME}})}).catch(function(e){})},findVehicleGroup:function(){var e=this,t=this.query.group;this.table.display=!0,n.a.get("basicData/findVehicleGroup",{baseURL:r["a"],params:{group:t}}).then(function(t){e.table.data=t.data||[],e.table.display=!1}).catch(function(e){})},addTransferApplication:function(){var e=this;this.dialog.form.arr=[];var t=this.dialog.form,a=t.group_name,l=t.vehicles,i=t.arr;if(o.a.each(l,function(e){i.push(e.label)}),""===a||""===i)return this.$message.error("请填写完整信息！"),!1;n.a.get("basicData/addVehicleGroup",{baseURL:r["a"],params:{group_name:a,vehicles:i.toString()}}).then(function(t){t.data>0?(e.$message({message:"操作成功!",type:"success"}),e.dialog.display=!1,e.findVehicleGroup(),e.getGroupVehicle()):0===t.data?e.$message.error("操作失败！"):-1===t.data&&e.$message.error("该车辆组已存在！")}).catch(function(e){})},updateTransferApplication:function(){var e=this;this.dialog.form.arr=[];var t=this.dialog.form,a=t.group_name,l=t.vehicles,i=t.arr;if(o.a.each(l,function(e){i.push(e.label)}),""===a||""===i)return this.$message.error("请填写完整信息！"),!1;n.a.get("basicData/updateVehicleGroup",{baseURL:r["a"],params:{id:this.table.selectItem.GROUP_ID,group_name:a,vehicles:i.toString()}}).then(function(t){t.data>0?(e.$message({message:"操作成功!",type:"success"}),e.dialog.display=!1,e.findVehicleGroup(),e.getGroupVehicle()):0===t.data?e.$message.error("操作失败！"):-1===t.data&&e.$message.error("该车辆组已存在！")}).catch(function(e){})},findVehicleGroupDetail:function(e){var t=this;n.a.get("basicData/findVehicleGroupDetail",{baseURL:r["a"],params:{id:e.GROUP_ID}}).then(function(e){var a=t.dialog.form.vehicles;o.a.each(e.data,function(e){var t={};t.id=e.GROUP_VHIC,t.label=e.GROUP_VHIC,a.push(t)})}).catch(function(e){})},handleQueryClick:function(){this.findVehicleGroup()},handleTableAddClick:function(){this.dialog.title="添加",this.dialog.display=!0},handleTableSearchClick:function(e){var t=this;this.dialog.detail.display=!0,this.table.detail.display=!0,n.a.get("basicData/findVehicleGroupDetail",{baseURL:r["a"],params:{id:e.GROUP_ID}}).then(function(e){t.table.detail.data=e.data||[],t.table.detail.display=!1}).catch(function(e){})},handleTableEditClick:function(e){this.dialog.title="修改",this.dialog.display=!0,this.table.selectItem=e,this.dialog.form.group_name=e.GROUP_NAME,this.dialog.form.vehicles=[],this.findVehicleGroupDetail(e)},handleTableDeleteClick:function(e){var t=this;this.$confirm("是否删除?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){n.a.get("basicData/deleteVehicleGroup",{baseURL:r["a"],params:{id:e.GROUP_ID}}).then(function(e){e.data>0?(t.$message({message:"操作成功!",type:"success"}),t.findVehicleGroup(),t.getGroupVehicle()):t.$message.error("操作失败！")}).catch(function(e){})}).catch(function(){})},handleDialogSaveClick:function(){"修改"===this.dialog.title?this.updateTransferApplication():"添加"===this.dialog.title&&this.addTransferApplication()},handleDialogClosed:function(){this.dialog.title="",this.dialog.form.group_name="",this.dialog.form.vehicles=[],this.table.selectItem=[]},handleExportClick:function(){var e=this.query.group;this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){window.open("".concat(r["a"],"basicData/findVehicleGroupExcel?group=").concat(e))}).catch(function(){})}},watch:{queryLicensePlate:function(){this.currentPage=1}},components:{Transfer:g}},m=_,v=Object(f["a"])(m,l,i,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d2095ca.2c0c62cb.js.map