(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b6d35"],{"1f8b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("t-query-panel",{attrs:{model:e.query,footer:"300"},scopedSlots:e._u([{key:"querybar",fn:function(){return[n("el-form-item",[n("el-autocomplete",{attrs:{"prefix-icon":e.iconClassName("icon-car"),"fetch-suggestions":e.handleCompanyQuerySearch,"trigger-on-focus":!1,placeholder:"公司名称"},model:{value:e.query.company,callback:function(t){e.$set(e.query,"company",t)},expression:"query.company"}})],1),n("el-form-item",["1"===e.loginType?n("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择车辆组"},model:{value:e.query.vehicleGroupId,callback:function(t){e.$set(e.query,"vehicleGroupId",t)},expression:"query.vehicleGroupId"}},e._l(e.select.vehicleGroup,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e()],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")])],1)]},proxy:!0}])},[n("t-table-page",{attrs:{data:e.table.data,loading:e.table.display,"page-size":20}},[n("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50",resizable:!1}}),n("el-table-column",{attrs:{prop:"AUTO_NUM",label:"车牌号",align:"center",width:"240"}}),n("el-table-column",{attrs:{prop:"COM_NAME",label:"公司名称",align:"center",width:"400"}}),n("el-table-column",{attrs:{prop:"COUNT1",label:"违章次数",align:"center",width:"240"}}),n("el-table-column",{attrs:{prop:"IC_SCORE",label:"IC卡分值",align:"center","min-width":"240",resizable:!1}})],1)],1)},l=[],o=(n("c1df"),n("0e08")),i=n("bc3a"),c=n.n(i),r=n("17fb"),u=n.n(r),s={name:"Violation",data:function(){return{loginType:"",query:{company:"",vehicleGroupId:""},inputVehicle:{loading:!1,option:[]},table:{display:!1,data:[]},select:{company:[],vehicleGroup:[]}}},mounted:function(){this.query.time=new Date,this.loginType=this.$cookies.get("loginType"),this.getVehicleGroup(),this.findViolation(),this.getCompany()},methods:{iconClassName:o["m"],getVehicleGroup:function(){var e=this;if("1"!==this.loginType)return null;c.a.get("common/vehicleGroup",{baseURL:o["a"],params:{userId:this.$cookies.get("userId")}}).then(function(t){e.select.vehicleGroup=u.a.map(t.data,function(e){return{value:e.CLZS,label:e.CLZ_NAME}})}).catch(function(e){})},handleCompanyQuerySearch:function(e,t){t(u.a.filter(this.select.company,function(t){return t.value.indexOf(e)>-1}))},getCompany:function(){var e=this;c.a.get("common/company",{baseURL:o["a"],params:{}}).then(function(t){e.select.company=u.a.map(t.data,function(e){return{value:e.COMPANY_NAME}})}).catch(function(e){})},findViolation:function(){var e=this,t=this.query,n=t.company,a=t.vehicleGroupId;this.table.display=!0,c.a.get("queryAnalysis/findViolation",{baseURL:o["a"],params:{company:n,vehicleGroupId:a}}).then(function(t){e.table.data=t.data||[],e.table.display=!1}).catch(function(e){})},handleQueryClick:function(){this.findViolation()},handleExportClick:function(){var e=this.query,t=e.company,n=e.vehicleGroupId;this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){window.open("".concat(o["a"],"queryAnalysis/findViolationExcel?company=").concat(t,"&vehicleGroupId=").concat(n))}).catch(function(){})}}},p=s,h=n("2877"),d=Object(h["a"])(p,a,l,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0b6d35.a6be75de.js.map