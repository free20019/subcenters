(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb6e0382"],{"072e":function(t,e,i){"use strict";var a=i("c545"),l=i.n(a);l.a},"28a5":function(t,e,i){"use strict";var a=i("aae3"),l=i("cb7c"),c=i("ebd6"),n=i("0390"),s=i("9def"),o=i("5f1b"),r=i("520a"),p=i("79e5"),h=Math.min,m=[].push,d="split",u="length",v="lastIndex",w=4294967295,f=!p(function(){RegExp(w,"y")});i("214f")("split",2,function(t,e,i,p){var b;return b="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[u]||2!="ab"[d](/(?:ab)*/)[u]||4!="."[d](/(.?)(.?)/)[u]||"."[d](/()()/)[u]>1||""[d](/.?/)[u]?function(t,e){var l=String(this);if(void 0===t&&0===e)return[];if(!a(t))return i.call(l,t,e);var c,n,s,o=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,d=void 0===e?w:e>>>0,f=new RegExp(t.source,p+"g");while(c=r.call(f,l)){if(n=f[v],n>h&&(o.push(l.slice(h,c.index)),c[u]>1&&c.index<l[u]&&m.apply(o,c.slice(1)),s=c[0][u],h=n,o[u]>=d))break;f[v]===c.index&&f[v]++}return h===l[u]?!s&&f.test("")||o.push(""):o.push(l.slice(h)),o[u]>d?o.slice(0,d):o}:"0"[d](void 0,0)[u]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,a){var l=t(this),c=void 0==i?void 0:i[e];return void 0!==c?c.call(i,l,a):b.call(String(l),i,a)},function(t,e){var a=p(b,t,this,e,b!==i);if(a.done)return a.value;var r=l(t),m=String(this),d=c(r,RegExp),u=r.unicode,v=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(f?"y":"g"),g=new d(f?r:"^(?:"+r.source+")",v),y=void 0===e?w:e>>>0;if(0===y)return[];if(0===m.length)return null===o(g,m)?[m]:[];var N=0,k=0,A=[];while(k<m.length){g.lastIndex=f?k:0;var x,I=o(g,f?m:m.slice(k));if(null===I||(x=h(s(g.lastIndex+(f?0:k)),m.length))===N)k=n(m,k,u);else{if(A.push(m.slice(N,k)),A.length===y)return A;for(var T=1;T<=I.length-1;T++)if(A.push(I[T]),A.length===y)return A;k=N=x}}return A.push(m.slice(N)),A}]})},5218:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHRGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxNy0xMS0zMFQxMDowOToxNSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxNy0xMS0zMFQxMDowOToxNSswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTctMTEtMzBUMTA6MDk6MTUrMDg6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YTRmNmY4NzUtYTFhMi0yMDQyLWI3NWQtMWMxNDYwYTBiMzQ0IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OWNlY2YyNjgtODFkMC1lYjRmLTgxZWYtZmU1MjAwOWY3NDk2IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MzAzZmM2OTAtNDczZC1hZjQxLTllYmItZWUwNDVhMDhhNjNkIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MzAzZmM2OTAtNDczZC1hZjQxLTllYmItZWUwNDVhMDhhNjNkIiBzdEV2dDp3aGVuPSIyMDE3LTExLTMwVDEwOjA5OjE1KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphNGY2Zjg3NS1hMWEyLTIwNDItYjc1ZC0xYzE0NjBhMGIzNDQiIHN0RXZ0OndoZW49IjIwMTctMTEtMzBUMTA6MDk6MTUrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZWIwODM2ZC03NDVlLWVkNGMtOTE1NC0yOGNkYTM0NWI0MDk8L3JkZjpsaT4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6ODhkZDA4MzMtMmVkOC01ZjQxLWIwOTMtODNhNjBlOTUwZDEyPC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmFjZDIwNWU3LTE3Y2QtMDQ0NS1iNjY0LTI0OGE0ZjQwNzVjMzwvcmRmOmxpPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDplOTBlZTNkOC0zNmRkLWVlNDktYTE0ZC1mYmM4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"},5344:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tw-template-wrapper"},[i("t-card-query",{attrs:{height:"300px"},scopedSlots:t._u([{key:"query",fn:function(){return[i("el-input",{directives:[{name:"show",rawName:"v-show",value:t.is_display,expression:"is_display"}],staticClass:"tw-panel__query-input",staticStyle:{width:"calc(100% - 38px)"},attrs:{placeholder:"请输入公司名称"},model:{value:t.companyName,callback:function(e){t.companyName=e},expression:"companyName"}}),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.is_display,expression:"is_display"}],attrs:{icon:"el-icon-search"}})]},proxy:!0}])},[i("el-tree",{ref:"tree",staticClass:"tw-tree",attrs:{data:t.companyList,"filter-node-method":t.filterNode},on:{"node-click":t.handleNodeClick}})],1),i("t-card-query",{attrs:{height:"calc(100% - 350px)"},scopedSlots:t._u([{key:"query",fn:function(){return[i("el-tooltip",{attrs:{content:t.queryPlaceholderList,placement:"top"}},[i("el-autocomplete",{staticClass:"tw-panel__query-input",staticStyle:{width:"calc(100% - 111px)",float:"left","margin-right":"-1px"},attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:t.queryPlaceholderInfo,"popper-class":"vehicleWidth"},on:{select:t.handleSelect},model:{value:t.vehicle,callback:function(e){t.vehicle=e},expression:"vehicle"}})],1),i("el-button",{attrs:{icon:"el-icon-search"}}),i("el-button",{attrs:{type:"primary",icon:"tw-icon-rotate el-icon-brush"},on:{click:t.handelClearSelectedVehicleClick}}),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.handelClearVehicleDataClick}})]},proxy:!0}])},[i("pl-table",{ref:"vehicleTableLeft",staticClass:"tw-table tw-table__towLines tw-item__click",attrs:{datas:t.vehicleList,"big-data-checkbox":"",size:"mini","header-drag-style":"","pagination-show":!1,"use-virtual":""},on:{"selection-change":t.changeVhic,"row-dblclick":t.tableDblick}},[t.ischeckbox?i("pl-table-column",{attrs:{type:"selection",align:"center",width:"55"}}):t._e(),i("pl-table-column",{staticStyle:{color:"black"},attrs:{prop:"SPEED","min-width":"120",align:"center",label:"车牌"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{class:["tw-radius",e.row.VEHI_DONOT]}),t._v("\n        "+t._s(e.row.VEHI_NO)+"\n        ")]}}])}),i("pl-table-column",{attrs:{prop:"SPEED",align:"center",label:"速度"}})],1)],1),i("div",{staticClass:"tw-list tw-vehicle-status"},[i("el-badge",{staticClass:"tw-list-item",attrs:{type:"info",value:t.vehicleTypeNum.lx,max:999}},[i("div",{staticClass:"tw-list-wrapper",on:{click:function(e){return t.statusSelection(1)}}},[i("t-icon",{staticClass:"tw-list-item__icon",attrs:{name:"icon-car"}}),i("span",[t._v("离线")])],1)]),i("el-badge",{staticClass:"tw-list-item",attrs:{type:"success",value:t.vehicleTypeNum.kc,max:999}},[i("div",{staticClass:"tw-list-wrapper",on:{click:function(e){return t.statusSelection(2)}}},[i("t-icon",{staticClass:"tw-list-item__icon",attrs:{name:"icon-car"}}),i("span",[t._v("空车")])],1)]),i("el-badge",{staticClass:"tw-list-item",attrs:{type:"danger",value:t.vehicleTypeNum.zc,max:999}},[i("div",{staticClass:"tw-list-wrapper",on:{click:function(e){return t.statusSelection(3)}}},[i("t-icon",{staticClass:"tw-list-item__icon",attrs:{name:"icon-car"}}),i("span",[t._v("重车")])],1)]),i("el-badge",{staticClass:"tw-list-item",attrs:{type:"warning",value:t.vehicleTypeNum.bj,max:999}},[i("div",{staticClass:"tw-list-wrapper",on:{click:function(e){return t.statusSelection(4)}}},[i("t-icon",{staticClass:"tw-list-item__icon",attrs:{name:"icon-car"}}),i("span",[t._v("报警")])],1)])],1)],1)},l=[],c=(i("ac6a"),i("0d6d"),i("0e08")),n=i("bc3a"),s=i.n(n),o=i("17fb"),r=i.n(o),p={name:"RealTimeMonitorVehiclePanel",data:function(){return{companyList:[],placeholderIndex:0,queryPlaceholder:["车牌号码","终端编号","SIM卡号"],vehicleList:[],companyName:"",vehicle:"",checkVehicleList:[],vehicleTypeNum:{lx:0,kc:0,zc:0,bj:0,lxlist:[],kclist:[],zclist:[],bjlist:[]},is_display:!1,loginType:"",columns:[{}]}},props:{vhic:Array,ischeckbox:{type:Boolean,defaule:!1}},mounted:function(){var t=this;setInterval(function(){return t.placeholderIndex++},3e3),this.companyList=[],this.vehicleList=[],this.handlegetCompTree()},computed:{queryPlaceholderInfo:function(){return"请输入"+this.queryPlaceholder[this.placeholderIndex%3]},queryPlaceholderList:function(){return"可输入"+this.queryPlaceholder.join("、")},selectedVehicleNumber:function(){return"车辆数：".concat(this.vehicleList.length,"辆")}},watch:{companyName:function(t){this.$refs.tree.filter(t)},checkVehicleList:function(t){this.$listeners["update:vhic"]&&this.$emit("update:vhic",t)},vhic:function(t){this.checkVehicleList=t},vehicleList:function(t){console.log(t)}},methods:{querySearchAsync:function(t,e){if(t.length<3)return e([]);this.getVehiList(t).then(function(t){e(t.data&&r.a.map(t.data,function(t){return{value:t.INFO,label:t.VEHI_NO}})||[])})},getVehiList:function(t){var e=new URLSearchParams;return e.append("vhic",t),s.a.post("map/getVhic",e,{baseURL:c["a"]})},handleSelect:function(t){var e=this,i=new URLSearchParams;i.append("type","1"),i.append("vhic",t.label),s.a.post("map/getOneVhic",i,{baseURL:c["a"]}).then(function(t){e.statisticalReset(),e.vehicleList=t.data,e.statisticalResults()})},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},handlegetCompTree:function(){var t=this,e=this.$cookies.get("loginType");this.loginType=e,"0"==e?(this.is_display=!0,s.a.get("map/getComp",{baseURL:c["a"]}).then(function(e){t.companyList=e.data||[]})):"1"==e&&s.a.get("map/getClzTree",{baseURL:c["a"]}).then(function(e){t.companyList=e.data||[]})},handleNodeClick:function(t){var e=this,i=new URLSearchParams;"0"==this.loginType?(i.append("id",t.value),s.a.post("map/getVhicList",i,{baseURL:c["a"]}).then(function(t){e.statisticalReset(),e.vehicleList=t.data,e.statisticalResults()})):"1"==this.loginType&&(console.log(t),i.append("cp",t.cp),s.a.post("map/getClzVhic",i,{baseURL:c["a"]}).then(function(t){e.statisticalReset(),e.vehicleList=Object.freeze(t.data),e.statisticalResults()}))},handelClearSelectedVehicleClick:function(){this.tableToggleSelection()},handelClearVehicleDataClick:function(){this.vehicleList=[]},tableToggleSelection:function(t){var e=this;console.log(this.$refs.vehicleTableLeft),t?t.forEach(function(t){e.$refs.vehicleTableLeft.$refs.singleTable.toggleRowSelection(t)}):this.$refs.vehicleTableLeft.$refs.singleTable.clearSelection()},changeVhic:function(t){this.ischeckbox&&(this.checkVehicleList=t)},tableDblick:function(t){this.ischeckbox||(this.checkVehicleList=[],this.checkVehicleList=[t])},statisticalResults:function(){var t=this;r.a.map(this.vehicleList,function(e){"tw-radius-offLine"==e.VEHI_DONOT?(t.vehicleTypeNum.lx++,t.vehicleTypeNum.lxlist.push(e)):"tw-radius-emptyCar"==e.VEHI_DONOT?(t.vehicleTypeNum.kc++,t.vehicleTypeNum.kclist.push(e)):"tw-radius-heavyCar"==e.VEHI_DONOT?(t.vehicleTypeNum.zc++,t.vehicleTypeNum.zclist.push(e)):"tw-radius-callPolice"==e.VEHI_DONOT&&(t.vehicleTypeNum.bj++,t.vehicleTypeNum.bjlist.push(e))})},statisticalReset:function(){this.vehicleTypeNum.lx=0,this.vehicleTypeNum.lxlist=[],this.vehicleTypeNum.kc=0,this.vehicleTypeNum.kclist=[],this.vehicleTypeNum.zc=0,this.vehicleTypeNum.zclist=[],this.vehicleTypeNum.bj=0,this.vehicleTypeNum.bjlist=[]},statusSelection:function(t){this.tableToggleSelection(),1!=t?2!=t?3!=t?4!=t||this.tableToggleSelection(this.vehicleTypeNum.bjlist):this.tableToggleSelection(this.vehicleTypeNum.zclist):this.tableToggleSelection(this.vehicleTypeNum.kclist):this.tableToggleSelection(this.vehicleTypeNum.lxlist)}}},h=p,m=(i("072e"),i("2877")),d=Object(m["a"])(h,a,l,!1,null,"59b2269d",null);e["a"]=d.exports},"69d5":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("t-layout",{attrs:{border:""},scopedSlots:t._u([{key:"left",fn:function(){return[i("real-time-monitor-vehicle-panel",{attrs:{vhic:t.vhicinfo},on:{"update:vhic":function(e){t.vhicinfo=e}}})]},proxy:!0}])},[i("t-layout",[i("t-grid-layout",{staticStyle:{padding:"10px"},attrs:{margin:"5"}},[i("div",{staticClass:"tw-panel tw-map-panel",class:{action:t.isMapAction(1)},attrs:{id:"baidu-map-1"},on:{click:function(e){return t.mapActionClick(1)}}},[i("div",{staticClass:"tw-map-tool-bar",on:{click:function(e){return t.clearMap(1)}}},[i("el-tooltip",{staticClass:"tw-map-tool-item",attrs:{content:"清除",placement:"bottom"}},[i("i",{staticClass:"el-icon-delete",staticStyle:{padding:"4px 4px 3px 4px"}})])],1)]),i("div",{staticClass:"tw-panel tw-map-panel",class:{action:t.isMapAction(2)},attrs:{id:"baidu-map-2"},on:{click:function(e){return t.mapActionClick(2)}}},[i("div",{staticClass:"tw-map-tool-bar",on:{click:function(e){return t.clearMap(2)}}},[i("el-tooltip",{staticClass:"tw-map-tool-item",attrs:{content:"清除",placement:"bottom"}},[i("i",{staticClass:"el-icon-delete",staticStyle:{padding:"4px 4px 3px 4px"}})])],1)]),i("div",{staticClass:"tw-panel tw-map-panel",class:{action:t.isMapAction(3)},attrs:{id:"baidu-map-3"},on:{click:function(e){return t.mapActionClick(3)}}},[i("div",{staticClass:"tw-map-tool-bar",on:{click:function(e){return t.clearMap(3)}}},[i("el-tooltip",{staticClass:"tw-map-tool-item",attrs:{content:"清除",placement:"bottom"}},[i("i",{staticClass:"el-icon-delete",staticStyle:{padding:"4px 4px 3px 4px"}})])],1)]),i("div",{staticClass:"tw-panel tw-map-panel",class:{action:t.isMapAction(4)},attrs:{id:"baidu-map-4"},on:{click:function(e){return t.mapActionClick(4)}}},[i("div",{staticClass:"tw-map-tool-bar",on:{click:function(e){return t.clearMap(4)}}},[i("el-tooltip",{staticClass:"tw-map-tool-item",attrs:{content:"清除",placement:"bottom"}},[i("i",{staticClass:"el-icon-delete",staticStyle:{padding:"4px 4px 3px 4px"}})])],1)])])],1)],1)},l=[],c=(i("28a5"),i("bc3a")),n=i.n(c),s=i("5344"),o=i("024c"),r=i.n(o),p=i("0e08"),h=i("1157"),m=i.n(h),d=i("17fb"),u=i.n(d),v=i("aac5"),w=i.n(v),f=i("5218"),b=i.n(f),g=i("8eac"),y=i.n(g),N={name:"SplitScreenMonitor",data:function(){return{map:{select:1,map1:null,map2:null,map3:null,map4:null,mapvhic1:"",mapvhic2:"",mapvhic3:"",mapvhic4:"",jwd1:"",jwd2:"",jwd3:"",jwd4:"",setinterval1:null,mar1:[],mar2:[],mar3:[],mar4:[]},vhicinfo:[],geocoder:new r.a.Geocoder({city:"010",radius:1e3})}},mounted:function(){var t=this;this.$nextTick(function(){t.map.map1=new r.a.Map("baidu-map-1",{resizeEnable:!0,zoom:12}),t.map.map2=new r.a.Map("baidu-map-2",{resizeEnable:!0,zoom:12}),t.map.map3=new r.a.Map("baidu-map-3",{resizeEnable:!0,zoom:12}),t.map.map4=new r.a.Map("baidu-map-4",{resizeEnable:!0,zoom:12})})},methods:{clearMap:function(t){var e="mapvhic"+t;this.map[e]="";var i="jwd"+t;this.map[i]="";var a="map"+t;this.map[a].clearMap();var l="mar"+t;this.map[l]=[]},isMapAction:function(t){return this.map.select===t},mapActionClick:function(t){this.map.select=t},getSplitScreenMonitor:function(t){var e=this,i="mapvhic"+this.map.select;this.map[i]=t;var a="jwd"+this.map.select;this.map[a]="";var l="map"+this.map.select,c=new URLSearchParams;c.append("type","1"),c.append("vhic",t),n.a.post("map/getOneVhic",c,{baseURL:p["a"]}).then(function(t){e.map[l].clearMap(),clearInterval(e.map.setinterval1),e.map[l].setCenter([t.data[0].PX,t.data[0].PY]),e.addmar(t.data[0],e.map[l],e.map.select),e.addText(t.data[0],e.map[l],e.map.select),e.map[a]=t.data[0].PX+","+t.data[0].PY,e.map.setinterval1=setInterval(e.vehicleTimer,3e4)})},vehicleTimer:function(){var t=this,e="";if(""!=this.map.mapvhic1&&(e+="'"+this.map.mapvhic1+"',"),""!=this.map.mapvhic2&&(e+="'"+this.map.mapvhic2+"',"),""!=this.map.mapvhic3&&(e+="'"+this.map.mapvhic3+"',"),""!=this.map.mapvhic4&&(e+="'"+this.map.mapvhic4+"',"),e=e.substring(0,e.length-1),e.length<3)this.map.setinterval1&&clearInterval(this.map.setinterval1);else{var i=new URLSearchParams;i.append("type","2"),i.append("vhic",e),n.a.post("map/getOneVhic",i,{baseURL:p["a"]}).then(function(e){u.a.map(e.data,function(e){e.VEHI_NO==t.map.mapvhic1?t.mapUtil(t.map.map1,t.map.mar1,t.map.jwd1,e,1):e.VEHI_NO==t.map.mapvhic2?t.mapUtil(t.map.map2,t.map.mar2,t.map.jwd2,e,2):e.VEHI_NO==t.map.mapvhic3?t.mapUtil(t.map.map3,t.map.mar3,t.map.jwd3,e,3):e.VEHI_NO==t.map.mapvhic4&&t.mapUtil(t.map.map4,t.map.mar4,t.map.jwd4,e,4)})})}},mapUtil:function(t,e,i,a,l){t.remove(e);var c="mar"+l;this.map[c]=[],t.setCenter([a.PX,a.PY]),this.addmar(a,t,l),this.addText(a,t,l);var n="jwd"+l,s=[[this.map[n].split(",")[0],this.map[n].split(",")[1]],[a.PX,a.PY]];this.addLine(s,t),this.map[n]=a.PX+","+a.PY},addmar:function(t,e,i){var a=this,l="mar"+i,c="";c="1"==t.TYPE?w.a:"1"==t.state?b.a:y.a;var n=new r.a.Marker({position:[t.PX,t.PY],map:e,icon:c,offset:new r.a.Pixel(-16,-16),angle:t.ANGLE});this.map[l].push(n),r.a.event.addListener(n,"click",function(i){a.markerClick(t,e)})},addLine:function(t,e){var i=new r.a.Polyline({path:t,showDir:!0,strokeColor:"#28F",strokeWeight:6});i.setMap(e)},markerMouseout:function(){this.infoWindow.close()},getAddress:function(t){this.geocoder.getAddress([t.PX,t.PY],function(t,e){if("complete"===t&&e.regeocode)var i=setInterval(function(){m()("#multaddress")&&(clearInterval(i),m()("#multaddress").text(e.regeocode.formattedAddress))},100);else m()("#multaddress").text("无")})},createInfoWindowHtml:function(t){var e=this,i=m()("<span>").addClass("tw-title").text(t.VEHI_NO+("0"==t.CARSTATE?"(精确)":"(非精确)")),a=m()("<span>").addClass("tw-close").html("&times;").on("click",function(){e.markerMouseout()}),l=t.COMP_NAME||"",c=t.MDT_NO||"",n=t.VEHI_SIM||"",s=t.SPEED+"KM/S"||!1,o=t.MDT_SUB_TYPE||"",r=t.ADDRESS||"";return m()("<div>").addClass("tw-map-window").html([m()("<div>").addClass("tw-map-window-header").html([i,a]),m()("<div>").addClass("tw-map-window-body").css({width:"250px"}).html(['<div class="el-row"><div class="el-col el-col-8 tw-align-right">公司名称：</div><div class="el-col el-col-16">'.concat(l,"</div></div>"),'<div class="el-row"><div class="el-col el-col-8 tw-align-right">终端编号：</div><div class="el-col el-col-16">'.concat(c,"</div></div>"),'<div class="el-row"><div class="el-col el-col-8 tw-align-right">SIM卡号：</div><div class="el-col el-col-16">'.concat(n,"</div></div>"),'<div class="el-row"><div class="el-col el-col-8 tw-align-right">GPS速度：</div><div class="el-col el-col-16">'.concat(s,"</div></div>"),'<div class="el-row"><div class="el-col el-col-8 tw-align-right">终端类型：</div><div class="el-col el-col-16">'.concat(o,"</div></div>"),'<div class="el-row"><div class="el-col el-col-8 tw-align-right">当前地址：</div><div class="el-col el-col-16">'.concat(r,"</div></div>")])])},addText:function(t,e,i){var a="mar"+i,l=new r.a.Text({text:t.VEHI_NO,anchor:"bottom-center",cursor:"pointer",offset:new r.a.Pixel(5,30),style:{"border-radius":".25rem","background-color":"white",width:"6em","border-width":0,"box-shadow":"0 2px 6px 0 rgba(114, 124, 245, .5)","text-align":"center","font-size":"10px","font-weight":"bold ",color:"blue"},position:[t.PX,t.PY]});l.setMap(e),this.map[a].push(l)},markerClick:function(t,e){var i=this,a=function(t){i.infoWindow=new r.a.InfoWindow({isCustom:!0,content:i.createInfoWindowHtml(t)[0],offset:new r.a.Pixel(0,-20),autoMove:!0,closeWhenClickMap:!0}),i.infoWindow.open(e,[t.PX,t.PY])};this.geocoder.getAddress([t.PX,t.PY],function(e,i){"complete"===e&&i.regeocode?t.ADDRESS=i.regeocode.formattedAddress:log.error("根据经纬度查询地址失败"),a(t)}),a(t),e.setCenter([t.PX,t.PY])}},components:{RealTimeMonitorVehiclePanel:s["a"]},watch:{vhicinfo:function(t){this.getSplitScreenMonitor(t[0].VEHI_NO)}},destroyed:function(){this.map.setinterval1&&clearInterval(this.map.setinterval1)}},k=N,A=i("2877"),x=Object(A["a"])(k,a,l,!1,null,null,null);e["default"]=x.exports},"8eac":function(t,e,i){t.exports=i.p+"img/k3.288be509.png"},aac5:function(t,e,i){t.exports=i.p+"img/l3.e3702d79.png"},aae3:function(t,e,i){var a=i("d3f4"),l=i("2d95"),c=i("2b4c")("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[c])?!!e:"RegExp"==l(t))}},c545:function(t,e,i){}}]);
//# sourceMappingURL=chunk-bb6e0382.37963c20.js.map