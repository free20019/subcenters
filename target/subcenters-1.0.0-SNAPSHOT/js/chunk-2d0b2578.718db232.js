(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2578"],{2466:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("t-query-panel",{attrs:{model:e.query,footer:"300"},scopedSlots:e._u([{key:"querybar",fn:function(){return[a("el-form-item",[a("el-date-picker",{attrs:{type:"date",placeholder:"开始时间"},model:{value:e.query.startTime,callback:function(t){e.$set(e.query,"startTime",t)},expression:"query.startTime"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"date",placeholder:"结束时间"},model:{value:e.query.endTime,callback:function(t){e.$set(e.query,"endTime",t)},expression:"query.endTime"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"投诉类型"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},e._l(e.getType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",["1"===e.loginType?a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择车辆组"},model:{value:e.query.vehicleGroupId,callback:function(t){e.$set(e.query,"vehicleGroupId",t)},expression:"query.vehicleGroupId"}},e._l(e.select.vehicleGroup,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e()],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")])],1)]},proxy:!0}])},[a("t-table-page",{attrs:{data:e.table.data,loading:e.table.display,"page-total":e.table.total,"page-size":e.table.pageSize,"real-time-page":e.table.currentPage,sumText:e.table.total.toString()},on:{"update:realTimePage":function(t){return e.$set(e.table,"currentPage",t)},"update:real-time-page":function(t){return e.$set(e.table,"currentPage",t)},"current-change":e.handlePaginationCurrentChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50",resizable:!1}}),a("el-table-column",{attrs:{prop:"CALL_NAME",label:"投诉人",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"BUSINESS_ITEMTYPE_NAME",label:"投诉类型",align:"center",width:"240"}}),a("el-table-column",{attrs:{prop:"CALLER_ID",label:"联系方式",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"VEHICLE_PLATE_NUMBER",label:"投诉车辆",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"BUSINESS_STATUS_NAME",label:"处理详情",align:"center",width:"240"}}),a("el-table-column",{attrs:{prop:"ARCHIVE_TIME",label:"投诉时间",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"ACCEPT_TIME",label:"处理时间",align:"center","min-width":"180",resizable:!1}})],1)],1)},n=[],r=a("c1df"),i=a.n(r),o=a("0e08"),u=a("bc3a"),c=a.n(u),p=a("17fb"),s=a.n(p),d={name:"ComplaintInquiry",data:function(){return{loginType:"",query:{startTime:"",endTime:"",type:"",vehicleGroupId:""},inputVehicle:{loading:!1,option:[]},table:{display:!1,data:[],pageSize:20,currentPage:1,total:0},select:{vehicleGroup:[]},getType:[{label:"全部",value:""},{label:"绕道",value:"绕道"},{label:"中途抛客",value:"中途抛客"},{label:"扰乱场站秩序",value:"扰乱场站秩序"},{label:"服务质量",value:"服务质量"},{label:"拒载",value:"拒载"},{label:"拼载",value:"拼载"},{label:"表扬",value:"表扬"},{label:"其他",value:"其他"}]}},mounted:function(){this.query.startTime=new Date(i()().add("day",-1)),this.query.endTime=new Date,this.loginType=this.$cookies.get("loginType"),this.getVehicleGroup(),this.findComplaintInquiry()},methods:{iconClassName:o["m"],getVehicleGroup:function(){var e=this;if("1"!==this.loginType)return null;c.a.get("common/vehicleGroup",{baseURL:o["a"],params:{userId:this.$cookies.get("userId")}}).then(function(t){e.select.vehicleGroup=s.a.map(t.data,function(e){return{value:e.CLZS,label:e.CLZ_NAME}})}).catch(function(e){})},findComplaintInquiry:function(){var e=this,t=this.query,a=t.startTime,l=t.endTime,n=t.type,r=t.vehicleGroupId,u=this.table,p=u.pageSize,s=u.currentPage;this.table.display=!0,c.a.get("queryAnalysis/findComplaintInquiry",{baseURL:o["a"],params:{startTime:a&&i()(a).format("YYYY-MM-DD"),endTime:l&&i()(l).format("YYYY-MM-DD"),type:n,vehicleGroupId:r,pageSize:p,currentPage:s}}).then(function(t){e.table.data=t.data.datas||[],e.table.total=parseInt(t.data.count)||0,e.table.display=!1}).catch(function(e){})},handleQueryClick:function(){this.table.currentPage=1,this.findComplaintInquiry()},handlePaginationCurrentChange:function(e){var t=e.currentPage;e.pageSize;this.table.currentPage=t,this.findComplaintInquiry()},handleExportClick:function(){var e=this.query,t=e.startTime,a=e.endTime,l=e.type,n=e.vehicleGroupId;this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){window.open("".concat(o["a"],"queryAnalysis/findComplaintInquiryExcel?startTime=").concat(t&&i()(t).format("YYYY-MM-DD"),"&endTime=").concat(a&&i()(a).format("YYYY-MM-DD"),"&type=").concat(l,"&vehicleGroupId=").concat(n,"&pageSize=",1e7,"&currentPage=",1))}).catch(function(){})}}},m=d,b=a("2877"),h=Object(b["a"])(m,l,n,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0b2578.718db232.js.map