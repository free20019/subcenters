{"version":3,"sources":["webpack:///./src/assets/image/car.png","webpack:///./src/views/vehicle-monitor/HistoricalTrack.vue?eb7d","webpack:///./src/views/vehicle-monitor/HistoricalTrack.vue?21ff","webpack:///./src/assets/js/markerMovingControl.js","webpack:///src/views/vehicle-monitor/HistoricalTrack.vue","webpack:///./src/views/vehicle-monitor/HistoricalTrack.vue?bbc3","webpack:///./src/views/vehicle-monitor/HistoricalTrack.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","table","gpsData","expression","attrs","scopedSlots","_u","key","fn","staticClass","vehicleQuery","handleVehicleQueryRemoteMethod","model","callback","$$v","$set","_l","item","label","staticStyle","_v","_s","getHTAddress","on","handleQueryClick","playIconType","handlePlayClick","handleStopClick","proxy","handleVehicleSpeedChange","info","speed","fx","px","py","dqlc","zlc","time","zt","data","length","map","test","tabs","arg","freezeData","formatterTDateTime","formatterTVehicleType","formatterTDirectionType","staticRenderFns","MarkerMovingControl","marker","path","_map","_speed","_marker","_path","_currentIndex","setMap","setPosition","prototype","step","nextIndex","_listenToMoveend","AMap","event","addListener","trigger","lng","lat","moveTo","move","_listenToStepend","stop","stopMove","restart","jingdu","ind","bmap","vehicleRoute","vehicleMarker","playType","playFrame","palytool","markerhistory","polyline","markerMovingControl","vehicle","startTime","endTime","vehicleOptions","active","loading","pageSize","currentPage","freeze","vehicleRecord","duration","alarmLocation","speedingSection","leftEChart","setIntervalgj","geocoder","city","radius","mounted","$cookies","get","$nextTick","resizeEnable","zoom","laydate","elem","position","computed","methods","getVehicleList","params","append","getHistoryList","lineArr","push","addLine","icon","zIndex","offset","autoRotation","showDir","strokeColor","strokeWeight","setFitView","speedecharts","title","SPEED","setOption","tooltip","legend","xAxis","type","boundaryGap","yAxis","axisLabel","formatter","series","resize","handleTablePageCurrentChange","index","query","setInterval","clearInterval","haldlestep","ttt","formatterDirectionType","DIRECTION","PX","PY","MILEAGE","STATE","console","playVehicle","vehicleTimeout","resetVehiclePosition","watch","setAngle","parseInt","component"],"mappings":"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","file":"js/chunk-500e27cf.ed039030.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HistoricalTrack.vue?vue&type=style&index=0&id=72c9b508&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HistoricalTrack.vue?vue&type=style&index=0&id=72c9b508&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('t-layout',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.table.gpsData.loading),expression:\"table.gpsData.loading\"}],attrs:{\"border\":\"\",\"right\":\"273\"},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('div',{staticClass:\"tw-calendar no-footer\",attrs:{\"id\":\"calendar\"}}),_c('el-form',{staticClass:\"tw-form\",attrs:{\"model\":_vm.vehicleQuery,\"size\":\"small\"}},[_c('el-form-item',[_c('el-select',{attrs:{\"remote-method\":_vm.handleVehicleQueryRemoteMethod,\"remote\":\"\",\"filterable\":\"\",\"reserve-keyword\":\"\",\"placeholder\":\"车牌号码\"},model:{value:(_vm.vehicleQuery.vehicle),callback:function ($$v) {_vm.$set(_vm.vehicleQuery, \"vehicle\", $$v)},expression:\"vehicleQuery.vehicle\"}},_vm._l((_vm.vehicleOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_c('div',{staticStyle:{\"display\":\"none\"}},[_vm._v(_vm._s(_vm.getHTAddress))])],1),_c('el-form-item',[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"开始时间\"},model:{value:(_vm.vehicleQuery.startTime),callback:function ($$v) {_vm.$set(_vm.vehicleQuery, \"startTime\", $$v)},expression:\"vehicleQuery.startTime\"}})],1),_c('el-form-item',[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"开始时间\"},model:{value:(_vm.vehicleQuery.endTime),callback:function ($$v) {_vm.$set(_vm.vehicleQuery, \"endTime\", $$v)},expression:\"vehicleQuery.endTime\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleQueryClick}},[_vm._v(\"查询\")])],1),_c('el-form-item',{attrs:{\"label-width\":\"9em\"},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_c('el-button',{attrs:{\"type\":\"text\",\"icon\":_vm.playIconType},on:{\"click\":_vm.handlePlayClick}}),_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"iconfont icon-stop\"},on:{\"click\":_vm.handleStopClick}}),_vm._v(\" 速度：\\n        \")]},proxy:true}])},[_c('el-slider',{attrs:{\"min\":1,\"max\":10},on:{\"change\":_vm.handleVehicleSpeedChange},model:{value:(_vm.vehicleQuery.speed),callback:function ($$v) {_vm.$set(_vm.vehicleQuery, \"speed\", $$v)},expression:\"vehicleQuery.speed\"}})],1)],1),_c('t-panel',{staticClass:\"no-radius\",attrs:{\"title\":\"点位状态\",\"size\":\"small\"}},[_c('el-row',{staticClass:\"tw-item\"},[_c('el-col',{attrs:{\"span\":12}},[_vm._v(\"速度：\"+_vm._s(_vm.info.speed))]),_c('el-col',{attrs:{\"span\":12}},[_vm._v(\"方向：\"+_vm._s(_vm.info.fx))])],1),_c('el-row',{staticClass:\"tw-item\"},[_c('el-col',{attrs:{\"span\":12}},[_vm._v(\"经度：\"+_vm._s(_vm.info.px))]),_c('el-col',{attrs:{\"span\":12}},[_vm._v(\"纬度：\"+_vm._s(_vm.info.py))])],1),_c('el-row',{staticClass:\"tw-item\"},[_c('el-col',{attrs:{\"span\":12}},[_vm._v(\"当前里程：\"+_vm._s(_vm.info.dqlc))]),_c('el-col',{attrs:{\"span\":12}},[_vm._v(\"合计里程：\"+_vm._s(_vm.info.zlc))])],1),_c('el-row',{staticClass:\"tw-item\"},[_c('el-col',{attrs:{\"span\":24}},[_vm._v(\"GPS时间：\"+_vm._s(_vm.info.time))])],1),_c('el-row',{staticClass:\"tw-item\"},[_c('el-col',{attrs:{\"span\":12}},[_vm._v(\"状态：\"+_vm._s(_vm.info.zt))])],1)],1)]},proxy:true}])},[_c('t-layout',{attrs:{\"border\":\"\",\"footer-strip\":\"\",\"footer\":\"360\"},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('el-slider',{staticStyle:{\"padding-left\":\"20px\",\"padding-right\":\"20px\"},attrs:{\"max\":_vm.table.gpsData.data.length},model:{value:(_vm.map.playFrame),callback:function ($$v) {_vm.$set(_vm.map, \"playFrame\", $$v)},expression:\"map.playFrame\"}}),_c('el-tabs',{staticClass:\"tw-tabs tw-full\",staticStyle:{\"height\":\"calc(100% - 38px)\"},attrs:{\"tab-position\":\"bottom\",\"type\":\"border-card\"},on:{\"tab-click\":_vm.test},model:{value:(_vm.tabs.active),callback:function ($$v) {_vm.$set(_vm.tabs, \"active\", $$v)},expression:\"tabs.active\"}},[_c('el-tab-pane',{attrs:{\"label\":\"GPS数据\",\"name\":\"GPSData\"}},[_c('t-query-panel',{scopedSlots:_vm._u([{key:\"querybar\",fn:function(){return [_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"导出\")])],1)]},proxy:true}])},[_c('el-table',{directives:[{name:\"scrollbar\",rawName:\"v-scrollbar:table\",arg:\"table\"}],staticClass:\"tw-table\",attrs:{\"data\":_vm.freezeData(_vm.table.gpsData.data),\"size\":\"small\",\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"60\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"COMP_NAME\",\"label\":\"公司\",\"min-width\":\"120\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"VEHICLE_NUM\",\"label\":\"车牌号码\",\"width\":\"120\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"SPEED_TIME\",\"label\":\"时间\",\"width\":\"160\",\"align\":\"center\",\"formatter\":_vm.formatterTDateTime}}),_c('el-table-column',{attrs:{\"prop\":\"STATE\",\"label\":\"车辆状态\",\"width\":\"100\",\"align\":\"center\",\"formatter\":_vm.formatterTVehicleType}}),_c('el-table-column',{attrs:{\"prop\":\"PX\",\"label\":\"经度\",\"width\":\"120\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"PY\",\"label\":\"纬度\",\"width\":\"120\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"DIRECTION\",\"label\":\"方向\",\"width\":\"100\",\"align\":\"center\",\"formatter\":_vm.formatterTDirectionType}}),_c('el-table-column',{attrs:{\"prop\":\"SPEED\",\"label\":\"GPS速度 km/h\",\"width\":\"100\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"MILEAGE\",\"label\":\"总里程 km\",\"width\":\"100\",\"align\":\"center\"}})],1)],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"速度曲线\",\"name\":\"second\"}},[_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"speedecharts\"}})])],1)]},proxy:true}])},[_c('div',{staticClass:\"tw-map-panel\",attrs:{\"id\":\"baidu-map\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _ from 'underscore'\n\nlet MarkerMovingControl = function(map, marker, path,speed) {\n  this._map = map;\n  this._speed = speed;\n  this._marker = marker;\n  this._path = path;\n  this._currentIndex = 0;\n  marker.setMap(map);\n  marker.setPosition(path[0]);\n}\n\nMarkerMovingControl.prototype.step = function(){\n  let nextIndex = this._currentIndex + 1;\n// console.log(nextIndex)\n\n\n  if (nextIndex < this._path.length) {\n    if (!this._listenToMoveend) {\n      this._listenToMoveend = AMap.event.addListener(this._marker, 'moveend', function(){\n        this._currentIndex++;\n        AMap.event.trigger(this, 'stepend');\n      }, this);\n    }\n    // console.log(nextIndex);\n    if(this._path[nextIndex].lng == this._path[this._currentIndex].lng && this._path[nextIndex].lat == this._path[this._currentIndex].lat ) {\n      this._currentIndex++;\n      this.step();\n      return;\n    }else{\n      this._marker.moveTo(this._path[nextIndex], this._speed);\n    }\n  }\n  return this._currentIndex;\n};\n\n/**\n * 移动marker，会从当前位置开始向前移动\n */\nMarkerMovingControl.prototype.move = function() {\n  if (!this._listenToStepend) {\n    this._listenToStepend = AMap.event.addListener(this, 'stepend', function() {\n      this.step();\n    }, this);\n  }\n  this.step();\n  return this._currentIndex;\n};\n/**\n * 停止移动marker，由于控件会记录当前位置，所以相当于暂停\n */\nMarkerMovingControl.prototype.stop = function() {\n  this._marker.stopMove();\n};\n\n/**\n * 重新开始，会把marker移动到路径的起点然后开始移动\n */\nMarkerMovingControl.prototype.restart = function() {\n  this._speed=1000;\n  this.stop();\n  this._marker.setPosition(this._path[0]);\n  this._currentIndex = 0;\n  this.move();\n};\n/**\n * 加速\n */\nMarkerMovingControl.prototype.speed = function(speed) {\n  this._speed = speed * 200;\n  this.move();\n};\n\n/**\n * 拖拽或点击后的车辆位置\n */\nMarkerMovingControl.prototype.jingdu = function(ind) {\n  // this.stop();\n  this._currentIndex = ind;\n};\nexport default MarkerMovingControl\n","<!-- 历史轨迹 -->\n<template>\n  <t-layout border right=\"273\" v-loading=\"table.gpsData.loading\">\n    <t-layout border footer-strip footer=\"360\">\n      <div id=\"baidu-map\" class=\"tw-map-panel\"></div>\n      <template v-slot:footer>\n        <el-slider\n          v-model=\"map.playFrame\"\n          :max=\"table.gpsData.data.length\"\n          style=\"padding-left: 20px; padding-right: 20px;\"\n        ></el-slider>\n        <el-tabs\n          class=\"tw-tabs tw-full\"\n          v-model=\"tabs.active\"\n          tab-position=\"bottom\"\n          type=\"border-card\"\n          @tab-click=\"test\"\n          style=\"height: calc(100% - 38px)\"\n        >\n          <el-tab-pane label=\"GPS数据\" name=\"GPSData\">\n            <t-query-panel>\n              <template v-slot:querybar>\n                <el-form-item>\n                  <el-button type=\"primary\">导出</el-button>\n                </el-form-item>\n                <!-- <el-form-item>\n                  <el-pagination\n                    background\n                    layout=\"prev, pager, next\"\n                    :page-size=\"table.gpsData.pageSize\"\n                    :current-page=\"table.gpsData.currentPage\"\n                    :total=\"table.gpsData.data.length\"\n                    @current-change=\"handleTablePageCurrentChange\"\n                  ></el-pagination>\n                </el-form-item>-->\n              </template>\n              <el-table\n                class=\"tw-table\"\n                :data=\"freezeData(table.gpsData.data)\"\n                size=\"small\"\n                border\n                stripe\n                v-scrollbar:table\n              >\n                <el-table-column type=\"index\" label=\"序号\" width=\"60\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"COMP_NAME\" label=\"公司\" min-width=\"120\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"VEHICLE_NUM\" label=\"车牌号码\" width=\"120\" align=\"center\"></el-table-column>\n                <el-table-column\n                  prop=\"SPEED_TIME\"\n                  label=\"时间\"\n                  width=\"160\"\n                  align=\"center\"\n                  :formatter=\"formatterTDateTime\"\n                ></el-table-column>\n                <el-table-column\n                  prop=\"STATE\"\n                  label=\"车辆状态\"\n                  width=\"100\"\n                  align=\"center\"\n                  :formatter=\"formatterTVehicleType\"\n                ></el-table-column>\n                <el-table-column prop=\"PX\" label=\"经度\" width=\"120\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"PY\" label=\"纬度\" width=\"120\" align=\"center\"></el-table-column>\n                <el-table-column\n                  prop=\"DIRECTION\"\n                  label=\"方向\"\n                  width=\"100\"\n                  align=\"center\"\n                  :formatter=\"formatterTDirectionType\"\n                ></el-table-column>\n                <el-table-column prop=\"SPEED\" label=\"GPS速度 km/h\" width=\"100\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"MILEAGE\" label=\"总里程 km\" width=\"100\" align=\"center\"></el-table-column>\n                <!--<el-table-column-->\n                  <!--prop=\"ADDRESS\"-->\n                  <!--label=\"当前位置\"-->\n                  <!--min-width=\"220\"-->\n                  <!--header-align=\"center\"-->\n                  <!--show-overflow-tooltip-->\n                  <!--:resizable=\"false\"-->\n                <!--&gt;-->\n                  <!--&lt;!&ndash;<template slot-scope=\"scope\">&ndash;&gt;-->\n                    <!--&lt;!&ndash;<span v-text=\"regeoCode(scope.row.PX,scope.row.PY)\"></span>&ndash;&gt;-->\n                  <!--&lt;!&ndash;</template>&ndash;&gt;-->\n                <!--</el-table-column>-->\n              </el-table>\n            </t-query-panel>\n          </el-tab-pane>\n          <el-tab-pane label=\"速度曲线\" name=\"second\">\n            <div id=\"speedecharts\" style=\"width: 100%;height: 100%\"></div>\n          </el-tab-pane>\n        </el-tabs>\n      </template>\n    </t-layout>\n    <template v-slot:right>\n      <div id=\"calendar\" class=\"tw-calendar no-footer\"></div>\n      <el-form class=\"tw-form\" :model=\"vehicleQuery\" size=\"small\">\n        <el-form-item>\n          <el-select\n            v-model=\"vehicleQuery.vehicle\"\n            :remote-method=\"handleVehicleQueryRemoteMethod\"\n            remote\n            filterable\n            reserve-keyword\n            placeholder=\"车牌号码\"\n          >\n            <el-option\n              v-for=\"item in vehicleOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n          <div style=\"display:none\">{{getHTAddress}}</div>\n        </el-form-item>\n        <el-form-item>\n          <el-date-picker v-model=\"vehicleQuery.startTime\" type=\"datetime\" placeholder=\"开始时间\"></el-date-picker>\n        </el-form-item>\n        <el-form-item>\n          <el-date-picker v-model=\"vehicleQuery.endTime\" type=\"datetime\" placeholder=\"开始时间\"></el-date-picker>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleQueryClick\">查询</el-button>\n        </el-form-item>\n        <el-form-item label-width=\"9em\">\n          <template v-slot:label>\n            <el-button type=\"text\" :icon=\"playIconType\" @click=\"handlePlayClick\"></el-button>\n            <el-button type=\"text\" icon=\"iconfont icon-stop\" @click=\"handleStopClick\"></el-button>&emsp;速度：\n          </template>\n          <el-slider\n            v-model=\"vehicleQuery.speed\"\n            :min=\"1\"\n            :max=\"10\"\n            @change=\"handleVehicleSpeedChange\"\n          ></el-slider>\n        </el-form-item>\n      </el-form>\n      <t-panel class=\"no-radius\" title=\"点位状态\" size=\"small\">\n        <el-row class=\"tw-item\">\n          <el-col :span=\"12\">速度：{{info.speed}}</el-col>\n          <el-col :span=\"12\">方向：{{info.fx}}</el-col>\n        </el-row>\n        <el-row class=\"tw-item\">\n          <el-col :span=\"12\">经度：{{info.px}}</el-col>\n          <el-col :span=\"12\">纬度：{{info.py}}</el-col>\n        </el-row>\n        <el-row class=\"tw-item\">\n          <el-col :span=\"12\">当前里程：{{info.dqlc}}</el-col>\n          <el-col :span=\"12\">合计里程：{{info.zlc}}</el-col>\n        </el-row>\n        <el-row class=\"tw-item\">\n          <el-col :span=\"24\">GPS时间：{{info.time}}</el-col>\n        </el-row>\n        <el-row class=\"tw-item\">\n          <el-col :span=\"12\">状态：{{info.zt}}</el-col>\n        </el-row>\n      </t-panel>\n    </template>\n  </t-layout>\n</template>\n\n<script>\nimport axios from 'axios'\nimport _ from 'underscore'\nimport moment from 'moment'\nimport {\n  baseURL,\n  freezeData,\n  formatterDateTime,\n  formatterTDateTime,\n  formatterVehicleType,\n  formatterTVehicleType,\n  formatterDirectionType,\n  formatterTDirectionType\n} from 'util'\nimport\n  mmc\n from 'assets/js/markerMovingControl.js'\nimport AMap from 'AMap';\nimport echarts from 'echarts'\nimport car from 'images/car.png'\nexport default {\n  name: 'HistoricalTrack',\n  data() {\n    return {\n      map: {\n        bmap: null,\n        vehicleRoute: null,\n        vehicleMarker: null,\n        playType: 0,\n        playFrame: 0,\n        palytool: null,\n        markerhistory: [],\n        polyline: [],\n        markerMovingControl: null\n      },\n      vehicleQuery: {\n        vehicle: '',\n        startTime: '',\n        endTime: '',\n        speed: 5\n      },\n      vehicleOptions: [],\n      tabs: {\n        active: 'GPSData'\n      },\n      table: {\n        gpsData: {\n          loading: false,\n          data: [],\n          pageSize: 100,\n          currentPage: 1,\n          freeze: true\n        },\n        vehicleRecord: {\n          loading: false,\n          data: [],\n          duration: 2\n        },\n        alarmLocation: {\n          loading: false,\n          data: []\n        },\n        speedingSection: {\n          loading: false,\n          data: []\n        },\n        leftEChart: null\n      },\n      setIntervalgj:null,\n      info: {\n        speed: '',\n        fx: '',\n        px: '',\n        py: '',\n        dqlc: '',\n        zlc: '',\n        time:'',\n        zt:''\n      },\n      geocoder: new AMap.Geocoder({\n        city: \"010\", //城市设为北京，默认：“全国”\n        radius: 1000 //范围，默认：500\n      })\n    }\n  },\n  mounted() {\n    // this.vehicleQuery.startTime = new Date(moment().subtract(2, 'hour'))\n    // this.vehicleQuery.endTime = new Date()\n    this.vehicleQuery.startTime = moment(new Date(new Date().getTime() - 1000*60*60*1)).format('YYYY-MM-DD HH:mm:ss')\n    this.vehicleQuery.endTime = moment(new Date()).format('YYYY-MM-DD HH:mm:ss')\n    this.vehicleQuery.vehicle = this.$cookies.get('setHTAddress')|| '';\n\n    this.$nextTick(() => {\n      this.map.bmap = new AMap.Map('baidu-map', {\n        resizeEnable: true, //是否监控地图容器尺寸变化\n        zoom: 12\n      });\n\n      laydate.render({\n        elem: '#calendar',\n        position: 'static'\n      })\n      if(this.vehicleQuery.vehicle != ''){\n        this.getHistoryList()\n        this.$cookies.remove('setHTAddress')\n      }\n    })\n  },\n  computed: {\n    playIconType() {\n      const iconName = this.map.playType === 1 ? 'icon-timeOut' : 'icon-play'\n      return `iconfont ${iconName}`\n    },\n    getHTAddress() {\n      return this.$cookies.get(\"setHTAddress\");\n    }\n  },\n  methods: {\n    async regeoCode(px,py){\n      let lnglat = [px,py];\n       let add = new Promise((resolve,reject)=>{\n         this.geocoder.getAddress(lnglat, (status, result) => {\n           if (status === 'complete' && result.regeocode)\n             resolve(result.regeocode.formattedAddress)\n           else\n             reject('无')\n\n         });\n\n       })\n      let address = await add;\n      return  address;\n    },\n    getVehicleList(value) {\n      const params = new URLSearchParams()\n      params.append('vhic', value)\n      return axios.post('map/getVhic', params, { baseURL }).then(res => {\n        this.vehicleOptions = _.map(res.data, item => {\n          return { value: item.VEHI_NO, label: item.VEHI_NO }\n        })\n      })\n    },\n    /**查询轨迹**/\n    getHistoryList() {\n      const { vehicle, startTime, endTime } = this.vehicleQuery\n      const params = new URLSearchParams()\n      let cphm = vehicle\n      params.append('vhic', vehicle)\n      params.append('stime', moment(startTime).format('YYYY-MM-DD HH:mm:ss'))\n      params.append('etime', moment(endTime).format('YYYY-MM-DD HH:mm:ss'))\n      this.table.gpsData.loading = true;\n      return axios.post('map/getHistory', params, { baseURL }).then(res => {\n        this.vehicleQuery.vehicle = cphm\n        this.map.bmap.clearMap();\n        let lineArr = [];\n        this.table.gpsData.data = [];\n        let datas = [];\n        _.map(res.data,item=>{\n          lineArr.push(new AMap.LngLat(item.PX, item.PY));\n        })\n        // _.each(res.data, async item => {\n        //   const tableItem = Object.assign({}, item)\n        //   await this.regeoCode(item.PX, item.PY).then(res => {\n        //     tableItem.ADDRESS = res;\n        //   })\n        //   datas.push(tableItem)\n        // })\n        this.addLine(lineArr)\n        this.map.markerMovingControl = new mmc(this.map.bmap, this.map.markerhistory, lineArr,1000);\n        this.table.gpsData.data = res.data;\n        // if(datas.length = res.data.length)\n          this.table.gpsData.loading = false;\n        // this.speedecharts();\n      })\n    },\n    addLine(lineArr) {\n      this.map.markerhistory = new AMap.Marker({\n        map:this.map.bmap,\n        //draggable:true, //是否可拖动\n        position:lineArr[0],//基点位置\n        icon: car, //marker图标，直接传递地址url\n        zIndex:101,\n        offset:new AMap.Pixel(-26,-13), //相对于基点的位置\n        autoRotation:true\n      });\n      //绘制轨迹\n      this.map.polyline = new AMap.Polyline({\n        map:this.map.bmap,\n        path:lineArr,\n        showDir:true,\n        strokeColor: \"#28F\",  //线颜色\n        // strokeOpacity: 1,     //线透明度\n        strokeWeight: 3,      //线宽\n        // strokeStyle: \"solid\"  //线样式\n      });\n      this.map.bmap.setFitView();\n      // this.map.markerhistory.on('moving',(passedPath) =>{\n      //   for(let i=0; i<this.table.gpsData.data.length; i++){\n      //     if(this.table.gpsData.data[i].PX == passedPath.passedPath[0].lng && this.table.gpsData.data[i].PY == passedPath.passedPath[0].lat){\n      //       this.map.playFrame = i+1;\n      //       break;\n      //     }\n      //   }\n      // });\n    },\n    test() {\n      if(this.tabs.active === 'second')\n        setTimeout(this.speedecharts,500)\n        // this.leftEChart.reset();\n    },\n    speedecharts() {\n      let data = [],title = [];\n      _.map(this.table.gpsData.data,item=>{\n        title.push(moment(item.SPEED_TIME).format('YYYY-MM-DD HH:mm:ss'));\n        data.push(item.SPEED);\n      })\n      this.leftEChart = echarts.init(document.getElementById(\"speedecharts\"));\n      this.leftEChart.setOption({\n        // title: {\n        //   text: '未来一周气温变化',\n        //   subtext: '纯属虚构'\n        // },\n        tooltip: {\n          trigger: 'axis'\n        },\n        legend: {\n          data:['速度曲线']\n        },\n        // toolbox: {\n        //   show: true,\n        //   feature: {\n        //     dataZoom: {\n        //       yAxisIndex: 'none'\n        //     },\n        //     dataView: {readOnly: false},\n        //     magicType: {type: ['line', 'bar']},\n        //     restore: {},\n        //     saveAsImage: {}\n        //   }\n        // },\n        xAxis:  {\n          type: 'category',\n          boundaryGap: false,\n          data: title\n        },\n        yAxis: {\n          type: 'value',\n          axisLabel: {\n            formatter: '{value} (KM/H)'\n          }\n        },\n        series: [\n          {\n            name:'时速',\n            type:'line',\n            data:data,\n            markPoint: {\n              data: [\n                {type: 'max', name: '最大值'},\n                {type: 'min', name: '最小值'}\n              ]\n            }\n          }\n        ]\n      });\n      this.leftEChart.resize();\n    },\n    handleTablePageCurrentChange(index) {\n      this.table.gpsData.currentPage = index\n    },\n    handleVehicleQueryRemoteMethod(query) {\n      if (query.length < 3) return\n      this.getVehicleList(query)\n    },\n    handlePlayClick() {\n      const { playType } = this.map\n      if (this.table.gpsData.data.length === 0)\n        return this.$message({ message: '无数据不支持播放', type: 'warning' })\n      if (playType === 0){\n        this.map.playType = 1;\n        // let ttt = this.map.markerMovingControl.move();\n        this.setIntervalgj = setInterval(()=>{\n          this.haldlestep();\n        },200)\n        // this.haldlestep();\n      }\n      else{\n        this.map.playType = 0\n        clearInterval(this.setIntervalgj)\n        this.map.markerMovingControl.stop();\n      }\n    },\n    haldlestep() {\n      let ttt = this.map.markerMovingControl.step();\n      if(ttt == this.table.gpsData.data.length){\n        clearInterval(this.setIntervalgj);\n      }\n      this.map.playFrame = ttt;\n      this.info.speed = this.table.gpsData.data[ttt].SPEED;\n      this.info.fx = this.formatterDirectionType(this.table.gpsData.data[ttt].DIRECTION);\n      this.info.px = this.table.gpsData.data[ttt].PX;\n      this.info.py = this.table.gpsData.data[ttt].PY;\n      this.info.dqlc = this.table.gpsData.data[ttt].MILEAGE;\n      this.info.zlc = this.table.gpsData.data[this.table.gpsData.data.length-1].MILEAGE;\n      this.info.time = moment(this.table.gpsData.data[ttt].SPEED_TIME).format('YYYY-MM-DD HH:mm:ss');\n      this.info.zt = this.table.gpsData.data[ttt].STATE ==1?'重车':'空车';\n    },\n    handleStopClick() {\n      this.map.playType = 1;\n      this.map.playFrame = 0;\n      this.map.markerMovingControl.restart();\n    },\n    handleQueryClick() {\n      console.info('handleQueryClick')\n      this.getHistoryList()\n    },\n    handleVehicleSpeedChange() {\n      this.map.markerMovingControl.speed(this.vehicleQuery.speed)\n    },\n    /**\n     * 车辆轨迹播放\n     */\n    playVehicle() {\n    },\n    /**\n     * 车辆轨迹暂停\n     */\n    vehicleTimeout() {\n    },\n    /**\n     * 停止车辆轨迹\n     */\n    resetVehiclePosition() {\n    },\n    freezeData,\n    formatterTDateTime,\n    formatterTVehicleType,\n    formatterDirectionType,\n    formatterTDirectionType\n  },\n  watch: {\n    'map.playFrame'(value) {\n      if(value){\n        this.map.markerMovingControl.jingdu(value);\n        this.map.markerhistory.setAngle(parseInt(this.table.gpsData.data[value].DIRECTION) - 90)\n        this.map.markerhistory.setPosition(new AMap.LngLat(this.table.gpsData.data[value].PX,this.table.gpsData.data[value].PY))\n      }\n    }\n  }\n}\n\n</script>\n\n\n<style lang=\"scss\" scoped>\n.tw-calendar {\n  // height: 300px;\n  // margin-left: -2px;\n  // margin-left: -1px;\n}\n.tw-item {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HistoricalTrack.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HistoricalTrack.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HistoricalTrack.vue?vue&type=template&id=72c9b508&scoped=true&\"\nimport script from \"./HistoricalTrack.vue?vue&type=script&lang=js&\"\nexport * from \"./HistoricalTrack.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HistoricalTrack.vue?vue&type=style&index=0&id=72c9b508&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72c9b508\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}