(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d03a84d6"],{"273a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("t-query-panel",{attrs:{model:e.query,footer:"300"},scopedSlots:e._u([{key:"querybar",fn:function(){return[a("el-form-item",[a("el-date-picker",{attrs:{type:"date",placeholder:"开始时间"},model:{value:e.query.startTime,callback:function(t){e.$set(e.query,"startTime",t)},expression:"query.startTime"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"date",placeholder:"结束时间"},model:{value:e.query.endTime,callback:function(t){e.$set(e.query,"endTime",t)},expression:"query.endTime"}})],1),a("el-form-item",[a("el-autocomplete",{attrs:{"prefix-icon":e.iconClassName("icon-car"),"fetch-suggestions":e.handleCompanyQuerySearch,"trigger-on-focus":!1,placeholder:"公司名称"},model:{value:e.query.company,callback:function(t){e.$set(e.query,"company",t)},expression:"query.company"}})],1),a("el-form-item",["1"===e.loginType?a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择车辆组"},model:{value:e.query.vehicleGroupId,callback:function(t){e.$set(e.query,"vehicleGroupId",t)},expression:"query.vehicleGroupId"}},e._l(e.select.vehicleGroup,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e()],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")])],1)]},proxy:!0}])},[a("t-table-page",{attrs:{data:e.table.data,loading:e.table.display,"page-size":20}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50",resizable:!1}}),a("el-table-column",{attrs:{prop:"COMP_NAME",label:"公司名称",align:"center",width:"240"}}),a("el-table-column",{attrs:{prop:"VEHI_NO",label:"车牌号码",align:"center",width:"100"}}),e._l(e.table.arr,function(t,n){return n<e.table.arr.length-1?a("el-table-column",{attrs:{prop:"M"+(n+1),label:t,align:"center",width:"100"}}):e._e()}),e._l(e.table.arr,function(t,n){return n===e.table.arr.length-1?a("el-table-column",{attrs:{prop:"M"+(n+1),label:t,align:"center","min-width":"100",resizable:!1}}):e._e()})],2)],1)},r=[],i=(a("28a5"),a("c1df")),l=a.n(i),o=a("0e08"),c=a("bc3a"),s=a.n(c),u=a("17fb"),p=a.n(u),h={name:"NoEmptyVehicleChangeVehicle",data:function(){return{loginType:"",query:{startTime:"",endTime:"",company:"",vehicleGroupId:""},inputVehicle:{loading:!1,option:[]},table:{display:!1,data:[],arr:[]},select:{company:[],vehicleGroup:[]}}},mounted:function(){this.query.startTime=new Date(l()().add("day",-10)),this.query.endTime=new Date,this.loginType=this.$cookies.get("loginType"),this.getVehicleGroup(),this.findNoEmptyVehicleChange(),this.getCompany()},methods:{iconClassName:o["m"],getVehicleGroup:function(){var e=this;if("1"!==this.loginType)return null;s.a.get("common/vehicleGroup",{baseURL:o["a"],params:{userId:this.$cookies.get("userId")}}).then(function(t){e.select.vehicleGroup=p.a.map(t.data,function(e){return{value:e.CLZS,label:e.CLZ_NAME}})}).catch(function(e){})},handleCompanyQuerySearch:function(e,t){t(p.a.filter(this.select.company,function(t){return t.value.indexOf(e)>-1}))},getCompany:function(){var e=this;s.a.get("common/company",{baseURL:o["a"],params:{}}).then(function(t){e.select.company=p.a.map(t.data,function(e){return{value:e.COMPANY_NAME}})}).catch(function(e){console.log(e)})},getAll:function(e,t){this.table.arr=[];var a=e.split("-"),n=t.split("-"),r=new Date;r.setUTCFullYear(a[0],a[1]-1,a[2]);var i=new Date;i.setUTCFullYear(n[0],n[1]-1,n[2]);for(var o=r.getTime()-864e5,c=i.getTime()-864e5,s=o;s<=c;)s+=864e5,this.table.arr.push(l()(new Date(parseInt(s))).format("YYYY-MM-DD"))},findNoEmptyVehicleChange:function(){var e=this,t=this.query,a=t.startTime,n=t.endTime,r=t.company,i=t.vehicleGroupId;return a&&n?parseInt(l()(a).format("YYYYMMDD"))>parseInt(l()(n).format("YYYYMMDD"))?this.$message.error("开始时间必须小于结束时间！"):(this.getAll(a&&l()(a).format("YYYY-MM-DD"),n&&l()(n).format("YYYY-MM-DD")),this.table.display=!0,void s.a.get("dataStatistics/findNoEmptyVehicleChange",{baseURL:o["a"],params:{startTime:a&&l()(a).format("YYYY-MM-DD"),endTime:n&&l()(n).format("YYYY-MM-DD"),company:r,vehicleGroupId:i}}).then(function(t){console.log("1111111111111",t),e.table.data=t.data||[],e.table.display=!1}).catch(function(e){console.log(e)})):this.$message.error("请选择时间！")},handleQueryClick:function(){this.findNoEmptyVehicleChange()},handleExportClick:function(){var e=this.query,t=e.startTime,a=e.endTime,n=e.company,r=e.vehicleGroupId;return t&&a?parseInt(l()(t).format("YYYYMMDD"))>parseInt(l()(a).format("YYYYMMDD"))?this.$message.error("开始时间必须小于结束时间！"):void this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then(function(){window.open("".concat(o["a"],"dataStatistics/findNoEmptyVehicleChangeExcel?startTime=").concat(t&&l()(t).format("YYYY-MM-DD"),"&endTime=").concat(a&&l()(a).format("YYYY-MM-DD"),"&company=").concat(n,"&vehicleGroupId=").concat(r))}).catch(function(){}):this.$message.error("请选择时间！")}}},d=h,m=a("2877"),f=Object(m["a"])(d,n,r,!1,null,null,null);t["default"]=f.exports},"28a5":function(e,t,a){"use strict";var n=a("aae3"),r=a("cb7c"),i=a("ebd6"),l=a("0390"),o=a("9def"),c=a("5f1b"),s=a("520a"),u=a("79e5"),p=Math.min,h=[].push,d="split",m="length",f="lastIndex",y=4294967295,g=!u(function(){RegExp(y,"y")});a("214f")("split",2,function(e,t,a,u){var v;return v="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[m]||2!="ab"[d](/(?:ab)*/)[m]||4!="."[d](/(.?)(.?)/)[m]||"."[d](/()()/)[m]>1||""[d](/.?/)[m]?function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!n(e))return a.call(r,e,t);var i,l,o,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,d=void 0===t?y:t>>>0,g=new RegExp(e.source,u+"g");while(i=s.call(g,r)){if(l=g[f],l>p&&(c.push(r.slice(p,i.index)),i[m]>1&&i.index<r[m]&&h.apply(c,i.slice(1)),o=i[0][m],p=l,c[m]>=d))break;g[f]===i.index&&g[f]++}return p===r[m]?!o&&g.test("")||c.push(""):c.push(r.slice(p)),c[m]>d?c.slice(0,d):c}:"0"[d](void 0,0)[m]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,n){var r=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,r,n):v.call(String(r),a,n)},function(e,t){var n=u(v,e,this,t,v!==a);if(n.done)return n.value;var s=r(e),h=String(this),d=i(s,RegExp),m=s.unicode,f=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(g?"y":"g"),b=new d(g?s:"^(?:"+s.source+")",f),Y=void 0===t?y:t>>>0;if(0===Y)return[];if(0===h.length)return null===c(b,h)?[h]:[];var M=0,T=0,D=[];while(T<h.length){b.lastIndex=g?T:0;var C,x=c(b,g?h:h.slice(T));if(null===x||(C=p(o(b.lastIndex+(g?0:T)),h.length))===M)T=l(h,T,m);else{if(D.push(h.slice(M,T)),D.length===Y)return D;for(var k=1;k<=x.length-1;k++)if(D.push(x[k]),D.length===Y)return D;T=M=C}}return D.push(h.slice(M)),D}]})},aae3:function(e,t,a){var n=a("d3f4"),r=a("2d95"),i=a("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==r(e))}}}]);
//# sourceMappingURL=chunk-d03a84d6.fafcffcd.js.map