(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c5ad9a0"],{"28a5":function(t,e,a){"use strict";var i=a("aae3"),n=a("cb7c"),o=a("ebd6"),l=a("0390"),r=a("9def"),s=a("5f1b"),d=a("520a"),c=a("79e5"),u=Math.min,p=[].push,f="split",h="length",m="lastIndex",g=4294967295,b=!c(function(){RegExp(g,"y")});a("214f")("split",2,function(t,e,a,c){var v;return v="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[h]||2!="ab"[f](/(?:ab)*/)[h]||4!="."[f](/(.?)(.?)/)[h]||"."[f](/()()/)[h]>1||""[f](/.?/)[h]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return a.call(n,t,e);var o,l,r,s=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,f=void 0===e?g:e>>>0,b=new RegExp(t.source,c+"g");while(o=d.call(b,n)){if(l=b[m],l>u&&(s.push(n.slice(u,o.index)),o[h]>1&&o.index<n[h]&&p.apply(s,o.slice(1)),r=o[0][h],u=l,s[h]>=f))break;b[m]===o.index&&b[m]++}return u===n[h]?!r&&b.test("")||s.push(""):s.push(n.slice(u)),s[h]>f?s.slice(0,f):s}:"0"[f](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,i){var n=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,n,i):v.call(String(n),a,i)},function(t,e){var i=c(v,t,this,e,v!==a);if(i.done)return i.value;var d=n(t),p=String(this),f=o(d,RegExp),h=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(b?"y":"g"),A=new f(b?d:"^(?:"+d.source+")",m),y=void 0===e?g:e>>>0;if(0===y)return[];if(0===p.length)return null===s(A,p)?[p]:[];var w=0,E=0,k=[];while(E<p.length){A.lastIndex=b?E:0;var C,R=s(A,b?p:p.slice(E));if(null===R||(C=u(r(A.lastIndex+(b?0:E)),p.length))===w)E=l(p,E,h);else{if(k.push(p.slice(w,E)),k.length===y)return k;for(var x=1;x<=R.length-1;x++)if(k.push(R[x]),k.length===y)return k;E=w=C}}return k.push(p.slice(w)),k}]})},"6c80":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("t-layout",{attrs:{footer:"300"},scopedSlots:t._u([{key:"footer",fn:function(){return[a("t-query-panel",{scopedSlots:t._u([{key:"querybar",fn:function(){return[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAddAreaClick}},[t._v("添加区域")])],1)]},proxy:!0}])},[a("t-table-page",{attrs:{data:t.table.data}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center",resizable:!1}}),a("el-table-column",{attrs:{prop:"AREA_NAME",label:"区域名称",width:"200",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"AREA_DESCRIBE",label:"区域描述","min-width":"280","header-align":"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"AREA_SIZE",label:"区域面积",width:"140",align:"center"}}),a("el-table-column",{attrs:{prop:"YJS",label:"区域预报警数",width:"120",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"90",align:"center",resizable:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-map-location"},on:{click:function(a){return t.handerTableAreaClick(e.row)}}}),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.handerTableEditClick(e.row)}}}),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return t.handerTableDeleteClick(e.row.ID)}}})]}}])})],1)],1)]},proxy:!0}])},[a("div",{staticClass:"tw-map-panel",attrs:{id:"baidu-map"}}),a("el-dialog",{attrs:{title:t.dialog.title,visible:t.dialog.display,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){return t.$set(t.dialog,"display",e)},closed:t.handleDialogClosed}},[a("el-form",{staticClass:"tw-form",attrs:{model:t.dialog.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"区域名称"}},[a("el-input",{model:{value:t.dialog.form.name,callback:function(e){t.$set(t.dialog.form,"name",e)},expression:"dialog.form.name"}})],1),a("el-form-item",{attrs:{label:"区域描述"}},[a("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:t.dialog.form.description,callback:function(e){t.$set(t.dialog.form,"description",e)},expression:"dialog.form.description"}})],1),a("el-form-item",{attrs:{label:"区域面积"}},[a("el-input",{attrs:{value:t.formatterArea,readonly:""}})],1),a("el-form-item",{attrs:{label:"区域坐标"}},[a("el-input",{attrs:{value:t.formatterCoordinate,type:"textarea",rows:"4",readonly:""}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleDialogCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleDialogSubmit}},[t._v("确 定")])],1)],1)],1)},n=[],o=(a("7f7f"),a("28a5"),a("a481"),a("bc3a")),l=a.n(o),r=a("17fb"),s=a.n(r),d=a("024c"),c=a.n(d),u=a("0e08"),p={name:"RegionalManage",data:function(){return{map:{bmap:null,mouseTool:null,infoWindow:null,styleOptions:{strokeColor:"red",fillColor:"red",strokeWeight:3,strokeOpacity:.8,fillOpacity:.6,strokeStyle:"solid"},polygon:null,areaPolygon:null},table:{data:[]},dialog:{display:!1,loading:!1,title:"",form:{name:"",description:"",use:"",area:"",coordinate:"",id:""}},useOptions:[{value:1,label:"重点区域监控"},{value:2,label:"电子围栏"},{value:3,label:"场站"},{value:4,label:"其他"}]}},mounted:function(){this.map.bmap=new c.a.Map("baidu-map",{resizeEnable:!0,zoom:12}),this.handleGetArea()},computed:{formatterArea:function(){return"".concat(this.dialog.form.area||0,"平方米")},formatterCoordinate:function(){var t=this.dialog.form.coordinate;return t&&t.replace(/;/g,";\r\n")||""}},methods:{handleGetArea:function(){var t=this;l.a.get("map/getArea",{baseURL:u["a"]}).then(function(e){t.map.bmap.clearMap(),t.table.data=e.data,s.a.map(e.data,function(e){t.displayPolygon(e.AREA_COORDINATES,e.AREA_NAME)})})},displayPolygon:function(t,e){var a=this,i=t.split(";"),n=[],o=[];s.a.map(i,function(t){n=[],t.length>5&&(n.push(t.split(",")[0],t.split(",")[1]),o.push(n))});var l=new c.a.Polygon({path:o,strokeColor:"#409eff",strokeWeight:1,strokeOpacity:.2,fillOpacity:.6,fillColor:"#076cd0",zIndex:50});this.map.bmap.add(l),l.on("click",function(){var t=[];t.push(e),a.map.infoWindow=new c.a.InfoWindow({content:t.join("")}),a.map.infoWindow.open(a.map.bmap,[i[0].split(",")[0],i[0].split(",")[1]])}),this.map.bmap.setFitView()},handleAddAreaClick:function(){var t=this;this.map.mouseTool=new c.a.MouseTool(this.map.bmap),this.map.mouseTool.polygon({fillColor:"#00b0ff",strokeColor:"#80d8ff"}),this.map.mouseTool.on("draw",function(e){var a="";s.a.map(e.obj.getPath(),function(t){a+=t.lng+","+t.lat+";"}),t.dialog.title="添加区域",t.dialog.form.coordinate=a.substring(0,a.length-1),t.dialog.form.area=e.obj.getArea(),t.dialog.display=!0})},handerTableAreaClick:function(t){var e=[];e.push(t.AREA_NAME),this.map.infoWindow=new c.a.InfoWindow({content:e.join("")}),this.map.infoWindow.open(this.map.bmap,[t.AREA_COORDINATES.split(";")[0].split(",")[0],t.AREA_COORDINATES.split(";")[0].split(",")[1]]),this.map.bmap.setCenter([t.AREA_COORDINATES.split(";")[0].split(",")[0],t.AREA_COORDINATES.split(";")[0].split(",")[1]])},handerTableEditClick:function(t){this.dialog.display=!0,this.dialog.title="修改区域",this.dialog.form.name=t.AREA_NAME,this.dialog.form.description=t.AREA_DESCRIBE,this.dialog.form.area=t.AREA_SIZE,this.dialog.form.coordinate=t.AREA_COORDINATES,this.dialog.form.id=t.ID},handerTableDeleteClick:function(t){var e=this;this.$confirm("此操作将永久删除该区域, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=new URLSearchParams;a.append("id",t),l.a.post("map/delArea",a,{baseURL:u["a"]}).then(function(t){e.$message(t.data.info),e.handleGetArea()})}).catch(function(){})},handleDialogClosed:function(){this.map.mouseTool&&this.map.mouseTool.close(!0),this.dialog.title="",this.dialog.form.name="",this.dialog.form.description="",this.dialog.form.use="",this.dialog.form.area="",this.dialog.form.coordinate=""},handleDialogCancel:function(){this.dialog.display=!1},handleDialogSubmit:function(){var t=this,e=new URLSearchParams;e.append("name",this.dialog.form.name),e.append("ms",this.dialog.form.description),e.append("size",this.dialog.form.area),e.append("jwd",this.dialog.form.coordinate),"添加区域"==this.dialog.title?l.a.post("map/addArea",e,{baseURL:u["a"]}).then(function(e){t.$message(e.data.info),t.dialog.display=!1,t.handleGetArea()}):(e.append("id",this.dialog.form.id),l.a.post("map/editArea",e,{baseURL:u["a"]}).then(function(e){t.$message(e.data.info),t.dialog.display=!1,t.handleGetArea()}))}}},f=p,h=a("2877"),m=Object(h["a"])(f,i,n,!1,null,null,null);e["default"]=m.exports},a481:function(t,e,a){"use strict";var i=a("cb7c"),n=a("4bf8"),o=a("9def"),l=a("4588"),r=a("0390"),s=a("5f1b"),d=Math.max,c=Math.min,u=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,function(t,e,a,m){return[function(i,n){var o=t(this),l=void 0==i?void 0:i[e];return void 0!==l?l.call(i,o,n):a.call(String(o),i,n)},function(t,e){var n=m(a,t,this,e);if(n.done)return n.value;var u=i(t),p=String(this),f="function"===typeof e;f||(e=String(e));var b=u.global;if(b){var v=u.unicode;u.lastIndex=0}var A=[];while(1){var y=s(u,p);if(null===y)break;if(A.push(y),!b)break;var w=String(y[0]);""===w&&(u.lastIndex=r(p,o(u.lastIndex),v))}for(var E="",k=0,C=0;C<A.length;C++){y=A[C];for(var R=String(y[0]),x=d(c(l(y.index),p.length),0),S=[],_=1;_<y.length;_++)S.push(h(y[_]));var I=y.groups;if(f){var T=[R].concat(S,x,p);void 0!==I&&T.push(I);var O=String(e.apply(void 0,T))}else O=g(R,p,x,S,I,e);x>=k&&(E+=p.slice(k,x)+O,k=x+R.length)}return E+p.slice(k)}];function g(t,e,i,o,l,r){var s=i+t.length,d=o.length,c=f;return void 0!==l&&(l=n(l),c=p),a.call(r,c,function(a,n){var r;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(s);case"<":r=l[n.slice(1,-1)];break;default:var c=+n;if(0===c)return a;if(c>d){var p=u(c/10);return 0===p?a:p<=d?void 0===o[p-1]?n.charAt(1):o[p-1]+n.charAt(1):a}r=o[c-1]}return void 0===r?"":r})}})},aae3:function(t,e,a){var i=a("d3f4"),n=a("2d95"),o=a("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==n(t))}}}]);
//# sourceMappingURL=chunk-0c5ad9a0.d66a7c61.js.map