{"version":3,"sources":["webpack:///./src/views/WorkgroupMonitoring.vue?0921","webpack:///src/views/WorkgroupMonitoring.vue","webpack:///./src/views/WorkgroupMonitoring.vue?5e5f","webpack:///./src/views/WorkgroupMonitoring.vue","webpack:///./src/views/WorkgroupMonitoring.vue?201a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","placeholder","model","value","callback","$$v","workGroupName","expression","slot","icon","_m","_l","item","index","key","on","click","$event","handleWorkGroupItemClick","_v","_s","username","staticRenderFns","WorkgroupMonitoringvue_type_script_lang_js_","name","data","workGroupList","gzzdwmap","infoWindow","AMap","InfoWindow","offset","Pixel","mounted","_this","$nextTick","getWorkGroupList","Map","resizeEnable","mapStyle","computed","filterWorkGroupList","underscore_default","a","filter","indexOf","methods","_this2","baseURL","axios_default","get","then","res","i","length","addmar","setFitView","py","latitude","px","longitude","setZoomAndCenter","mar","getAllOverlays","hasOwnProperty","vehicle","event","trigger","obj","_this3","marker1","Marker","map","position","LngLat","draggable","info","concat","company","phone","moment_default","updatetime","format","inforWindow","content","addListener","e","open","close","views_WorkgroupMonitoringvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WorkgroupMonitoring_vue_vue_type_style_index_0_id_2dd9a9f2_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WorkgroupMonitoring_vue_vue_type_style_index_0_id_2dd9a9f2_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-952bc2a6.70aa9f40.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"template-wrapper\"},[_c('div',{staticClass:\"tw-map\",attrs:{\"id\":\"gzzdwmap\"}}),_c('div',{staticClass:\"tw-map-card tw-map-query-bar\"},[_c('div',{staticClass:\"tw-map-query\"},[_c('el-input',{staticClass:\"tw-searchFor\",attrs:{\"placeholder\":\"请输入工作组名称\"},model:{value:(_vm.workGroupName),callback:function ($$v) {_vm.workGroupName=$$v},expression:\"workGroupName\"}},[_c('el-button',{staticClass:\"tw-button--primary\",attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},slot:\"append\"})],1)],1),_c('div',{staticClass:\"tw-map-queryList\"},[_vm._m(0),_c('el-scrollbar',{staticClass:\"tw-scrollbar tw-y tw-map-query-body\"},_vm._l((_vm.filterWorkGroupList),function(item,index){return _c('div',{key:item.id,staticClass:\"tw-map-query-item\",on:{\"click\":function($event){_vm.handleWorkGroupItemClick(item)}}},[_c('div',{staticClass:\"tw-map-query-col col-id\"},[_vm._v(_vm._s(index+1))]),_c('div',{staticClass:\"tw-map-query-col col-name\"},[_vm._v(_vm._s(item.username))])])}),0)],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-map-query-item tw-map-query-header\"},[_c('div',{staticClass:\"tw-map-query-col col-id\"},[_vm._v(\"序号\")]),_c('div',{staticClass:\"tw-map-query-col col-name\"},[_vm._v(\"工作组名称\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"template-wrapper\">\r\n\t\t<div class=\"tw-map\" id=\"gzzdwmap\"></div>\r\n\t\t<div class=\"tw-map-card tw-map-query-bar\">\r\n\t\t\t<div class=\"tw-map-query\">\r\n\t\t\t\t<el-input class=\"tw-searchFor\" v-model=\"workGroupName\" placeholder=\"请输入工作组名称\">\r\n\t\t\t\t\t<el-button class=\"tw-button--primary\" icon=\"el-icon-search\" slot=\"append\"></el-button>\r\n\t\t\t\t</el-input>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"tw-map-queryList\">\r\n\t\t\t\t<div class=\"tw-map-query-item tw-map-query-header\">\r\n\t\t\t\t\t<div class=\"tw-map-query-col col-id\">序号</div>\r\n\t\t\t\t\t<div class=\"tw-map-query-col col-name\">工作组名称</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<el-scrollbar class=\"tw-scrollbar tw-y tw-map-query-body\">\r\n\t\t\t\t\t<div class=\"tw-map-query-item\" v-for=\"(item, index) in filterWorkGroupList\" :key=\"item.id\" @click=\"handleWorkGroupItemClick(item)\">\r\n\t\t\t\t\t\t<div class=\"tw-map-query-col col-id\">{{index+1}}</div>\r\n\t\t\t\t\t\t<div class=\"tw-map-query-col col-name\">{{item.username}}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-scrollbar>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport _ from 'underscore'\r\n\timport axios from 'axios'\r\n\timport moment from 'moment'\r\n\r\n\texport default {\r\n\t\tname: \"WorkgroupMonitoring\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tworkGroupName: '',\r\n\t\t\t\tworkGroupList: [],\r\n\t\t\t\tgzzdwmap: null,\r\n\t\t\t\tinfoWindow: new AMap.InfoWindow({offset: new AMap.Pixel(0, -30)})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.getWorkGroupList()\r\n\t\t\t\tthis.gzzdwmap = new AMap.Map('gzzdwmap', {\r\n\t\t\t\t\tresizeEnable: true, //是否监控地图容器尺寸变化\r\n\t\t\t\t\tmapStyle: \"amap://styles/fresh\"\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tfilterWorkGroupList() {\r\n\t\t\t\tconst workGroupName = this.workGroupName\r\n\t\t\t\treturn _.filter(this.workGroupList, item => {\r\n\t\t\t\t\treturn item.username.indexOf(workGroupName) >= 0;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetWorkGroupList() {\r\n\t\t\t\tconst baseURL = this.baseURL\r\n\t\t\t\taxios.get('company/getgzz', {\r\n\t\t\t\t\tbaseURL\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.workGroupList = res.data;\r\n\t\t\t\t\tfor(let i=0; i<res.data.length; i++){\r\n\t\t\t\t\t\tthis.addmar(res.data[i])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.gzzdwmap.setFitView();\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleWorkGroupItemClick(item) {\r\n\t\t\t\t// 每一项工作组名\r\n\t\t\t\tlet py=item.latitude;\r\n\t\t\t\tlet px=item.longitude;\r\n\t\t\t\tlet username=item.username;\r\n\t\t\t\tthis.gzzdwmap.setZoomAndCenter(15, [px, py]);\r\n\t\t\t\tlet mar = this.gzzdwmap.getAllOverlays();\r\n\t\t\t\tfor(let i=0; i<mar.length;i++){\r\n\t\t\t\t\tif(mar[i].hasOwnProperty('vehicle') && mar[i].vehicle.username.indexOf(username)>=0){\r\n\t\t\t\t\t\tAMap.event.trigger(mar[i],'click');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddmar: function(obj) {\r\n\t\t\t\tlet marker1 = new AMap.Marker({\r\n\t\t\t\t\tmap:this.gzzdwmap,\r\n\t\t\t\t\ticon:'/img/gzz.png',\r\n\t\t\t\t\tposition:new AMap.LngLat(obj.longitude,obj.latitude),\r\n\t\t\t\t\toffset:new AMap.Pixel(-8,-8), //相对于基点的偏移位置\r\n\t\t\t\t\tdraggable:false\r\n\t\t\t\t});\r\n\t\t\t\tmarker1.vehicle = obj;\r\n\t\t\t\tlet info = `<p>所属公司：${obj.company}</p><p>工作组名：${obj.username}</p><p>联系电话：${obj.phone}</p><p>定位时间：${moment(obj.updatetime).format('YYYY-MM-DD HH:mm:ss')}</p>`;\r\n\t\t\t\tlet inforWindow = new AMap.InfoWindow({\r\n\t\t\t\t\toffset:new AMap.Pixel(0,0),\r\n\t\t\t\t\tcontent:info\r\n\t\t\t\t});\r\n\t\t\t\tAMap.event.addListener(marker1,\"click\",e => {\r\n\t\t\t\t\tinforWindow.open(this.gzzdwmap,new AMap.LngLat(obj.longitude,obj.latitude));\r\n\t\t\t\t});\r\n\t\t\t\tAMap.event.addListener(this.gzzdwmap,\"click\",e => {\r\n\t\t\t\t\tinforWindow.close();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.tw-map {\r\n\t\t&-query {\r\n\t\t\tmargin-bottom: 10px;\r\n\r\n\t\t\t&-bar {\r\n\t\t\t\ttop: 40px;\r\n\t\t\t\twidth: 270px;\r\n\t\t\t\theight: 75%;\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t}\r\n\r\n\t\t\t&List {\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\theight: calc(100% - 48px);\r\n\t\t\t}\r\n\r\n\t\t\t&-item {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tborder-bottom: 1px solid #eeeeee;\r\n\t\t\t\tcursor: pointer;\r\n\r\n\t\t\t\t&:last-child {\r\n\t\t\t\t\tborder-bottom: none;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t&-header {\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\r\n\t\t\t&-body {\r\n\t\t\t\theight: calc(100% - 35px);\r\n\t\t\t}\r\n\r\n\t\t\t&-col {\r\n\t\t\t\t$idWidth: 60px;\r\n\r\n\t\t\t\t&.col-id {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\ttop: 0;\r\n\t\t\t\t\tleft: 0;\r\n\t\t\t\t\twidth: $idWidth;\r\n\t\t\t\t\theight: 35px;\r\n\t\t\t\t\tpadding: 5px 10px;\r\n\t\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\t\tline-height: 25px;\r\n\t\t\t\t\ttext-align: right;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.col-name {\r\n\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\twidth: calc(100% - #{$idWidth});\r\n\t\t\t\t\theight: 35px;\r\n\t\t\t\t\tmargin-left: $idWidth;\r\n\t\t\t\t\tpadding: 5px 7px;\r\n\t\t\t\t\tline-height: 25px;\r\n\t\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkgroupMonitoring.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkgroupMonitoring.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorkgroupMonitoring.vue?vue&type=template&id=2dd9a9f2&scoped=true&\"\nimport script from \"./WorkgroupMonitoring.vue?vue&type=script&lang=js&\"\nexport * from \"./WorkgroupMonitoring.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WorkgroupMonitoring.vue?vue&type=style&index=0&id=2dd9a9f2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2dd9a9f2\",\n  null\n  \n)\n\ncomponent.options.__file = \"WorkgroupMonitoring.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkgroupMonitoring.vue?vue&type=style&index=0&id=2dd9a9f2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkgroupMonitoring.vue?vue&type=style&index=0&id=2dd9a9f2&lang=scss&scoped=true&\""],"sourceRoot":""}