(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1494e988"],{2078:function(t,e,a){"use strict";var n=a("b9e1"),i=a.n(n);i.a},"880a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"template-wrapper"},[a("div",{staticClass:"tw-map",attrs:{id:"gzzdwmap"}}),a("div",{staticClass:"tw-map-card tw-map-query-bar"},[a("div",{staticClass:"tw-map-query"},[a("el-input",{staticClass:"tw-searchFor",attrs:{placeholder:"请输入工作组名称"},model:{value:t.workGroupName,callback:function(e){t.workGroupName=e},expression:"workGroupName"}},[a("el-button",{staticClass:"tw-button--primary",attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("div",{staticClass:"tw-map-queryList"},[t._m(0),a("el-scrollbar",{staticClass:"tw-scrollbar tw-y tw-map-query-body"},t._l(t.filterWorkGroupList,function(e,n){return a("div",{key:e.id,staticClass:"tw-map-query-item",on:{click:function(a){t.handleWorkGroupItemClick(e)}}},[a("div",{staticClass:"tw-map-query-col col-id"},[t._v(t._s(n+1))]),a("div",{staticClass:"tw-map-query-col col-name"},[t._v(t._s(e.username))])])}),0)],1)])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tw-map-query-item tw-map-query-header"},[a("div",{staticClass:"tw-map-query-col col-id"},[t._v("序号")]),a("div",{staticClass:"tw-map-query-col col-name"},[t._v("工作组名称")])])}],o=(a("cadf"),a("551c"),a("097d"),a("17fb")),r=a.n(o),s=a("bc3a"),c=a.n(s),p=a("c1df"),l=a.n(p),u={name:"WorkgroupMonitoring",data:function(){return{workGroupName:"",workGroupList:[],gzzdwmap:null,infoWindow:new AMap.InfoWindow({offset:new AMap.Pixel(0,-30)})}},mounted:function(){var t=this;this.$nextTick(function(){t.getLogin(),t.getWorkGroupList(),t.gzzdwmap=new AMap.Map("gzzdwmap",{resizeEnable:!0,mapStyle:"amap://styles/fresh"})})},computed:{filterWorkGroupList:function(){var t=this.workGroupName;return r.a.filter(this.workGroupList,function(e){return e.username.indexOf(t)>=0})}},methods:{getLogin:function(){var t=this,e=this.baseURL;c.a.get("company/getlogin",{baseURL:e}).then(function(e){var a=e.data.info;console.log(a),"null"===a&&t.$router.push({name:"login"})})},getWorkGroupList:function(){var t=this,e=this.baseURL;c.a.get("company/getgzz",{baseURL:e}).then(function(e){t.workGroupList=e.data;for(var a=0;a<e.data.length;a++)t.addmar(e.data[a]);t.gzzdwmap.setFitView()})},handleWorkGroupItemClick:function(t){var e=t.latitude,a=t.longitude,n=t.username;this.gzzdwmap.setZoomAndCenter(15,[a,e]);for(var i=this.gzzdwmap.getAllOverlays(),o=0;o<i.length;o++)i[o].hasOwnProperty("vehicle")&&i[o].vehicle.username.indexOf(n)>=0&&AMap.event.trigger(i[o],"click")},addmar:function(t){var e=this,a=new AMap.Marker({map:this.gzzdwmap,icon:"/ccensus/img/gzz.png",position:new AMap.LngLat(t.longitude,t.latitude),offset:new AMap.Pixel(-8,-8),draggable:!1});a.vehicle=t;var n="<p>所属公司：".concat(t.company,"</p><p>工作组名：").concat(t.username,"</p><p>联系电话：").concat(t.phone,"</p><p>定位时间：").concat(l()(t.updatetime).format("YYYY-MM-DD HH:mm:ss"),"</p>"),i=new AMap.InfoWindow({offset:new AMap.Pixel(0,0),content:n});AMap.event.addListener(a,"click",function(a){i.open(e.gzzdwmap,new AMap.LngLat(t.longitude,t.latitude))}),AMap.event.addListener(this.gzzdwmap,"click",function(t){i.close()})}}},d=u,m=(a("2078"),a("2877")),w=Object(m["a"])(d,n,i,!1,null,"4b3887f9",null);w.options.__file="WorkgroupMonitoring.vue";e["default"]=w.exports},b9e1:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1494e988.d4a0de29.js.map